window.__require=function t(e,i,a){function n(o,r){if(!i[o]){if(!e[o]){var h=o.split("/");if(h=h[h.length-1],!e[h]){var c="function"==typeof __require&&__require;if(!r&&c)return c(h,!0);if(s)return s(h,!0);throw new Error("Cannot find module '"+o+"'")}}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){return n(e[o][1][t]||t)},l,l.exports,t,e,i,a)}return i[o].exports}for(var s="function"==typeof __require&&__require,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(t,e,i){"use strict";function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var r=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var c=t.length;h>0&&c>h&&(c=h);for(var l=0;l<c;++l){var d,p,m,f,g=t[l].replace(r,"%20"),u=g.indexOf(i);u>=0?(d=g.substr(0,u),p=g.substr(u+1)):(d=g,p=""),m=decodeURIComponent(d),f=decodeURIComponent(p),a(o,m)?n(o[m])?o[m].push(f):o[m]=[o[m],f]:o[m]=f}return o};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],2:[function(t,e,i){"use strict";var a=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,r){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(o(t),function(o){var r=encodeURIComponent(a(o))+i;return n(t[o])?s(t[o],function(t){return r+encodeURIComponent(a(t))}).join(e):r+encodeURIComponent(a(t[o]))}).join(e):r?encodeURIComponent(a(r))+i+encodeURIComponent(a(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],a=0;a<t.length;a++)i.push(e(t[a],a));return i}var o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],3:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":1,"./encode":2}],ad:[function(t,e,i){"use strict";cc._RF.push(e,"a2f16MrKjBEorVoKQebbnCs","ad");var a={banner:null,bannerDuring:0,bannerCheck:0,videoad:null,videoLoaded:!1,videoCB:null,videoduring:null,interstitialad:null,load:function(){},createVideo:function(){if(WECHATGAME||QQPLAY){var t="";WECHATGAME&&(t="adunit-5ba9b95931900205"),QQPLAY&&(t="6433549f9bfa8fe7364afc329656e505");var e=this;this.videoad=platform.createRewardedVideoAd({adUnitId:t}),this.videoad.load().then(function(){}).catch(function(t){console.log("\u9996\u6b21\u62c9\u53d6\u8f7d\u6fc0\u52b1\u89c6\u9891\u5931\u8d25")}),this.videoduring=0,this.videoLoaded=!1,this.videoad.onLoad(function(){console.log("\u6210\u529f\u52a0\u8f7d\u6fc0\u52b1\u89c6\u9891"),e.videoLoaded=!0}),this.videoad.onError(function(){e.videoLoaded=!1,e.videoCB=null,e.videotype=null}),this.videoad.onClose(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed"),e.bannershowing&&e.banner.show(),t&&t.isEnded||void 0===t?null!=e.videoCB&&e.videoCB():e.videotype,e.videoCB=null,e.videotype=null})}},createBoxAd:function(){if(QQPLAY){this.appBoxAd&&this.appBoxAd.destroy(),this.appBoxAd=qq.createAppBox({adUnitId:"161c85fbb64cd2710e8f7b6b2d0e2649"});var t=this;this.appBoxAd.load().then(function(){t.appBoxAd.show()})}},showBoxAd:function(){this.createBoxAd()},hideBoxAd:function(){this.appBoxAd&&(this.appBoxAd.destroy(),this.appBoxAd=null)},createBanner:function(){var t=platform.getSystemInfoSync(),e=t.screenWidth,i=t.screenHeight,a=e;e/i>.5625&&(a=.7*e);var n=a/4,s=(e-a)/2,o=i-n-4;o*=1.8*e<i?.96:.99;var r="";WECHATGAME&&(r="adunit-b0b9e29a179ec68f"),QQPLAY&&(r="76e45d75f61e2625d05890865ff62d70"),(WECHATGAME||QQPLAY)&&(this.banner=platform.createBannerAd({adUnitId:r,style:{left:s,top:o,width:a,height:n}}));var h=this;null!=this.banner&&(this.banner.onLoad(function(){h.bannershowing&&h.banner.show(),console.log("\u6210\u529f\u52a0\u8f7dbanner\u5e7f\u544a")}),this.banner.onError(function(){console.error("create banner error")}))},createInterstitial:function(){if(!QQPLAY)return"function"==typeof wx.createInterstitialAd?(this.interstitialad=wx.createInterstitialAd({adUnitId:"adunit-6ccdb687b5f4e9ab"}),void console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a")):void 0},update:function(t){},isVideoLoaded:function(){return this.videoLoaded},showVideoAd:function(t,e){if(console.log("showVideoAd"),WECHATGAME||QQPLAY){var i=this,a=function(){i.videoLoaded=!1,i.videoCB=null,platform.showModal({title:"\u63d0\u793a",content:"\u52a0\u8f7d\u89c6\u9891\u5931\u8d25,\u8bf7\u7a0d\u540e\u91cd\u8bd5",showCancel:!1,cancelText:"",confirmText:"\u786e\u5b9a",success:function(t){}}),i.videoad.load()};this.videoLoaded?(this.videoCB=t,this.videoad.show().catch(function(t){a()}),this.videotype=e,this.hideBannerAd()):a()}},showBannerAd:function(){(WECHATGAME||QQPLAY)&&null!=this.banner&&(this.banner.show(),this.bannershowing=!0)},showInsertAd:function(){WECHATGAME&&this.interstitialad&&this.interstitialad.show()},hideBannerAd:function(){(WECHATGAME||QQPLAY)&&null!=this.banner&&(this.banner.hide(),this.bannershowing=!1)}};e.exports=a,cc._RF.pop()},{}],app:[function(t,e,i){"use strict";cc._RF.push(e,"44d30a3d1FHlbb1KZWSp6Au","app");var a=t("./manager/ui"),n=t("./manager/event"),s=t("./manager/audio"),o=t("./manager/request"),r=t("./manager/storage"),h=(t("./manager/subpackage"),t("./manager/time")),c=t("./manager/res"),l=t("./platform/ad"),d=t("./platform/launch"),p=(t("./platform/gameMgr"),t("./platform/share")),m=t("./data/userdata"),f=t("./data/gamedata"),g=t("./data/gametype"),u=t("./common/config"),y=t("./common/gameConfig"),v=t("./common/util"),w={init:function(t){var e=function(){c.load(),d.init(),s.init(),a.load(t),p.init()};if(WECHATGAME){var i=2;cc.loader.downloader.loadSubpackage("skeleton",function(t){if(t)return console.error(t);console.log("load subpackage skeleton successfully."),--i<=0&&e()}),cc.loader.downloader.loadSubpackage("audios",function(t){if(t)return console.error(t);console.log("load subpackage audios successfully."),--i<=0&&e()})}else e()},update:function(t){h.update(t),this.fixedUpdate.do(t)},share:p,launch:d,ad:l,ui:a,event:n,audio:s,request:o,res:c,time:h,userdata:m,gamedata:f,gametype:g,config:u,gameConfig:y,util:v,storage:r,fixedUpdate:{list:[],add:function(t,e,i){this.list.push({idx:t,func:e,field:i})},remove:function(t){for(var e=0;e<this.list.length;++e){if(this.list[e].idx==t){this.list.splice(t,1);break}}},do:function(t){0!=this.list.length&&this.list.forEach(function(e){"function"==typeof e.func&&e.func.call(e.field,t)})}}};e.exports=w,cc._RF.pop()},{"./common/config":"config","./common/gameConfig":"gameConfig","./common/util":"util","./data/gamedata":"gamedata","./data/gametype":"gametype","./data/userdata":"userdata","./manager/audio":"audio","./manager/event":"event","./manager/request":"request","./manager/res":"res","./manager/storage":"storage","./manager/subpackage":"subpackage","./manager/time":"time","./manager/ui":"ui","./platform/ad":"ad","./platform/gameMgr":"gameMgr","./platform/launch":"launch","./platform/share":"share"}],audio:[function(t,e,i){"use strict";cc._RF.push(e,"4447dZ0h+9OWaTj+wTlSPr7","audio");var a={},n={},s=t("../data/gametype"),o={musicOn:!0,init:function(){var t=cc.sys.localStorage.getItem("music");this.musicOn=""===t||null===t||1==t,WECHATGAME||QQPLAY||(this.musicOn=!1)},on:function(){this.musicOn=!this.musicOn,0==this.musicOn?this.stopBgm():this.playBgm(s.BgmType.start),cc.sys.localStorage.setItem("music",this.musicOn?1:0)},playEffect:function(t){if(this.musicOn)if(void 0==a[t]){if(""==t)return;cc.loader.loadRes("audios/"+t,function(e,i){a[t]=i,cc.audioEngine.playEffect(i,!1)})}else cc.audioEngine.playEffect(a[t],!1)},playBgm:function(t){this.musicOn&&(void 0==n[t]?cc.loader.loadRes("audios/"+t,function(e,i){e&&console.log(e),n[t]=i,cc.audioEngine.playMusic(i,!0)}):cc.audioEngine.playMusic(n[t],!0))},stopBgm:function(){cc.audioEngine.stopAll()}};e.exports=o,cc._RF.pop()},{"../data/gametype":"gametype"}],battle:[function(t,e,i){"use strict";cc._RF.push(e,"28ac0YUqPdPx6uLx07Sd1pZ","battle");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr"),o=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("battle onload"),this.gameState=o.GameState.Prepare,this.heroItemList=new Array,this.enemyItemList=new Array,this.heroFightIdx=0,this.monsterFightIdx=0,this.up=this.node.findChild("up"),this.mineHp=this.up.findChild("hpInfo/heroHp").getComponent("hpShow"),this.monsterHp=this.up.findChild("hpInfo/bossHp").getComponent("hpShow"),this.lvMonsterIdxTxt=this.up.findChild("hpInfo/index/text").getComponent(cc.Label);var t=this.up.findChild("battleInfo");this.heroBattleImg=t.findChild("heroBattleImg"),this.heroBattleImgWidth=620,this.mineBattleTxt=t.findChild("mineBattle").getComponent(cc.Label),this.monsterBattleTxt=t.findChild("bossBattle").getComponent(cc.Label),this.prepareBtnParent=this.node.findChild("prepare_btns"),this.backBtn=this.up.findChild("closeBtn"),this.fightBtn=this.prepareBtnParent.findChild("fight"),this.battleBtnParent=this.node.findChild("fight_btns"),this.defBtn=this.battleBtnParent.findChild("defBtn"),this.atkBtn=this.battleBtnParent.findChild("atkBtn"),this.characterContent=this.node.findChild("character"),this.heroContent=this.node.findChild("hero"),this.heroItemPool=new Array,this.heroItemPool.push(this.heroContent.findChild("0")),this.heroItemPool.push(this.heroContent.findChild("1")),this.heroItemPool[0].active=!1,this.heroItemPool[1].active=!1,this.enemyContent=this.node.findChild("enemy"),this.enemyItemPool=new Array,this.enemyItemPool.push(this.enemyContent.findChild("0")),this.enemyItemPool.push(this.enemyContent.findChild("1")),this.enemyItemPool[0].active=!1,this.enemyItemPool[1].active=!1,this.heroLocation={prepare:this.node.findChild("preparetion/hero"),fight:this.node.findChild("fighting/hero"),firstHand:new cc.v2(-202,160)},this.enemyLocation={prepare:this.node.findChild("preparetion/boss"),fight:this.node.findChild("fighting/boss"),firstHand:new cc.v2(202,160)},this.propertyInfo={hero_prepare:this.node.findChild("info/hero_prepare"),hero_fight:this.node.findChild("info/hero_fight"),enemy_prepare:this.node.findChild("info/enemy_prepare"),enemy_fight:this.node.findChild("info/enemy_fight")},this.monsterbattleStateNode=this.node.findChild("monsterState"),this.enemyStateItem=this.node.findChild("monsterState/item"),this.enemyStateList=new Array,this.enemyStatePool=new Array,this.enemyStatePool.push(this.enemyStateItem),this.heroBattleStateNode=this.node.findChild("heroState"),this.heroStateItem=this.node.findChild("heroState/item"),this.heroStateList=new Array,this.heroStatePool=new Array,this.heroStatePool.push(this.heroStateItem);var e=this.node.findChild("preparetion");this.fightSelectBtn=e.findChild("fight_select"),this.prepareSelectBtn=e.findChild("prepare_select"),this.prepare_arrow=e.findChild("prepare_arrow"),this.fight_arrow=e.findChild("fight_arrow"),this.arrowPos={fight:{x:this.fight_arrow.x,y:this.fight_arrow.y},prepare:{x:this.prepare_arrow.x,y:this.prepare_arrow.y}},this.countDownNode=this.node.findChild("countDown"),this.countDownAnima=this.countDownNode.findChild("321go").getComponent(sp.Skeleton),this.progressItem=this.node.findChild("progress/item"),this.progressItem.active=!1,this.progressItemList=new Array,this.progressItemList.push(this.progressItem),this.floatDamage=this.node.findChild("effectNode/damage"),this.floatDamageTxt=this.floatDamage.findChild("num").getComponent(cc.Label),this.preRoundAtkNode=this.node.findChild("effectNode/atk"),this.preRoundDefNode=this.node.findChild("effectNode/def"),this.preRoundAtkTxt=this.preRoundAtkNode.findChild("num").getComponent(cc.Label),this.preRoundDefTxt=this.preRoundDefNode.findChild("num").getComponent(cc.Label),this.monster_test_atk=this.node.findChild("testData/atk/num").getComponent(cc.Label),this.monster_test_def=this.node.findChild("testData/def/num").getComponent(cc.Label),this.mineInfo=this.up.findChild("mineInfo"),this.enemyInfo=this.up.findChild("enemyInfo"),this.firstHandArrow=this.node.findChild("effectNode/firstHand"),this.register(),this.resize(),console.log("onload finish")},register:function(){this.atkBtn.on("touchstart",this.onAtk,this),this.defBtn.on("touchstart",this.onDef,this),this.backBtn.on("click",this.onClose,this),this.fightBtn.on("click",this.onFight,this),this.fightSelectBtn.on("click",this.onClickFightSelect,this),this.prepareSelectBtn.on("click",this.onClickPrepareSelect,this),n.event.on(o.eventType.SelectHeroChange,this.initHero,this),n.event.on(o.eventType.RoundFinish,this.roundFinish,this),n.event.on(o.eventType.RoundBLoodFLoat,this.showDamageBlood,this),n.event.on(o.eventType.CharacterDead,this.characterDead,this)},resize:function(){var t=cc.director.getWinSizeInPixels();this.offsetY=(1600-t.height)/2,this.up.y-=this.offsetY,this.enemyStateItem.parent.y-=this.offsetY,this.heroStateItem.parent.y-=this.offsetY},initMonster:function(){this.enemyItemPool=new Array,this.enemyItemPool.push(this.node.findChild("enemy/0")),this.enemyItemPool.push(this.node.findChild("enemy/1")),this.propertyInfo.enemy_fight.active=!1,this.propertyInfo.enemy_prepare.active=!1,this.monsterList=new Array,this.lvMonsterList=new Array;var t=n.gameConfig.findLevelCfg(n.gamedata.masterData.lvIdx);if(null!=t){for(var e=t.monster.split("|"),i=0;i<e.length;i++)this.monsterList.push(e[i]);this.fightMonster=this.enemyItemPool.pop(),this.fightMonster.active=!0,this.fightMonster.color=new cc.Color(255,255,255),this.fightMonster.scaleX=1,this.fightMonster.scaleY=1,this.fightMonsterCom=this.fightMonster.getComponent("character"),this.fightMonsterCom.init(o.RoleType.Monster,this.monsterList[0]),this.fightMonster.x=this.enemyLocation.fight.position.x,this.fightMonster.y=this.enemyLocation.fight.position.y,this.showProperty(this.propertyInfo.enemy_fight,this.fightMonsterCom.getCharacterproperty(),o.RoleType.Monster),this.fightMonsterCfg=this.fightMonsterCom.getCharacterConfig(),this.monsterList.length>1?(this.prepareMonster=this.enemyItemPool.pop(),this.prepareMonster.color=new cc.Color(122,122,122),this.prepareMonster.scaleX=.8,this.prepareMonster.scaleY=.8,this.prepareMonster.active=!0,this.prepareMonsterCom=this.prepareMonster.getComponent("character"),this.prepareMonsterCom.init(o.RoleType.Monster,this.monsterList[1]),this.prepareMonster.x=this.enemyLocation.prepare.position.x,this.prepareMonster.y=this.enemyLocation.prepare.position.y,this.showProperty(this.propertyInfo.enemy_prepare,this.prepareMonsterCom.getCharacterproperty(),o.RoleType.Monster)):(this.prepareMonster=null,this.propertyInfo.enemy_prepare.active=!1),this.monsterHp.init(this.fightMonsterCom.hp),this.updatePowerInfo()}else n.ui.showFloatTip("\u6682\u672a\u5f00\u542f\u7684\u5173\u5361")},initMonsterFighting:function(){this.lvMonsterList=new Array,this.fightMonsterIdx=0;for(var t=0;t<this.monsterList.length;t++){var e=null;if(this.enemyStatePool.length>0?e=this.enemyStatePool.pop():(e=cc.instantiate(this.enemyStateItem)).parent=this.enemyStateItem.parent,this.enemyStateList.push(e),e.active=!0,t>1)return;var i=n.gameConfig.fingMonsterCfg(this.monsterList[t]),a=null;0==t&&(a=this.fightMonsterCom),1==t&&(a=this.prepareMonsterCom),this.lvMonsterList.push({id:this.monsterList[t],hp:a.hp,hpMax:i.hpMax,atk:a.atk,def:a.def,sp:a.sp,isDead:!1})}this.updateMonsterFighting()},initHeroFighting:function(){this.recycleHeroFighting();for(var t=0;t<n.gamedata.seleHeroList.length;t++){var e=null;-1!=n.gamedata.seleHeroList[t]&&(this.heroStatePool.length>0?e=this.heroStatePool.pop():(e=cc.instantiate(this.heroStateItem)).parent=this.heroBattleStateNode,this.heroStateList.push(e),e.active=!0)}},recycleHeroFighting:function(){for(var t=0;t<this.heroStateList.length;t++){var e=this.heroStateList[t];e.active=!1,this.heroStatePool.push(e)}this.heroStateList=new Array},recycleMonsterFighting:function(){for(var t=0;t<this.enemyStateList.length;t++){var e=this.enemyStateList[t];this.enemyStatePool.push(e),e.active=!1}this.enemyStateList=new Array},initHero:function(){if(s.checkSelectHeroLegal(),this.heroItemPool=new Array,this.heroItemPool.push(this.node.findChild("hero/0")),this.heroItemPool.push(this.node.findChild("hero/1")),this.heroItemPool[0].active=!1,this.heroItemPool[1].active=!1,this.fight_arrow.x=this.arrowPos.fight.x,this.fight_arrow.y=this.arrowPos.fight.y,this.prepare_arrow.x=this.arrowPos.prepare.x,this.prepare_arrow.y=this.arrowPos.prepare.y,this.fightSelectBtn.active=!0,this.prepareSelectBtn.active=!0,this.fight_arrow.stopAllActions(),this.prepare_arrow.stopAllActions(),this.fightHero=null,this.fightHeroIdx=0,this.prepareHero=null,this.heroList=new Array,-1!=n.gamedata.seleHeroList[0]){var t=n.gamedata.seleHeroList[0];null==s.findHero(t)?(this.fight_arrow.active=!0,this.fight_arrow.runAction(this.getArrowAction()),this.propertyInfo.hero_fight.active=!1):(this.fight_arrow.active=!1,this.fightHero=this.heroItemPool.pop(),this.fightHero.active=!0,this.fightHero.color=new cc.Color(255,255,255),this.fightHero.scaleX=1,this.fightHero.scaleY=1,this.fightHeroCom=this.fightHero.getComponent("character"),this.fightHeroCom.init(o.RoleType.Hero,n.gamedata.seleHeroList[0]),this.fightHeroCfg=this.fightHeroCom.getCharacterConfig(),this.fightHeroIdx=0,this.heroList.push({uid:n.gamedata.seleHeroList[0],hp:this.fightHeroCom.hp,hpMax:this.fightHeroCom.hp,atk:this.fightHeroCom.atk,def:this.fightHeroCom.def,sp:this.fightHeroCom.sp}),this.fightHero.x=this.heroLocation.fight.position.x,this.fightHero.y=this.heroLocation.fight.position.y,this.showProperty(this.propertyInfo.hero_fight,this.fightHeroCom.getCharacterproperty(),o.RoleType.Hero))}else this.fight_arrow.active=!0,this.fight_arrow.runAction(this.getArrowAction()),this.propertyInfo.hero_fight.active=!1;if(-1!=n.gamedata.seleHeroList[1]){t=n.gamedata.seleHeroList[1];null==s.findHero(t)?(this.prepare_arrow.active=!0,this.prepare_arrow.runAction(this.getArrowAction()),this.propertyInfo.hero_prepare.active=!1):(this.prepare_arrow.active=!1,this.prepareHero=this.heroItemPool.pop(),this.prepareHero.active=!0,this.prepareHero.color=new cc.Color(122,122,122),this.prepareHero.scaleX=.8,this.prepareHero.scaleY=.8,this.prepareHeroCom=this.prepareHero.getComponent("character"),this.prepareHeroCom.init(o.RoleType.Hero,n.gamedata.seleHeroList[1]),this.heroList.push({uid:n.gamedata.seleHeroList[1],hp:this.prepareHeroCom.hp,hpMax:this.prepareHeroCom.hp,atk:this.prepareHeroCom.atk,def:this.prepareHeroCom.def,sp:this.prepareHeroCom.sp}),this.prepareHero.x=this.heroLocation.prepare.position.x,this.prepareHero.y=this.heroLocation.prepare.position.y,this.showProperty(this.propertyInfo.hero_prepare,this.prepareHeroCom.getCharacterproperty(),o.RoleType.Hero))}else this.prepare_arrow.active=!0,this.propertyInfo.hero_prepare.active=!1,this.prepare_arrow.runAction(this.getArrowAction());this.updatePowerInfo(),this.initHeroFighting(),null!=this.fightHero&&1==this.fightHero.active?this.mineHp.init(this.fightHeroCom.hp):null!=this.prepareHero&&1==this.prepareHero.active?this.mineHp.init(this.prepareHeroCom.hp):this.mineHp.init(0)},showProperty:function(t,e,i){if(t.active=!0,t.findChild("hp").getComponent(cc.Label).string=e.hp,t.findChild("atk").getComponent(cc.Label).string=e.atk,t.findChild("def").getComponent(cc.Label).string=e.def,t.findChild("sp").getComponent(cc.Label).string=e.sp,i==o.RoleType.Hero){var a=new cc.color(146,255,73);0==n.gamedata.masterData.selectBuff?t.findChild("sp").color=a:t.findChild("sp").color=new cc.Color(0,0,0),2==n.gamedata.masterData.selectBuff?t.findChild("hp").color=a:t.findChild("hp").color=new cc.Color(0,0,0),3==n.gamedata.masterData.selectBuff?t.findChild("def").color=a:t.findChild("def").color=new cc.Color(0,0,0),5==n.gamedata.masterData.selectBuff?t.findChild("atk").color=a:t.findChild("atk").color=new cc.Color(0,0,0)}if(i==o.RoleType.Monster){var s=new cc.color(99,254,67);1==n.gamedata.masterData.selectBuff?t.findChild("sp").color=s:t.findChild("sp").color=new cc.Color(0,0,0),4==n.gamedata.masterData.selectBuff?t.findChild("def").color=s:t.findChild("def").color=new cc.Color(0,0,0),6==n.gamedata.masterData.selectBuff?t.findChild("atk").color=s:t.findChild("atk").color=new cc.Color(0,0,0)}},onShow:function(){this.floatDamage.active=!1,this.fight_arrow.active=!0,this.prepare_arrow.active=!0,this.gameState=o.GameState.Prepare,this.prepareBtnParent.active=!0,this.battleBtnParent.active=!1,this.countDownNode.active=!1,this.enemyInfo.active=!1,this.firstHandArrow.active=!1;for(var t=0;t<this.progressItemList.length;t++)this.progressItemList[t].active=!1;this.initMonster(),this.initMonsterFighting(),this.initHero(),this.updateMonsterProcessInfo(),this.refreshPersonInfo(),this.up.findChild("hpInfo").active=!1,this.up.findChild("battleInfo").active=!0,n.audio.playBgm(n.gametype.BgmType.fight)},refreshPersonInfo:function(){if(this.mineInfo.findChild("name").getComponent(cc.Label).string=n.userdata.nickname,""!=n.userdata.icon&&n.util.createIcon(this.mineInfo.findChild("head").getComponent(cc.Sprite),n.userdata.icon),this.mineInfo.findChild("lv").getComponent(cc.Label).string=n.gamedata.masterData.lv+1,-1==n.gamedata.masterData.selectBuff)this.mineInfo.findChild("buff/mask/icon").active=!1,this.mineInfo.findChild("buff/content").getComponent(cc.Label).string="\u65e0";else{var t=this.mineInfo.findChild("buff/mask/icon");switch(t.active=!0,t.getComponent(cc.Sprite).spriteFrame=n.res.buffSprite[n.gamedata.masterData.selectBuff],n.gamedata.masterData.selectBuff){case 0:case 1:this.mineInfo.findChild("buff").color=new cc.Color(116,201,255);break;case 2:this.mineInfo.findChild("buff").color=new cc.Color(255,114,158);break;case 3:case 4:this.mineInfo.findChild("buff").color=new cc.Color(144,255,113);break;case 5:case 6:this.mineInfo.findChild("buff").color=new cc.Color(185,122,248)}}},updatePowerInfo:function(){for(var t=0,e=0;e<this.monsterList.length;e++){var i=n.gameConfig.fingMonsterCfg(this.monsterList[e]);t+=parseInt(i.atk)}var a=0;for(e=0;e<n.gamedata.seleHeroList.length;e++){var o=s.findHero(n.gamedata.seleHeroList[e]);if(null!=o){var r=n.gameConfig.getHero(o.id,o.star);a+=parseInt(r.atk)}}var h=a+t;this.mineBattleTxt.string=a,this.monsterBattleTxt.string=t;var c=this.heroBattleImgWidth*a/h;c<=130&&(c=130),c>=520&&(c=520),this.heroBattleImg.width=c},showFirstHand:function(t){this.firstHandArrow.active=!0,t==o.RoleType.Hero?this.firstHandArrow.setPosition(this.heroLocation.firstHand):this.firstHandArrow.setPosition(this.enemyLocation.firstHand),this.firstHandArrow.stopAllActions(),this.firstHandArrow.runAction(a.getQuickFloatAnima())},updateMonsterFighting:function(){for(var t=0;t<this.monsterList.length;t++){var e=n.gameConfig.fingMonsterCfg(this.monsterList[t]),i=this.enemyStateList[t];0==e.boss&&(i.getComponent(cc.Sprite).spriteFrame=n.res.enemySprite),1==e.boss&&(i.getComponent(cc.Sprite).spriteFrame=n.res.bossSprite),this.gameState==o.GameState.Prepare?i.findChild("state").active=!1:(i.findChild("state").active=!0,this.fightMonsterIdx==t?i.findChild("state").getComponent(cc.Sprite).spriteFrame=n.res.fightStateSprite:this.fightMonsterIdx>t?i.findChild("state").getComponent(cc.Sprite).spriteFrame=n.res.deadStateSprite:i.findChild("state").active=!1),i.active=!0}},updateHeroFighting:function(){for(var t=0;t<n.gamedata.seleHeroList.length;t++)if(-1!=n.gamedata.seleHeroList[t]){var e=this.heroStateList[0];this.fightHeroIdx==t?e.findChild("state").getComponent(cc.Sprite).spriteFrame=n.res.fightStateSprite:this.fightHeroIdx>t?e.findChild("state").getComponent(cc.Sprite).spriteFrame=n.res.deadStateSprite:e.findChild("state").active=!1}},updateMonsterProcessInfo:function(){for(var t=0;t<this.lvMonsterList.length;t++)if(0==this.lvMonsterList[t].isDead)return void(this.lvMonsterIdxTxt.string=t+1+"/"+this.lvMonsterList.length)},onClickFightSelect:function(){this.gameState==o.GameState.Prepare&&(n.audio.playEffect(n.gametype.SoundType.click),n.ui.show("selectHero",0))},onClickPrepareSelect:function(){this.gameState==o.GameState.Prepare&&(n.audio.playEffect(n.gametype.SoundType.click),n.ui.show("selectHero",1))},onClose:function(){n.audio.playEffect(n.gametype.SoundType.click),n.ui.hide("battle"),n.ui.show("menu"),n.ui.show("info")},onFight:function(){n.audio.playEffect(n.gametype.SoundType.click),console.log("\u5f00\u6218\u5566"),-1!=n.gamedata.seleHeroList[0]||-1!=n.gamedata.seleHeroList[1]?(this.up.findChild("hpInfo").active=!0,this.up.findChild("battleInfo").active=!1,this.prepareBtnParent.active=!1,this.propertyInfo.hero_prepare.active=!1,this.propertyInfo.hero_fight.active=!1,this.propertyInfo.enemy_prepare.active=!1,this.propertyInfo.enemy_fight.active=!1,this.fight_arrow.active=!1,this.prepare_arrow.active=!1,void 0!==this.fightHeroCom&&this.fightHeroCom.resetToIdle(),this.fightMonsterCom.resetToIdle(),this.countDownNode.active=!0,this.countDownAnima.setToSetupPose(),this.countDownAnima.setAnimation(0,"321go",!1),this.battleBtnParent.active=!0,this.atkBtn.active=!0,this.defBtn.active=!0,this.atkBtn.getComponent(cc.Button).interactable=!1,this.defBtn.getComponent(cc.Button).interactable=!1,"undefined"!=typeof fightHeroCom&&(this.fightHeroCfg=this.fightHeroCom.getCharacterConfig(),this.initHeroOperate()),n.audio.playEffect(o.SoundType.countdown),this.schedule(this.playCountDownAudio,1),this.countdownTime=3):n.ui.showFloatTip("\u81f3\u5c11\u4e0a\u9635\u4e00\u4e2a\u82f1\u96c4~")},playCountDownAudio:function(){if(console.log(this.countdownTime),this.countdownTime--,this.countdownTime>0&&n.audio.playEffect(o.SoundType.countdown),0==this.countdownTime&&n.audio.playEffect(o.SoundType.go),this.countdownTime<0)if(this.unschedule(this.playCountDownAudio),this.countDownNode.active=!1,-1==n.gamedata.seleHeroList[0]){this.heroList.splice(0,0,{uid:-1,hp:0,hpMax:0}),this.fightHeroIdx=1,this.fightHero=this.prepareHero,this.fightHeroCom=this.prepareHeroCom,this.fightHeroCfg=this.fightHeroCom.getCharacterConfig(),this.fightHero.color=new cc.Color(255,255,255),this.fightHeroCom.playRun(this.fightHeroCom.sp),this.mineHp.init(this.fightHeroCom.hp),this.fightHero.stopAllActions(),this.fightHero.runAction(cc.spawn(cc.moveTo(.5,this.heroLocation.fight.x,this.heroLocation.fight.y),cc.scaleTo(.5,1,1),cc.callFunc(function(){this.scheduleOnce(function(){this.initHeroOperate(),this.startOperateModel(),this.fightHeroCom.resetToIdle(),this.updateMonsterFighting(),this.updateHeroFighting()},.7)}.bind(this))))}else this.initHeroOperate(),this.startOperateModel(),this.updateMonsterFighting(),this.updateHeroFighting()},startOperateModel:function(){this.gameState=o.GameState.Opearte,this.atkBtn.getComponent(cc.Button).interactable=!0,this.defBtn.getComponent(cc.Button).interactable=!0,this.fightSelectBtn.active=!1,this.prepareSelectBtn.active=!1,this.preRoundAtkNode.active=!1,this.preRoundDefNode.active=!1;for(var t=0;t<this.operateList.length;t++)this.operateList[t].initShow();this.fightHeroCom.getSp()>this.fightMonsterCom.getSp()?this.showFirstHand(o.RoleType.Hero):this.showFirstHand(o.RoleType.Monster),this.operateList[0].on()},onAtk:function(){for(var t=0;t<this.operateList.length;t++)this.operateList[t].off({isAtk:!0})},onDef:function(){for(var t=0;t<this.operateList.length;t++)this.operateList[t].off({isAtk:!1})},operateCallback:function(t,e,i){if(console.log("idx:"+t+"|value:"+e+"|mul:"+i),t=parseInt(t),this.operateData[t].value=e,this.operateData[t].mul=i,t+1<this.operateList.length)t++,this.scheduleOnce(function(){this.operateList[t].on()}.bind(this),.3);else{for(var a=0;a<this.operateList.length;a++)this.operateList[a].playEnd();this.scheduleOnce(this.preRoundInfoShow,.5)}},preRoundInfoShow:function(){this.heroProperty=this.getRoundFightHeroAtkAndDef(),this.heroProperty.atk<=0&&this.heroProperty.def>=0?this.startBattleModel():(this.heroProperty.atk>0?(this.preRoundAtkNode.active=!0,this.preRoundAtkTxt.string=this.heroProperty.atk,this.preRoundAtkNode.scaleX=1,this.preRoundAtkNode.scaleY=1,this.preRoundAtkNode.runAction(cc.scaleTo(.25,1.5))):this.preRoundAtkNode.active=!1,this.heroProperty.def<0?(this.preRoundDefNode.active=!0,this.preRoundDefTxt.string=-this.heroProperty.def,this.preRoundDefNode.scaleX=1,this.preRoundDefNode.scaleY=1,this.preRoundDefNode.runAction(cc.scaleTo(.25,1.5))):this.preRoundDefNode.active=!1,this.scheduleOnce(this.startBattleModel,.7))},startBattleModel:function(){this.preRoundAtkNode.active=!1,this.preRoundDefNode.active=!1,this.atkBtn.getComponent(cc.Button).interactable=!1,this.defBtn.getComponent(cc.Button).interactable=!1,this.heroProperty=this.getRoundFightHeroAtkAndDef(),this.monsterProperty=this.getRoundMonsterFightAtkAndDef(),this.monster_test_atk.string=this.monsterProperty.atk,this.monster_test_def.string=this.monsterProperty.def,this.offenceRound()},offenceRound:function(){this.firstHandArrow.active=!1,this.gameState=o.GameState.Offensive,this.fightHeroCom.getSp()>this.fightMonsterCom.getSp()?(this.fightHeroCom.isOffence=!0,this.fightHero.parent=this.characterContent,this.heroProperty.atk>0?(this.fightHeroCom.playAtk(this.heroProperty.mul),this.fightMonsterCom.checkCanBear(this.heroProperty.atk,-this.monsterProperty.def)?this.monsterProperty.def<0?this.fightMonsterCom.playDef(this.heroProperty.atk,-this.monsterProperty.def):this.fightMonsterCom.playHit(this.heroProperty.atk):(this.fightHeroCom.playAtk(this.heroProperty.mul),this.fightMonsterCom.playDead(this.heroProperty.atk,-this.monsterProperty.def))):this.heroProperty.def<0?this.roundFinish():this.fightHeroCom.playFail()):(this.fightHeroCom.isOffence=!1,this.fightMonster.parent=this.characterContent,this.monsterProperty.atk>0?(this.fightMonsterCom.playAtk(),this.fightHeroCom.checkCanBear(this.monsterProperty.atk,-this.heroProperty.def)?this.heroProperty.def<0?this.fightHeroCom.playDef(this.monsterProperty.atk,-this.heroProperty.def):this.fightHeroCom.playHit(this.monsterProperty.atk):(this.fightMonsterCom.playAtk(),this.fightHeroCom.playDead(this.monsterProperty.atk,-this.heroProperty.def))):this.monsterProperty.def<0?this.roundFinish():this.fightMonsterCom.playFail())},defenceRound:function(){this.fightHeroCom.isDead||this.fightMonsterCom.isDead||(this.fightHeroCom.resetToIdle(),this.fightMonsterCom.resetToIdle(),0==this.fightHeroCom.isOffence?(this.fightHero.parent=this.characterContent,this.heroProperty.atk>0?(this.fightHeroCom.playAtk(this.heroProperty.mul),this.fightMonsterCom.checkCanBear(this.heroProperty.atk,-this.monsterProperty.def)?this.monsterProperty.def<0?this.fightMonsterCom.playDef(this.heroProperty.atk,-this.monsterProperty.def):this.fightMonsterCom.playHit(this.heroProperty.atk):this.fightMonsterCom.playDead(this.heroProperty.atk,-this.monsterProperty.def)):this.heroProperty.def<0?this.roundFinish():this.fightHeroCom.playFail()):(this.fightMonster.parent=this.characterContent,this.monsterProperty.atk>0?(this.fightMonsterCom.playAtk(),this.fightHeroCom.checkCanBear(this.monsterProperty.atk,-this.heroProperty.def)?this.heroProperty.def<0?this.fightHeroCom.playDef(this.monsterProperty.atk,-this.heroProperty.def):this.fightHeroCom.playHit(this.monsterProperty.atk):this.fightHeroCom.playDead(this.monsterProperty.atk,-this.heroProperty.def)):this.monsterProperty.def<0?this.roundFinish():this.fightMonsterCom.playFail()))},roundFinish:function(){switch(console.log("\u56de\u5408\u7ed3\u675f"),this.fightHero.parent=this.heroContent,this.fightMonster.parent=this.enemyContent,this.gameState){case o.GameState.Offensive:if(!this.checkResult())return;this.gameState=o.GameState.Defensive,this.scheduleOnce(function(){this.defenceRound()},.5);break;case o.GameState.Defensive:if(!this.checkResult())return;this.scheduleOnce(function(){this.startOperateModel()},.5)}},initHeroOperate:function(){for(var t=0;t<this.progressItemList.length;t++)this.progressItemList[t].active=!1;this.operateList=new Array,this.operateData=new Array;for(t=0;t<this.fightHeroCfg.operateNum;t++){var e=this.progressItemList[t];void 0===e&&((e=cc.instantiate(this.progressItem)).parent=this.progressItem.parent,this.progressItemList.push(e)),e.active=!0,this.operateList.push(e.getComponent("circleProgress")),this.operateData.push({value:0,mul:0}),this.operateList[t].init(t,this.fightHeroCfg,this.operateCallback.bind(this)),this.operateList[t].idle()}},checkResult:function(){return this.heroList[this.fightHeroIdx].hp<=0?(console.log("hero dead gameover"),s.heroDead(n.gamedata.seleHeroList[this.fightHeroIdx]),this.fightHeroIdx++,this.fightHeroIdx>=2||-1==n.gamedata.seleHeroList[this.fightHeroIdx]?(this.gameState=o.GameState.Win,this.scheduleOnce(function(){n.ui.show("result",{isWin:!1})},.5),!1):(this.fightHero.active=!1,this.heroItemPool.push(this.fightHero),this.updateHeroFighting(),this.fightHero=this.prepareHero,this.fightHeroCom=this.prepareHeroCom,this.fightHeroCfg=this.fightHeroCom.getCharacterConfig(),this.fightHero.color=new cc.Color(255,255,255),this.mineHp.init(this.fightHeroCom.hp),this.fightHero.stopAllActions(),this.fightHero.runAction(cc.spawn(cc.moveTo(.5,this.heroLocation.fight.x,this.heroLocation.fight.y),cc.scaleTo(.5,1,1),cc.callFunc(function(){this.scheduleOnce(function(){this.fightHeroCom.resetToIdle(),this.startOperateModel()},.7)}.bind(this)))),this.fightHeroCom.playRun(),this.initHeroOperate(),!1)):!(this.lvMonsterList[this.fightMonsterIdx].hp<=0)||(this.fightMonsterIdx++,this.fightMonsterIdx>=this.lvMonsterList.length?(this.gameState=o.GameState.Win,console.log("all monster dead!Gameover"),this.scheduleOnce(function(){n.ui.show("result",{isWin:!0})},.5),!1):(this.updateMonsterFighting(),this.updateMonsterProcessInfo(),this.fightMonster.active=!1,this.enemyItemPool.push(this.fightMonster),this.fightMonster=this.prepareMonster,this.fightMonsterCom=this.prepareMonsterCom,this.fightMonsterCfg=this.fightMonsterCom.getCharacterConfig(),this.fightMonster.color=new cc.Color(255,255,255),this.fightMonster.stopAllActions(),this.fightMonster.runAction(cc.spawn(cc.moveTo(.5,this.enemyLocation.fight.x,this.enemyLocation.fight.y),cc.scaleTo(.5,1,1),cc.callFunc(function(){this.scheduleOnce(function(){this.fightMonsterCom.resetToIdle(),this.fightMonsterIdx+1<this.lvMonsterList.length&&(this.prepareMonster=this.enemyItemPool.pop(),this.prepareMonster.active=!0,this.prepareMonster.x=this.enemyLocation.prepare.x,this.prepareMonster.y=this.enemyLocation.prepare.y,this.prepareMonster.scaleX=.8,this.prepareMonster.scaleY=.8,this.prepareMonster.color=new cc.Color(122,122,122),this.prepareMonsterCom=this.prepareMonster.getComponent("character"),this.prepareMonsterCom.init(o.RoleType.Monster,this.lvMonsterList[this.fightMonsterIdx+1].id),this.prepareMonsterCom.resetToIdle()),this.startOperateModel()},1)}.bind(this),1))),this.fightMonsterCom.playRun(),this.monsterHp.init(this.fightMonsterCfg.hp),!1))},getRoundFightHeroAtkAndDef:function(){for(var t=0,e=0,i=0,a=!0,s=0;s<this.operateData.length;s++)this.operateData[s].value>0&&(t+=parseInt(this.operateData[s].value),this.operateData[s].mul>i&&(i=this.operateData[s].mul),3!=this.operateData[s].mul&&(a=!1)),this.operateData[s].value<0&&(e+=-parseInt(this.operateData[s].value),this.operateList[s].mul>i&&(i=this.operateData[s].mul),3!=this.operateData[s].mul&&(a=!1));if(a&&this.operateData.length>1){i=4;var o=parseInt(this.heroList[this.fightHeroIdx].atk/this.fightHeroCfg.operateNum),r=parseInt(this.heroList[this.fightHeroIdx].def/this.fightHeroCfg.operateNum);t=0,e=0;for(s=0;s<this.operateData.length;s++)this.operateData[s].value>0&&(this.operateData[s].value=parseInt(o*n.gameConfig.battleAddition[3]),t+=this.operateData[s].value),this.operateData[s].value<0&&(this.operateData[s].value=-parseInt(r*n.gameConfig.battleAddition[3]),e+=this.operateData[s].value)}return e>0&&(e=-e),{atk:t,def:e,mul:i}},getRoundMonsterFightAtkAndDef:function(){var t=this.lvMonsterList[this.fightMonsterIdx].atk,e=this.lvMonsterList[this.fightMonsterIdx].def;if(1==this.fightMonsterCfg.grade){var i=Math.random()>.3;t=parseInt((.65*Math.random()+.85)*t),e=parseInt((.65*Math.random()+.85)*t);return i?{atk:t,def:0}:{atk:0,def:-e}}for(var a=0,s=0,o=.5,r=0;r<this.fightMonsterCfg.grade;r++)o=.5,this.fightHeroCom.getSp()==n.gamedata.maxSpeed&&(o=.4),this.fightMonsterCom.getHpRate()<=.2&&(o=.3),0==this.heroProperty.def&&1==this.operateList.length&&(o=1),Math.random()<o?a+=parseInt(.5*(.65*Math.random()+.85)*t):s+=parseInt(.5*(.65*Math.random()+.85)*t);return s>0&&(s=-s),{atk:a,def:s}},showDamageBlood:function(t){var e=null,i=null;t.type==o.RoleType.Monster&&(e=this.lvMonsterList[this.fightMonsterIdx],i=this.monsterHp),t.type==o.RoleType.Hero&&(e=this.heroList[this.fightHeroIdx],i=this.mineHp),console.log("\u53d7\u5230\u4f24\u5bb3:"+t.damage),e.hp-=parseInt(t.damage),this.playFloatDamageLabel(t.type,t.damage),e.hp<=0&&(e.hp=0),console.log("rolehp:"+e.hp),i.setHp(e.hp)},playFloatDamageLabel:function(t,e){this.floatDamage.stopAllActions(),this.floatDamage.active=!0,e=Math.abs(e),this.floatDamageTxt.string=e,this.floatDamage.scaleX=1,this.floatDamage.scaleY=1,this.floatDamage.opacity=255,t==o.RoleType.Hero?(this.floatDamage.x=this.heroLocation.fight.x,this.floatDamage.y=this.heroLocation.fight.y+200):(this.floatDamage.x=this.enemyLocation.fight.x,this.floatDamage.y=this.enemyLocation.fight.y+200);var i=cc.spawn(cc.moveBy(.1,0,20),cc.scaleTo(.1,1.5,1.5),cc.fadeOut(1));this.floatDamage.runAction(i)},characterDead:function(t){console.log("charatacdead"),this.playFloatDamageLabel(t.roleType,t.damage),t.roleType==o.RoleType.Hero&&(this.heroList[this.fightHeroIdx].hp=0,this.mineHp.setHp(0)),t.roleType==o.RoleType.Monster&&(this.lvMonsterList[this.fightMonsterIdx].hp=0,this.monsterHp.setHp(0))},onHide:function(){if(this.gameState!=o.GameState.Prepare&&this.gameState!=o.GameState.Guide&&this.gameState!=o.GameState.Win&&this.gamedata!=o.GameState.Fail)for(var t=0;t<n.gamedata.seleHeroList.length;t++)-1!=n.gamedata.seleHeroList[t]&&s.heroDead(n.gamedata.seleHeroList[t]);this.gameState=o.GameState.Prepare;for(t=0;t<this.enemyItemList.length;t++){var e=this.enemyItemList[t];this.enemyItemPool.push(e),e.active=!1}this.enemyItemList=new Array,this.recycleHeroFighting(),this.recycleMonsterFighting(),this.fight_arrow.stopAllActions(),this.prepare_arrow.stopAllActions(),this.unscheduleAllCallbacks(),n.audio.stopBgm(n.gametype.BgmType.fight)},getArrowAction:function(){return cc.repeatForever(cc.sequence(cc.moveBy(.1,cc.v2(0,-10)),cc.moveBy(.1,cc.v2(0,10)),cc.moveBy(.1,cc.v2(0,10)),cc.moveBy(.1,cc.v2(0,-10))))}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],character:[function(t,e,i){"use strict";cc._RF.push(e,"911fac7EBtElKzkm8Vv94FI","character");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype"),o=0,r=1,h=2,c=5,l=6;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isInit=!0,this.uid=0,this.operateNum=0,this.hp=0,this.hpMax=0,this.atk=0,this.def=0,this.sp=0,this.isDead=!1,this.battleSp=0,this.isOffence=!1,this.roleType=s.RoleType.Default,this.roundDef=0,this.anima=this.node.getComponent(sp.Skeleton),this.anima.setCompleteListener(this.animationListener.bind(this))},init:function(t,e){if(this.isInit||this.onLoad(),this.isDead=!1,this.uid=e,this.roundDef=0,this.roleType=t,t==s.RoleType.Hero){var i=n.findHero(e),r=a.gameConfig.getHero(i.id,i.star);if(this.charactorCfg=r,this.hp=r.hp,this.hpMax=r.hp,this.atk=r.atk,this.def=r.def,this.sp=r.sp,this.operateNum=r.operateNum,this.anima.setSkin(r.outfit),-1!=a.gamedata.masterData.selectBuff){var h=a.gamedata.masterData.buffLv[a.gamedata.masterData.selectBuff]-1;switch(a.gamedata.masterData.selectBuff){case 0:var c=a.gameConfig.buff[0].sp*h/100;this.sp=parseInt((1+c)*this.sp);break;case 2:c=a.gameConfig.buff[0].hp*h/100;this.hp=parseInt((1+c)*this.hp);break;case 3:c=a.gameConfig.buff[0].def*h/100;this.def=parseInt((1+c)*this.def);break;case 5:c=a.gameConfig.buff[0].atk*h/100;this.atk=parseInt((1+c)*this.atk)}}}if(t==s.RoleType.Monster){var l=a.gameConfig.fingMonsterCfg(e);if(this.charactorCfg=l,this.hp=l.hp,this.def=l.def,this.atk=l.atk,this.sp=l.sp,this.hpMax=l.hp,-1!=a.gamedata.masterData.selectBuff){h=a.gamedata.masterData.buffLv[a.gamedata.masterData.selectBuff]-1;switch(a.gamedata.masterData.selectBuff){case 1:c=a.gameConfig.buff[0].slow*h/100;this.sp=parseInt((1-c)*this.sp);break;case 4:c=a.gameConfig.buff[0].dropDef*h/100;this.def=parseInt((1-c)*this.def);break;case 6:c=a.gameConfig.buff[0].dropAtk*h/100;this.atk=parseInt((1-c)*this.atk)}}this.operateNum=l.grade,this.anima.setSkin(l.outfit)}this.damage=0,this.realAtk=new Array,this.realDef=new Array,this.mulArray=new Array;for(var d=0;d<this.operateNum;d++)this.realAtk.push(0),this.realDef.push(0);this.nextState=o,this.animaName="",this.playIdle()},getCharacterConfig:function(){return this.charactorCfg},getCharacterproperty:function(){return{atk:this.atk,hp:this.hp,def:this.def,sp:this.sp}},animationListener:function(t){if(!this.isDead){var e=t.animation.name;"run"!=e&&(-1==e.indexOf("atk")&&"lost"!=e||a.event.emit(s.eventType.RoundFinish),this.playIdle())}},playIdle:function(){this.anima.setToSetupPose(),this.anima.setAnimation(0,"idle",!0)},resetToIdle:function(){this.anima.setToSetupPose(),this.anima.setAnimation(0,"idle",!0)},playAtk:function(t){if(this.animaName="",this.roleType==s.RoleType.Hero)switch(t){case 1:this.animaName="atk1";break;case 2:this.animaName="atk2";break;case 3:this.animaName="atk3";break;case 4:this.animaName="atk4"}if(this.roleType==s.RoleType.Monster)switch(this.animaName="atk1",parseInt(2*Math.random())){case 0:this.animaName="atk1";break;case 1:this.animaName="atk2"}this.nextState=r,this.anima.setAnimation(0,this.animaName,!1)},playHit:function(t){this.roleType==s.RoleType.Hero&&console.log("\u82f1\u96c4\u53d7\u51fb"),console.log("damage:"+t),this.animaName="hit",this.nextState=l,this.damage=t,this.anima.setToSetupPose(),this.anima.setAnimation(0,this.animaName,!0),this.scheduleOnce(this.playFloatDamage,.66),this.scheduleOnce(function(){a.audio.playEffect(a.gametype.SoundType.hit)},.66)},playDef:function(t,e){this.animaName="defense",this.nextState=h,this.damage=t-e,this.roundDef=e,this.damage<0&&(this.damage=0),console.log(t+"|"+e),this.anima.setToSetupPose(),this.anima.setAnimation(0,this.animaName,!0),this.scheduleOnce(this.playFloatDamage,.66),this.scheduleOnce(function(){a.audio.playEffect(a.gametype.SoundType.defend)},.66)},playDead:function(t,e){this.hp=0,this.isDead=!0,console.log("\u64ad\u653e\u6b7b\u4ea1\u52a8\u753b:"+e);(t-=e)<0&&(t=0);var i={roleType:this.roleType,damage:t,def:e};this.scheduleOnce(function(){console.log("\u53d1\u51fa\u6b7b\u4ea1\u4e8b\u4ef6"),a.event.emit(s.eventType.CharacterDead,i),a.audio.playEffect(a.gametype.SoundType.dead)},.66),this.anima.setToSetupPose(),this.anima.setAnimation(0,"die",!1)},playFail:function(){this.nextState=c,this.anima.setAnimation(0,"lost",!1)},playRun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.gamedata.maxSpeed;this.battleSp=t;var e="run";this.roleType==s.RoleType.Monster&&(e="idle"),console.log("animaName:"+e),this.anima.setToSetupPose(),this.anima.setAnimation(0,e,!0)},playFloatDamage:function(){this.hp=this.hp-this.damage;var t={hp:this.hp,damage:this.damage,def:this.roundDef,type:this.roleType};a.event.emit(s.eventType.RoundBLoodFLoat,t)},roundOver:function(){for(var t=0;t<this.realAtk.length;t++)this.realAtk[t]=0;for(t=0;t<this.realDef.length;t++)this.realDef[t]=0},checkCanBear:function(t,e){return t-=e,this.roundDef=e,t<0&&(t=0),this.hp>t},getSp:function(){if(this.battleSp>0){var t=this.battleSp;return this.battleSp=0,t}return this.sp},getAtk:function(){return this.atk},getDef:function(){return this.def},getHp:function(){return this.hp},getHpRate:function(){return this.hp/this.hpMax}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],chestUp:[function(t,e,i){"use strict";cc._RF.push(e,"4ed17AgJkxN2qd/Y/i5I60y","chestUp");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.tweenContent.findChild("close"),this.upgradeBtn=this.tweenContent.findChild("upgrade"),this.lvTxt=this.tweenContent.findChild("tip/lv").getComponent(cc.Label),this.upgradePrice=this.tweenContent.findChild("upgrade/price").getComponent(cc.Label),this.lvItemPre=this.tweenContent.findChild("panel/lv/pre").getComponent(cc.Label),this.lvItemNext=this.tweenContent.findChild("panel/lv/next").getComponent(cc.Label),this.spItemPre=this.tweenContent.findChild("panel/rate/pre").getComponent(cc.Label),this.spItemNext=this.tweenContent.findChild("panel/rate/next").getComponent(cc.Label),this.maxItemPre=this.tweenContent.findChild("panel/max/pre").getComponent(cc.Label),this.maxItemNext=this.tweenContent.findChild("panel/max/next").getComponent(cc.Label),this.register()},register:function(){this.closeBtn.on("click",this.onClose,this),this.upgradeBtn.on("click",this.onUpgrade,this),a.event.on(s.eventType.ChestUp,this.refreshInfo,this)},onShow:function(){this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start(),this.refreshInfo()},refreshInfo:function(){this.lvTxt.string="\u7b49\u7ea7:"+(a.gamedata.chestData.lv+1);var t=a.gameConfig.chest.length;if(console.log(t),console.log(a.gamedata.chestData.lv),a.gamedata.chestData.lv>=t-1)return this.lvItemNext.string="max",this.spItemNext.string="max",this.maxItemNext.string="max",this.upgradeBtn.getComponent(cc.Button).interactable=!1,void(this.upgradePrice.string="max");this.lvItemPre.string=a.gamedata.chestData.lv+1;var e=parseFloat(a.gameConfig.chest[a.gamedata.chestData.lv].rate/5);this.spItemPre.string=e+"/\u79d2",this.maxItemPre.string=a.gameConfig.chest[a.gamedata.chestData.lv].max,this.upgradeBtn.getComponent(cc.Button).interactable=!0;var i=a.gameConfig.chest[a.gamedata.chestData.lv].cost;this.upgradePrice.string=i,a.gamedata.masterData.gold>=i?this.upgradePrice.node.color=new cc.Color(255,255,255):this.upgradePrice.node.color=new cc.color(255,0,0),this.lvItemNext.string=a.gamedata.chestData.lv+2;var n=parseFloat(a.gameConfig.chest[a.gamedata.chestData.lv+1].rate/5);this.spItemNext.string=n+"/\u79d2",this.maxItemNext.string=a.gameConfig.chest[a.gamedata.chestData.lv+1].max},onClose:function(){a.audio.playEffect(a.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.1,{scaleX:.5,scaleY:.5}).call(function(){a.ui.hide("chestUp")}).start()},onUpgrade:function(){n.chestUpgrade()}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],circleProgress:[function(t,e,i){"use strict";cc._RF.push(e,"b9c58t5t95ATL4k/J/C/NaL","circleProgress");t("../common/util");var a=t("../app"),n=(t("../platform/gameMgr"),t("../data/gametype"));cc.Class({extends:cc.Component,properties:{isInit:!1},onLoad:function(){this.isInit=!0,this.process=this.node.findChild("process"),this.process_triple=this.process.findChild("triple").getComponent(cc.Sprite),this.process_double=this.process.findChild("double").getComponent(cc.Sprite);var t=this.node.findChild("final");this.final_zero=t.findChild("zero"),this.final_one=t.findChild("one").getComponent(cc.Sprite),this.final_double=t.findChild("double").getComponent(cc.Sprite),this.final_triple=t.findChild("triple").getComponent(cc.Sprite),this.stateIcon=this.node.findChild("icon").getComponent(cc.Sprite),this.num=this.node.findChild("num").getComponent(cc.Label),this.runObj=this.node.findChild("run").getComponent(cc.Sprite),this.isOn=!1,this.max=.9,this.pre=36,this.iconOrginPos={x:this.stateIcon.node.x,y:this.stateIcon.node.y},this.heroPos={x:36,y:312},a.event.on(n.eventType.Operate,this.off,this)},init:function(t,e,i){0==this.isInit&&this.onLoad(),this.isOn=!1,this.callback=i,this.id=t,this.atk=parseInt(e.atk/e.operateNum),this.def=parseInt(e.def/e.operateNum),this.stateIcon.node.active=!1,this.startPoint=e.operateStart/100,this.doubleArea=e.doubleWeight/100,this.tripleArea=e.tripleWeight/100,this.runningType=e.operateType,this.operateTime=e.operateTime,2==t&&(this.operateTime*=.65),3==t&&(this.operateTime*=.39),this.sp=1*this.max/this.operateTime,this.sp=1*this.max,this.spAcc=0,2==this.runningType&&(this.sp=.2*this.sp,this.spAcc=2*(this.operateTime-this.sp*e.operateTime)/(e.operateTime*e.operateTime)),3==this.runningType&&(this.sp=1.4*this.sp,this.spAcc=2*(this.operateTime-this.sp*e.operateTime)/(e.operateTime*e.operateTime)),this.orginSp=this.sp,this.orginSpAcc=this.spAcc,this.process_double.fillRange=this.doubleArea,this.process_double.node.angle=10*(this.doubleArea+this.startPoint+.1)*this.pre,this.process_triple.fillRange=this.tripleArea,this.process_triple.node.angle=10*(this.doubleArea+this.startPoint+this.tripleArea+.1)*this.pre,this.processValue=0,this.runObj.fillRange=0},idle:function(){this.process.active=!1,this.final_one.node.active=!1,this.final_double.node.active=!1,this.final_triple.node.active=!1,this.final_zero.active=!1,this.stateIcon.node.active=!1,this.num.string="",this.runObj.node.active=!1},initShow:function(){this.process.active=!0,this.process_double.node.active=!0,this.process_triple.node.active=!0,this.final_one.node.active=!1,this.final_double.node.active=!1,this.final_triple.node.active=!1,this.final_zero.active=!1,this.num.string="",this.runObj.node.active=!1,this.processValue=0,this.runObj.fillRange=0,this.stateIcon.node.stopAllActions(),this.stateIcon.node.x=this.iconOrginPos.x,this.stateIcon.node.y=this.iconOrginPos.y,this.stateIcon.node.active=!1},on:function(){this.sp=this.orginSp,this.spAcc=this.orginSpAcc,this.initShow(),this.isOn=!0,this.runObj.node.active=!0},off:function(t){if(0!=this.isOn){this.process_double.node.active=!1,this.process_triple.node.active=!1,this.isOn=!1;var e=this.processValue;if(this.stateIcon.node.active=!0,this.stateIcon.node.scaleX=1,this.stateIcon.node.scaleY=1,e<this.startPoint){this.final_one.node.active=!0,this.final_one.fillRange=this.processValue;var i=this.processValue/this.startPoint,n=0;return 0==t.isAtk&&(i=-i),void(0==(n=parseInt(i*this.atk*a.gameConfig.battleAddition[0]))?(this.initShow(),this.callback(this.id,0,0)):(this.callback(this.id,n,1),this.num.string=n,t.isAtk||(this.num.string=-n),this.stateIcon.node.active=!0,t.isAtk?this.stateIcon.spriteFrame=a.res.atkIconSprite:this.stateIcon.spriteFrame=a.res.defIconSprite))}if(e<this.startPoint+this.doubleArea){this.final_double.node.active=!0,this.final_double.fillRange=this.processValue;i=(a.gameConfig.battleAddition[1]-a.gameConfig.battleAddition[0])*(this.processValue-this.startPoint)/this.doubleArea+a.gameConfig.battleAddition[0],n=0;return n=0==t.isAtk?-parseInt(i*this.def):parseInt(i*this.atk),this.callback(this.id,n,2),this.num.string=n,t.isAtk||(this.num.string=-n),this.stateIcon.node.active=!0,void(t.isAtk?this.stateIcon.spriteFrame=a.res.atkIconSprite:this.stateIcon.spriteFrame=a.res.defIconSprite)}if(e<this.startPoint+this.doubleArea+this.tripleArea){this.final_triple.node.active=!0,this.final_triple.fillRange=this.processValue;n=0;return n=0==t.isAtk?-parseInt(a.gameConfig.battleAddition[2]*this.def):parseInt(a.gameConfig.battleAddition[2]*this.atk),this.callback(this.id,n,3),this.num.string=n,t.isAtk||(this.num.string=-n),this.stateIcon.node.active=!0,void(t.isAtk?this.stateIcon.spriteFrame=a.res.atkIconSprite:this.stateIcon.spriteFrame=a.res.defIconSprite)}if(t.isAtk){n=parseInt(this.atk*a.gameConfig.battleAddition[0]);this.callback(this.id,n,1),this.num.string=n,this.stateIcon.spriteFrame=a.res.atkIconSprite}else{var n=-parseInt(this.def*a.gameConfig.battleAddition[0]);this.callback(this.id,n,1),this.num.string=-n,this.stateIcon.spriteFrame=a.res.defIconSprite}this.stateIcon.node.active=!0}},update:function(t){this.isOn&&(this.processValue+=this.sp*t,this.sp+=this.spAcc*t,this.sp<.1&&(this.sp=.1),this.processValue>=this.max&&(this.processValue=this.max,this.final_zero.active=!0,this.isOn=!1,this.callback&&this.callback(this.id,0,0)),this.runObj.fillRange=this.processValue)},playEnd:function(){this.stateIcon.node.runAction(cc.spawn(cc.moveTo(.5,this.heroPos.x-this.node.x,this.heroPos.y),cc.scaleTo(.5,3,3))),this.scheduleOnce(function(){this.stateIcon.node.active=!1}.bind(this),.5)}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],collider:[function(t,e,i){"use strict";cc._RF.push(e,"163dcL29bRH+Z9zmLKL2LgC","collider");var a=t("../manager/event"),n=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.enterEvtList=new Array,this.stayEventList=new Array,this.exitEventList=new Array},registerEnterEvt:function(t){this.enterEvtList.push(t)},registerStayEvt:function(t){this.stayEventList.push(t)},registerExitEvt:function(t){this.exitEventList.push(t)},onCollisionEnter:function(t,e){a.emit(n.eventType.TRIGGERENTER,[t,e])},onCollisionStay:function(t,e){a.emit(n.eventType.TRIGGERSTAY,[t,e])},onCollisionExit:function(t,e){a.emit(n.eventType.TRIGGEREXIT,[t,e])}}),cc._RF.pop()},{"../data/gametype":"gametype","../manager/event":"event"}],config:[function(t,e,i){"use strict";cc._RF.push(e,"bc258tnWaBOLaz5GeXJ3vLL","config"),window.QQPLAY="undefined"!=typeof qq,window.TTGAME="undefined"!=typeof tt,window.WECHATGAME="undefined"!=typeof wx&&"undefined"==typeof qq&&"undefined"==typeof tt,window.VIVO="undefined"!=typeof qg,window.IOS=cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS,window.ANDROID=cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID,window.NATIVE=IOS||ANDROID,window.platform=window.WECHATGAME?wx:window.QQPLAY?qq:null;var a={appID:"wx63f948f281abf42d",QQ_appID:"1109792590",tt_appID:"",localversion:1,netversion:0,configUrl:{gamelist:"https://list.ty200772.com/GameList.aspx",share:"https://list.ty200772.com/CopywritingList.aspx",control:"https://list.ty200772.com/GetGameControlInfo.aspx",url:"https://z1.shaoweiwy.cn/DragonSlayer/DragonSlayer.aspx"}};e.exports=a,cc._RF.pop()},{}],draw:[function(t,e,i){"use strict";cc._RF.push(e,"79e1dmMIDtG5Li/8N0AQ1Zn","draw");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr"),o=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("drawOnlOad"),this.title=this.node.findChild("title"),this.numTxt=this.node.findChild("count/txt").getComponent(cc.Label),this.arrow=this.node.findChild("arrow");var t=this.node.findChild("rotate");this.select=this.node.findChild("select"),this.drawBtn=this.node.findChild("drawBtn"),this.itemList=new Array;for(var e=0;e<8;e++){var i=t.findChild(""+e);this.itemList.push(i);var a=n.gameConfig.draw[e].reward.split("|")[0];a>0&&(i.findChild("icon").getComponent(cc.Sprite).spriteFrame=n.res.drawGoldSprite,i.findChild("name").getComponent(cc.Label).string=a);var s=n.gameConfig.draw[e].reward.split("|")[1];s>0&&(i.findChild("icon").getComponent(cc.Sprite).spriteFrame=n.res.drawDiamondSprite,i.findChild("name").getComponent(cc.Label).string=s)}this.isPlaying=!1,this.isSlow=!1,this.resize(),this.register()},register:function(){this.node.findChild("closeBtn").on("click",this.onClose,this),this.node.findChild("count/add").on("click",this.onAdd,this),this.drawBtn.on("click",this.onDraw,this),n.event.on(o.eventType.UpdateDrawNum,function(){this.numTxt.string="\u6b21\u6570\uff1a"+n.gamedata.drawNum}.bind(this),this)},resize:function(){this.offsetY=(1600-cc.winSize.height)/2,this.title.y-=this.offsetY,this.drawBtn.y+=this.offsetY},onShow:function(){n.audio.playEffect(n.gametype.SoundType.duang),n.event.emit(o.eventType.HideInfo),this.numTxt.string="\u6b21\u6570\uff1a"+n.gamedata.drawNum,this.arrow.angle=0},onHide:function(){n.audio.playEffect(n.gametype.SoundType.duang),n.event.emit(o.eventType.ShowInfo)},onDraw:function(){if(this.arrow.angle=0,WECHATGAME||QQPLAY)s.draw(this.startDraw.bind(this));else{n.gamedata.drawNum--,n.gamedata.drawNum<0&&(n.gamedata.drawNum=0),this.numTxt.string="\u6b21\u6570\uff1a"+n.gamedata.drawNum,n.event.emit(o.eventType.UpdateDrawNum);var t=Math.ceil(8*Math.random());this.startDraw(t)}},startDraw:function(t){this.numTxt.string="\u6b21\u6570\uff1a"+n.gamedata.drawNum,console.log("type:"+t),this.rewardType=t,this.isSlow=!1,this.isPlaying=!0;var e;e=360*(Math.floor(2*Math.random())+5);var i=cc.sequence(cc.rotateBy(2,e),cc.callFunc(function(){this.isSlow=!0}.bind(this)));this.speed=e/2,this.delta=45*(t-1)+a.randomAverage()*Math.random()*5,this.delta+=1440,t>4&&(this.delta+=360),this.time=2*this.delta/this.speed,this.slowSp=-this.speed/this.time,this.arrow.runAction(i),this.selectIdx=0,n.audio.playEffect(n.gametype.SoundType.drawDingDing)},finishDraw:function(){this.scheduleOnce(function(){this.isPlaying=!1;var t=n.gameConfig.draw[this.rewardType-1].reward,e=t.split("|")[0],i=t.split("|")[1];s.AddGold(parseInt(e)),s.addDiamond(parseInt(i))}.bind(this),.5)},onClose:function(){this.isPlaying||(n.audio.playEffect(n.gametype.SoundType.click),n.ui.hide("draw"))},onAdd:function(){n.audio.playEffect(n.gametype.SoundType.click),WECHATGAME||QQPLAY?s.addDrawNum():(n.gamedata.drawNum++,this.onShow())},update:function(t){if(this.isPlaying){this.isSlow&&(this.time-=t,this.speed+=this.slowSp*t,this.arrow.angle-=this.speed*t,this.time<=0&&(this.isSlow=!1,this.finishDraw()));var e=this.arrow.angle%360,i=0;switch(-Math.ceil(e/22.5)){case 15:case 0:this.select.x=this.itemList[0].x,this.select.y=this.itemList[0].y,i=0;break;case 1:case 2:this.select.x=this.itemList[1].x,this.select.y=this.itemList[1].y,i=1;break;case 3:case 4:this.select.x=this.itemList[2].x,this.select.y=this.itemList[2].y,i=2;break;case 5:case 6:this.select.x=this.itemList[3].x,this.select.y=this.itemList[3].y,i=3;break;case 7:case 8:this.select.x=this.itemList[4].x,this.select.y=this.itemList[4].y,i=4;break;case 9:case 10:this.select.x=this.itemList[5].x,this.select.y=this.itemList[5].y,i=5;break;case 11:case 12:this.select.x=this.itemList[6].x,this.select.y=this.itemList[6].y,i=6;break;case 13:case 14:this.select.x=this.itemList[7].x,this.select.y=this.itemList[7].y,i=7}i!=this.selectIdx&&(n.audio.playEffect(n.gametype.SoundType.drawDingDing),this.selectIdx=i)}}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],event:[function(t,e,i){"use strict";cc._RF.push(e,"11579R1cZ1DKa13g9vRvgGN","event");new Array;var a={};e.exports={on:function(t,e,i){void 0==a[t]&&(a[t]=new Array),a[t].push({f:e,n:i})},emit:function(t,e){var i=a[t];if(void 0!=i)for(var n=0;n<i.length;++n){var s=i[n];void 0!=s?s.n.node.active&&s.f.call(s.n,e):console.error(t+" hasn't callback")}}},cc._RF.pop()},{}],float:[function(t,e,i){"use strict";cc._RF.push(e,"e9bc3q5r8pA1rSW3wjQOy/j","float"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onShow:function(t){console.log("float on show"),this.node.stopAllActions(),this.node.getChildByName("text").getComponent(cc.Label).string=t.content,this.node.setPosition(0,0);var e=this,i=cc.callFunc(function(){e.node.active=!1}),a=cc.sequence(cc.moveBy(t.during,0,200),i);this.node.runAction(a)},update:function(t){}}),cc._RF.pop()},{}],friend:[function(t,e,i){"use strict";cc._RF.push(e,"6a5e9K63ORM6qFzXBdixaPz","friend");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.progressBar=this.tweenContent.findChild("panel/progressBar").getComponent(cc.ProgressBar),this.rewardContent=this.tweenContent.findChild("panel/reward"),this.rewardList=new Array;for(var t=0;t<5;t++)this.rewardList.push(this.rewardContent.findChild(""+t));this.closeBtn=this.tweenContent.findChild("close"),this.inviteBtn=this.tweenContent.findChild("inviteBtn"),this.getBtn=this.tweenContent.findChild("getBtn"),this.interval=this.progressBar.node.findChild("bar").width/10,this.progressTxt=this.tweenContent.findChild("panel/progress").getComponent(cc.Label),this.register()},register:function(){a.event.on(s.eventType.Friend,this.refresh,this),this.closeBtn.on("click",this.onClose,this),this.inviteBtn.on("click",this.onInvite,this),this.getBtn.on("click",this.onGet,this)},onShow:function(){a.audio.playEffect(a.gametype.SoundType.duang),this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start();for(var t=0;t<a.gameConfig.friend.length;t++)this.rewardList[t].findChild("num").getComponent(cc.Label).string="x"+a.gameConfig.friend[t].reward,this.rewardList[t].x=this.interval*a.gameConfig.friend[t].num;this.refresh()},refresh:function(){this.progressTxt.string=a.gamedata.masterData.friendList.length+"/10",this.progressBar.progress=a.gamedata.masterData.friendList.length/10;for(var t=0;t<a.gamedata.masterData.inviteReward.length;t++)0==a.gamedata.masterData.inviteReward[t]&&(a.gamedata.masterData.friendList.length>=parseInt(a.gameConfig.friend[t].num)?(this.getBtn.active=!0,this.inviteBtn.active=!1):(this.inviteBtn.active=!0,this.getBtn.active=!1))},onGet:function(){a.audio.playEffect(a.gametype.SoundType.click),n.getInviteReward()},onInvite:function(){a.audio.playEffect(a.gametype.SoundType.click),a.ui.showFloatTip("\u529f\u80fd\u6682\u672a\u5f00\u542f")},onClose:function(){a.audio.playEffect(a.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.1,{scaleX:.5,scaleY:.5}).call(function(){a.ui.hide("friend")}).start()}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],gameConfig:[function(t,e,i){"use strict";cc._RF.push(e,"d9418hj34hEaKPWKMzNlQnw","gameConfig");e.exports={robotData:[{name:"\u8d75\u5927\u559c\u5440",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxto237bq2j302a02a743.jpg"},{name:"\u8d75\u5c0f\u7c92",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxto4jdpibj302a02aa9u.jpg"},{name:"\u4e2b\u4e2b",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxto27b5pqj302a02aa9u.jpg"},{name:"\u7ef4\u5a1c",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxto4lnd4aj302a02aa9u.jpg"},{name:"only",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxto4orhqvj302a02aa9u.jpg"},{name:"\u5c0f\u73b2\u5b50",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxto4qr7ugj302a02ajr6.jpg"},{name:"A hero",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxto0ippr8j302a02adfm.jpg"},{name:"A my girl",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxto0oqthuj302a02aa9u.jpg"},{name:"A_yan",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxto0vrazcj302a02aq2q.jpg"},{name:"Power.",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxto12fgd0j302a02a0sj.jpg"},{name:"Tina",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxto16o94bj302a02ajr6.jpg"},{name:"C.c",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxto1bdmuwj302a02aa9v.jpg"},{name:"\u90b1\u563f\u563f",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxto1lkxtvj302a02a3yb.jpg"},{name:"Cbaby",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxto1qcw92j302a02agle.jpg"},{name:"\u751c\u9152",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxto1v1mr6j302a02ajr6.jpg"},{name:"Bella fu",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnyzby8ij302a02adfm.jpg"},{name:"\u5012\u5438\u4e00\u53e3\u51c9\u6c14\u541b",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnz30midj302a02aa9u.jpg"},{name:"\u9648\u5c0f\u767d\u767d",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnz9fat8j302a02a742.jpg"},{name:"\u9648\u5c34\u5c2c",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnzdoieoj302a02aa9u.jpg"},{name:"\u6d77\u71d5\u5450",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxtnzjvfdbj302a02at8i.jpg"},{name:"\u614c\u5f20\u5c0f\u59d0\u59d0",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnzonc6mj302a02a3ya.jpg"},{name:"\u5976\u6cb9\u5c0f\u997c\u5e72",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnzrrg8mj302a02at8i.jpg"},{name:"Nine",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxto04f3dlj302a02aweb.jpg"},{name:"yoyoliu",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxto08v80fj302a02awea.jpg"},{name:"\u4eb2\u7231\u7684\u8d75\u5c0f\u59d0",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnxxtsv6j302x02x743.jpg"},{name:"Riki",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxtny0h145j301u01u0si.jpg"},{name:"\u590f\u672b\u521d\u51c9",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxtny30ysij302a02aa9u.jpg"},{name:"\u5446\u732b.",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxtny6fodpj302f02fgle.jpg"},{name:"X.",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxtny9q0n3j302a02ajr6.jpg"},{name:"A.Yoho",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnyd9igaj302a02ajr6.jpg"},{name:"\u7c73\u7c92",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxtnyhblkpj302a02adfm.jpg"},{name:"\u5948\u7f8e\u554a",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnylt0pwj302a02a742.jpg"},{name:"Bling",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxtnyrj27jj302a02adfm.jpg"},{name:"\u5c0f\u9896\u5b50",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnx09r4ij302a02ajr6.jpg"},{name:"\u7c73\u5a1c",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnx1t761j302a02aa9u.jpg"},{name:"Joc\u997c\u5e72",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnx3c98oj302a02amwy.jpg"},{name:"\u59da\u5c0f\u803f",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxtnx525v4j302a02amwy.jpg"},{name:"\u67da\u80a5\u80a5",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxtnx6r1mij302a02a3ya.jpg"},{name:"\u8335\u8335\u8335\u513f",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fxtnx8dsjxj301r01rq2p.jpg"},{name:"\u6dfc\u6dfc",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxtnxa2751j302f02fjr6.jpg"},{name:"\u6167\u51cc\u554a",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxtnxbl1cxj301u01u3ya.jpg"},{name:"Dany",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fxtnxepsdpj303a03a0sj.jpg"},{name:"\u3002",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt5esw8lj3046046web.jpg"},{name:"\uff01",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt5j2ceej3046046wed.jpg"},{name:"\u5927\u9505",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt5mi2dgj3046046web.jpg"},{name:"\u5c0f\u9505",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt5ppvmuj3046046aa2.jpg"},{name:"\u5927\u5173",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt5t7o8uj30460460sm.jpg"},{name:"\u5c0f\u5173",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt5w0cz1j3046046mx1.jpg"},{name:"\u5c0f\u660e",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt5zihdfj3046046wef.jpg"},{name:"Arvin",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt634pzdj3046046a9x.jpg"},{name:"Bruce",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt668szoj3046046q2x.jpg"},{name:"\u4e09\u91cc\u5c6f\u53e4\u5de8\u57fa",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt4fqlevj3046046t8l.jpg"},{name:"\u4e50\u4e50",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt4jc0vzj3046046dfr.jpg"},{name:"\u94a2\u94c1\u867e",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt4nbxy3j30c80bwmxw.jpg"},{name:"\u8759\u8760\u867e",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt4rhvpkj30460463ye.jpg"},{name:"\u9648\u6a59\u6a59",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt4uf2ahj30460463yd.jpg"},{name:"Link",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt4wgx6rj3046046wec.jpg"},{name:"BiuBiu",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt54538dj30c80c8t8v.jpg"},{name:"amu\u963f\u6728",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt55y6exj3046046745.jpg"},{name:"\u827e\u59c6",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt38orffj30c80c80sy.jpg"},{name:"\u9ec4bar\u5929",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt3ckowpj30c80c8mxe.jpg"},{name:"\u4ec5\u6709",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt3fngslj30c80c80t7.jpg"},{name:"\u7b26\u53f7",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt3mczouj30c80c8js5.jpg"},{name:"\u7cef\u7c73\u4ed4",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt3qddqvj30c80c8ac1.jpg"},{name:"\u89e3\u5fe7\u5c0f\u5e03\u4e01",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt3tzx45j3046046t8m.jpg"},{name:"\u5446\u5341\u4e09",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt3yh5nvj30460463yb.jpg"},{name:"\u5c0f\u9a6c\u7532",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt426ns8j30460463yc.jpg"},{name:"\u6587\u5ba4\u957f",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt46znpfj30a00hddgp.jpg"},{name:"\u5c0f\u6ce1\u996d",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt22w89aj3046046q2u.jpg"},{name:"\u732b\u5c0f\u5317",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt26mtikj3046046jra.jpg"},{name:"\u8c46\u8c46",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt29qjp9j30460460sm.jpg"},{name:"\u6bd4\u514b\u8857",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt2ehmo9j3046046glj.jpg"},{name:"\u963f\u83ab",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt2ismbrj30c80c80tf.jpg"},{name:"\u5ddd\u5f1f",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt2nx5gyj30c80c8mxv.jpg"},{name:"\u5c0f\u867e\u7c73",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt2qehkvj30c80c8dgf.jpg"},{name:"\u670b\u514b",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt2vr9eaj30c80c8dgl.jpg"},{name:"\u76d6\u5b50",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt2zpte5j30c80c8jrr.jpg"},{name:"\u5f6d\u5f6d",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt0unxb1j3046046q2t.jpg"},{name:"\u95f9\u54ea\u6837",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt11h7obj3046046746.jpg"},{name:"\u963f\u5927",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt15e52yj30460460sn.jpg"},{name:"\u6389\u4ef7\u884c\u4e3a",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt18hf1pj3046046t8l.jpg"},{name:"\u963f\u590f",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt1d2x2vj3046046q2u.jpg"},{name:"\u732b\u5b81",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpt1fih5hj3046046t8l.jpg"},{name:"\u68a6\u663c\u521d",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt1kdg7pj3046046mx2.jpg"},{name:"\u4e01\u683c",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt1p7d7dj3046046mx2.jpg"},{name:"\u9876\u70b9",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt1stnhmj3046046q2u.jpg"},{name:"\u5c1b\u5c1b",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpszrdlntj3046046jr9.jpg"},{name:"\u6dfc\u6dfc",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpszv0ifzj3046046gli.jpg"},{name:"\u68ee\u68ee",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpszx8hh0j3046046glh.jpg"},{name:"\u7131\u7131",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt00dag5j3046046glh.jpg"},{name:"\u6e9c\u6e9c\u7403",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt03z4gqj3046046mx3.jpg"},{name:"\u5927\u5927\u7cd6",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpt07ght5j3046046a9y.jpg"},{name:"\u9ea6\u5f53\u7eb3",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpt0ar4rxj30460463yd.jpg"},{name:"\u738b\u601d\u8471",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt0du6fmj30460460sm.jpg"},{name:"\u5df4\u5df4",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpt0h1b34j3046046mx1.jpg"},{name:"\u9ebb\u9ebb",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsyj5jqyj3046046mx3.jpg"},{name:"\u76db\u5347\u5347",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsym90zxj3046046t8l.jpg"},{name:"\u5c0f\u767d",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsyqhkpjj3046046mx5.jpg"},{name:"\u5927\u767d",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsyus3i7j3046046dfr.jpg"},{name:"\u5e18\u5916\u96e8",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsyx8zbmj3046046jr8.jpg"},{name:"\u5c0f\u9ed1",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpsyzugguj3046046glf.jpg"},{name:"\u5927\u9ed1",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsz4x2vwj30460463ye.jpg"},{name:"\u563f\u563f",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpszb9dy5j30460463yf.jpg"},{name:"\u51ef\u51ef",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpszeujdwj3046046t8l.jpg"},{name:"\u5c0f\u51ef",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpss03jg4j3046046mx0.jpg"},{name:"\u5927\u51ef",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsxe8a7pj3046046mx2.jpg"},{name:"\u9ad8\u8d31i",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsxfsxzoj3046046glg.jpg"},{name:"\u5927\u6d77",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsxk4osij30460460sl.jpg"},{name:"\u9510",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsxop8msj3046046jr8.jpg"},{name:"\u5c0f\u667a",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpsxv5qk4j30460463yf.jpg"},{name:"\u667a\u667a",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsxykrkuj30460463yf.jpg"},{name:"\u5c0f\u8896\u73cd",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsy0xevnj3046046q2t.jpg"},{name:"\u590f\u590f",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsy5tf29j3046046wee.jpg"},{name:"\u7c92",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsqmsqibj3046046mwz.jpg"},{name:"\u7c92\u7c92",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsqr2p0ij3046046glh.jpg"},{name:"\u83ca\u82b1\u8336",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsqudee6j3046046a9x.jpg"},{name:"\u80a5\u80a5",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsqxhwv1j3046046746.jpg"},{name:"\u5c0f\u80d6",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsqzt9aej3046046q2t.jpg"},{name:"\u5927\u80d6",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsr3okpgj3046046a9y.jpg"},{name:"\u5927\u5934",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsr6pri2j3046046t8k.jpg"},{name:"\xb0\u51c9\u5fc3\u3002",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpsrg9lsej30460460sl.jpg"},{name:"\u5c0f\u6587",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsrix90uj3046046q2s.jpg"},{name:"\u963f\u6587\u6587",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpspwm46sj3046046glf.jpg"},{name:"\u667a\u5546\u5df2\u6b20\u8d39\xb0",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspxtnvaj3046046wed.jpg"},{name:"\u6d1b\u6d1b",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspzyydbj30b40b4mxm.jpg"},{name:"\u6d1b\u514b",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsq1sr8sj30b40b4dge.jpg"},{name:"\u5c0f\u7f57",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpsq3o40rj30b40b43ys.jpg"},{name:"\u7231\u8fc7\u90a3\u5f20\u8138@",icon:"https://wx1.sinaimg.cn/mw690/006ys9Gfgy1fzpsq7vomij30b40b474j.jpg"},{name:"\u5c0f\u6d1b",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsqbiu2aj30b40b43yq.jpg"},{name:"\u76ae\u76ae\u4fa0",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpsqd7k1ij3046046jr8.jpg"},{name:"\u5df4\u62c9\u62c9",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpsqglul7j3046046dfm.jpg"},{name:"\u8bb0\u5fc6\u5fe7\u5fc3",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspat98rj30c80c8weo.jpg"},{name:"\u9ed1\u5929\u4f7f",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspb32jrj3046046a9w.jpg"},{name:"\u70b9\u65f3\u4f9d\u8d56",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspcpbdoj3046046glh.jpg"},{name:"\u56cd\u69d1 ?",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspf3l96j30460463yc.jpg"},{name:"\u9c7c\u6c89\u6df1\u6d77@",icon:"https://wx2.sinaimg.cn/mw690/006ys9Gfgy1fzpspfzbi4j3046046glh.jpg"},{name:"\u6d77\u7ef5\u963f\u5b9d\u5b9d",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpspiwut8j3046046wec.jpg"},{name:"\u672c\u5bab\u7565\u840c",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpspkxcwej30460463yc.jpg"},{name:"\u56db\u53f6\u8349",icon:"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fzpspmw3a7j30460460sm.jpg"},{name:"\u9a37\u5e74\u4e0d\u9a37",icon:"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fzpsppvx6lj3046046q2u.jpg"}],task:[{ID:"1",content:"\u8fdb\u884c{0}\u6b21{1}\u7ea7\u53ec\u5524",num:"1|1",reward:"2",type:"3"},{ID:"2",content:"\u62e5\u6709{0}\u4e2a\u82f1\u96c4",num:"1|0",reward:"2",type:"1"},{ID:"3",content:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u7684\u82f1\u96c4",num:"1|1",reward:"2",type:"2"},{ID:"4",content:"\u8fdb\u884c{0}\u6b21{1}\u7ea7\u53ec\u5524",num:"2|1",reward:"2",type:"3"},{ID:"5",content:"\u8fdb\u884c{0}\u6b21{1}\u7ea7\u53ec\u5524",num:"1|2",reward:"2",type:"3"},{ID:"6",content:"\u62e5\u6709{0}\u4e2a\u82f1\u96c4",num:"3|0",reward:"2",type:"1"},{ID:"7",content:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u7684\u82f1\u96c4",num:"3|1",reward:"2",type:"2"},{ID:"8",content:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u7684\u82f1\u96c4",num:"1|2",reward:"2",type:"2"},{ID:"9",content:"\u8fdb\u884c{0}\u6b21{1}\u7ea7\u53ec\u5524",num:"5|1",reward:"2",type:"3"},{ID:"10",content:"\u62e5\u6709{0}\u4e2a\u82f1\u96c4",num:"5|0",reward:"2",type:"1"},{ID:"11",content:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u7684\u82f1\u96c4",num:"2|2",reward:"2",type:"2"},{ID:"12",content:"{0}\u5347\u5230{1}\u661f",num:"1|2",reward:"2",type:"5"},{ID:"13",content:"\u8fdb\u884c{0}\u6b21{1}\u7ea7\u53ec\u5524",num:"5|1",reward:"2",type:"3"},{ID:"14",content:"\u62e5\u6709{0}\u4e2a\u82f1\u96c4",num:"7|0",reward:"2",type:"1"},{ID:"15",content:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u7684\u82f1\u96c4",num:"1|3",reward:"2",type:"2"},{ID:"16",content:"{0}\u5347\u5230{1}\u661f",num:"2|2",reward:"2",type:"5"},{ID:"17",content:"\u8fdb\u884c{0}\u6b21{1}\u7ea7\u53ec\u5524",num:"3|2",reward:"2",type:"3"},{ID:"18",content:"\u62e5\u6709{0}\u4e2a\u82f1\u96c4",num:"9|0",reward:"2",type:"1"},{ID:"19",content:"\u62e5\u6709{0}\u4e2a{1}\u54c1\u8d28\u7684\u82f1\u96c4",num:"2|3",reward:"2",type:"2"},{ID:"20",content:"{0}\u5347\u5230{1}\u661f",num:"1|3",reward:"2",type:"5"}],findTask:function(t){for(var e=0;e<this.task.length;e++)if(this.task[e].ID==t)return this.task[e];return null},monster:[{id:"1",name:"\u602a\u72691",detail:"\u6d4b\u8bd5",atk:"42",def:"15",hp:"120",sp:"10",grade:"1",boss:"0",outfit:"s_02"},{id:"2",name:"\u602a\u72692",detail:"\u6d4b\u8bd5",atk:"22",def:"30",hp:"280",sp:"5",grade:"2",boss:"0",outfit:"s_03"},{id:"3",name:"\u602a\u72693",detail:"\u6d4b\u8bd5",atk:"92",def:"5",hp:"75",sp:"15",grade:"1",boss:"0",outfit:"s_04"},{id:"4",name:"\u602a\u72694",detail:"\u6d4b\u8bd5",atk:"65",def:"25",hp:"320",sp:"18",grade:"1",boss:"0",outfit:"s_01"},{id:"5",name:"\u602a\u72695",detail:"\u6d4b\u8bd5",atk:"35",def:"45",hp:"505",sp:"10",grade:"2",boss:"0",outfit:"s_07"},{id:"6",name:"\u602a\u72696",detail:"\u6d4b\u8bd5",atk:"106",def:"10",hp:"122",sp:"30",grade:"1",boss:"0",outfit:"s_09"},{id:"7",name:"\u602a\u72697",detail:"\u6d4b\u8bd5",atk:"86",def:"35",hp:"400",sp:"26",grade:"2",boss:"0",outfit:"s_11"},{id:"8",name:"\u602a\u72698",detail:"\u6d4b\u8bd5",atk:"45",def:"60",hp:"708",sp:"8",grade:"2",boss:"0",outfit:"s_12"},{id:"9",name:"\u602a\u72699",detail:"\u6d4b\u8bd5",atk:"120",def:"15",hp:"170",sp:"40",grade:"1",boss:"0",outfit:"s_08"},{id:"10",name:"\u602a\u726910",detail:"\u6d4b\u8bd5",atk:"108",def:"45",hp:"595",sp:"34",grade:"2",boss:"0",outfit:"s_13"},{id:"11",name:"\u602a\u726911",detail:"\u6d4b\u8bd5",atk:"57",def:"80",hp:"842",sp:"11",grade:"2",boss:"0",outfit:"s_05"},{id:"12",name:"\u602a\u726912",detail:"\u6d4b\u8bd5",atk:"135",def:"20",hp:"200",sp:"60",grade:"1",boss:"0",outfit:"s_14"},{id:"13",name:"\u602a\u726913",detail:"\u6d4b\u8bd5",atk:"136",def:"60",hp:"750",sp:"50",grade:"2",boss:"0",outfit:"s_17"},{id:"14",name:"\u602a\u726914",detail:"\u6d4b\u8bd5",atk:"78",def:"112",hp:"1040",sp:"18",grade:"3",boss:"0",outfit:"s_18"},{id:"15",name:"\u602a\u726915",detail:"\u6d4b\u8bd5",atk:"180",def:"25",hp:"346",sp:"100",grade:"1",boss:"0",outfit:"s_15"},{id:"16",name:"\u602a\u726916",detail:"\u6d4b\u8bd5",atk:"62",def:"65",hp:"25",sp:"5",grade:"2",boss:"0",outfit:"s_16"},{id:"17",name:"\u602a\u726917",detail:"\u6d4b\u8bd5",atk:"96",def:"88",hp:"50",sp:"15",grade:"2",boss:"0",outfit:"s_10"},{id:"18",name:"\u602a\u726918",detail:"\u6d4b\u8bd5",atk:"125",def:"115",hp:"75",sp:"25",grade:"2",boss:"0",outfit:"s_24"},{id:"19",name:"\u602a\u726919",detail:"\u6d4b\u8bd5",atk:"150",def:"138",hp:"100",sp:"35",grade:"2",boss:"0",outfit:"s_25"},{id:"20",name:"BOSS1",detail:"\u6d4b\u8bd5",atk:"60",def:"15",hp:"192",sp:"10",grade:"2",boss:"1",outfit:"s_21"},{id:"21",name:"BOSS2",detail:"\u6d4b\u8bd5",atk:"30",def:"50",hp:"468",sp:"5",grade:"3",boss:"1",outfit:"s_06"},{id:"22",name:"BOSS3",detail:"\u6d4b\u8bd5",atk:"118",def:"1",hp:"100",sp:"50",grade:"1",boss:"1",outfit:"s_20"},{id:"23",name:"BOSS4",detail:"\u6d4b\u8bd5",atk:"100",def:"20",hp:"505",sp:"35",grade:"2",boss:"1",outfit:"s_19"},{id:"24",name:"BOSS5",detail:"\u6d4b\u8bd5",atk:"45",def:"12",hp:"775",sp:"10",grade:"3",boss:"1",outfit:"s_20"},{id:"25",name:"BOSS6",detail:"\u6d4b\u8bd5",atk:"185",def:"5",hp:"296",sp:"110",grade:"1",boss:"1",outfit:"s_22"}],fingMonsterCfg:function(t){for(var e=0;e<this.monster.length;e++)if(this.monster[e].id==t)return this.monster[e];return null},level:[{ID:"1",name:"\u5173\u5361",monster:"1",reward:"100|0"},{ID:"2",name:"\u5173\u5361",monster:"1",reward:"100|0"},{ID:"3",name:"\u5173\u5361",monster:"2",reward:"100|0"},{ID:"4",name:"BOSS",monster:"1|2",reward:"200|5"},{ID:"5",name:"\u5173\u5361",monster:"1",reward:"150|0"},{ID:"6",name:"\u5173\u5361",monster:"2",reward:"150|0"},{ID:"7",name:"\u5173\u5361",monster:"3",reward:"150|0"},{ID:"8",name:"BOSS",monster:"20",reward:"300|5"},{ID:"9",name:"\u5173\u5361",monster:"1|1",reward:"200|0"},{ID:"10",name:"\u5173\u5361",monster:"1|2",reward:"200|0"},{ID:"11",name:"\u5173\u5361",monster:"1|3",reward:"200|0"},{ID:"12",name:"BOSS",monster:"1|2|3",reward:"400|5"},{ID:"13",name:"\u5173\u5361",monster:"4",reward:"250|0"},{ID:"14",name:"\u5173\u5361",monster:"4",reward:"250|0"},{ID:"15",name:"\u5173\u5361",monster:"5",reward:"250|0"},{ID:"16",name:"BOSS",monster:"4|5",reward:"500|10"},{ID:"17",name:"\u5173\u5361",monster:"5",reward:"300|0"},{ID:"18",name:"\u5173\u5361",monster:"6",reward:"300|0"},{ID:"19",name:"\u5173\u5361",monster:"5|6",reward:"300|0"},{ID:"20",name:"BOSS",monster:"21",reward:"600|10"},{ID:"21",name:"\u5173\u5361",monster:"5",reward:"400|0"},{ID:"22",name:"\u5173\u5361",monster:"6",reward:"400|0"},{ID:"23",name:"\u5173\u5361",monster:"4|6",reward:"400|0"},{ID:"24",name:"BOSS",monster:"22",reward:"800|10"},{ID:"25",name:"\u5173\u5361",monster:"7",reward:"500|0"},{ID:"26",name:"\u5173\u5361",monster:"7",reward:"500|0"},{ID:"27",name:"\u5173\u5361",monster:"8",reward:"500|0"},{ID:"28",name:"BOSS",monster:"21|16",reward:"1000|15"},{ID:"29",name:"\u5173\u5361",monster:"8",reward:"600|0"},{ID:"30",name:"\u5173\u5361",monster:"9",reward:"600|0"},{ID:"31",name:"\u5173\u5361",monster:"7|9",reward:"600|0"},{ID:"32",name:"BOSS",monster:"23",reward:"1200|15"},{ID:"33",name:"\u5173\u5361",monster:"7",reward:"700|0"},{ID:"34",name:"\u5173\u5361",monster:"8",reward:"700|0"},{ID:"35",name:"\u5173\u5361",monster:"9",reward:"700|0"},{ID:"36",name:"BOSS",monster:"8|17",reward:"1400|15"},{ID:"37",name:"\u5173\u5361",monster:"10",reward:"800|0"},{ID:"38",name:"\u5173\u5361",monster:"11",reward:"800|0"},{ID:"39",name:"\u5173\u5361",monster:"10|11",reward:"800|0"},{ID:"40",name:"BOSS",monster:"10|18",reward:"1600|20"},{ID:"41",name:"\u5173\u5361",monster:"11",reward:"900|0"},{ID:"42",name:"\u5173\u5361",monster:"12",reward:"900|0"},{ID:"43",name:"\u5173\u5361",monster:"16|17",reward:"900|0"},{ID:"44",name:"BOSS",monster:"24",reward:"1800|20"},{ID:"45",name:"\u5173\u5361",monster:"10",reward:"1000|0"},{ID:"46",name:"\u5173\u5361",monster:"11",reward:"1000|0"},{ID:"47",name:"\u5173\u5361",monster:"17|18",reward:"1000|0"},{ID:"48",name:"BOSS",monster:"10|11|12",reward:"2000|20"},{ID:"49",name:"\u5173\u5361",monster:"13",reward:"1100|0"},{ID:"50",name:"\u5173\u5361",monster:"14",reward:"1100|0"},{ID:"51",name:"\u5173\u5361",monster:"13|14",reward:"1100|0"},{ID:"52",name:"BOSS",monster:"13|19",reward:"2200|25"},{ID:"53",name:"\u5173\u5361",monster:"14",reward:"1200|0"},{ID:"54",name:"\u5173\u5361",monster:"15",reward:"1200|0"},{ID:"55",name:"\u5173\u5361",monster:"18|19",reward:"1200|0"},{ID:"56",name:"BOSS",monster:"25",reward:"2400|25"},{ID:"57",name:"\u5173\u5361",monster:"13|14",reward:"1300|0"},{ID:"58",name:"\u5173\u5361",monster:"13|15",reward:"1300|0"},{ID:"59",name:"\u5173\u5361",monster:"15|19",reward:"1300|0"},{ID:"60",name:"BOSS",monster:"24|25",reward:"2600|25"}],findLevelCfg:function(t){for(var e=0;e<this.level.length;e++)if(this.level[e].ID==t)return this.level[e];return null},hero:[{ID:"1",star:"1",name:"\u9a91\u58eb",detail:"\u6d4b\u8bd5",atk:"50",def:"70",hp:"120",sp:"10",grade:"1",cost:"8",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"60",doubleWeight:"10",tripleWeight:"2",outfit:"s_03"},{ID:"1",star:"2",name:"\u9a91\u58eb",detail:"\u6d4b\u8bd5",atk:"70",def:"110",hp:"185",sp:"20",grade:"1",cost:"15",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"60",doubleWeight:"10",tripleWeight:"2",outfit:"s_03"},{ID:"1",star:"3",name:"\u9a91\u58eb",detail:"\u6d4b\u8bd5",atk:"90",def:"150",hp:"250",sp:"30",grade:"1",cost:"60",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"60",doubleWeight:"15",tripleWeight:"5",outfit:"s_03"},{ID:"1",star:"4",name:"\u9a91\u58eb",detail:"\u6d4b\u8bd5",atk:"110",def:"190",hp:"315",sp:"40",grade:"1",cost:"120",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"60",doubleWeight:"15",tripleWeight:"5",outfit:"s_03"},{ID:"1",star:"5",name:"\u9a91\u58eb",detail:"\u6d4b\u8bd5",atk:"130",def:"230",hp:"385",sp:"50",grade:"1",cost:"180",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"60",doubleWeight:"20",tripleWeight:"10",outfit:"s_03"},{ID:"2",star:"1",name:"\u86ee\u65cf",detail:"\u6d4b\u8bd5",atk:"100",def:"20",hp:"70",sp:"30",grade:"3",cost:"8",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"80",doubleWeight:"5",tripleWeight:"1",outfit:"s_09"},{ID:"2",star:"2",name:"\u86ee\u65cf",detail:"\u6d4b\u8bd5",atk:"115",def:"30",hp:"125",sp:"40",grade:"3",cost:"15",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"80",doubleWeight:"6",tripleWeight:"1",outfit:"s_09"},{ID:"2",star:"3",name:"\u86ee\u65cf",detail:"\u6d4b\u8bd5",atk:"130",def:"40",hp:"180",sp:"50",grade:"3",cost:"60",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"80",doubleWeight:"7",tripleWeight:"2",outfit:"s_09"},{ID:"2",star:"4",name:"\u86ee\u65cf",detail:"\u6d4b\u8bd5",atk:"145",def:"50",hp:"235",sp:"60",grade:"3",cost:"120",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"80",doubleWeight:"8",tripleWeight:"2",outfit:"s_09"},{ID:"2",star:"5",name:"\u86ee\u65cf",detail:"\u6d4b\u8bd5",atk:"160",def:"60",hp:"295",sp:"70",grade:"3",cost:"180",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"80",doubleWeight:"9",tripleWeight:"3",outfit:"s_09"},{ID:"3",star:"1",name:"\u6218\u58eb",detail:"\u6d4b\u8bd5",atk:"75",def:"35",hp:"95",sp:"20",grade:"2",cost:"8",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"70",doubleWeight:"6",tripleWeight:"2",outfit:"s_10"},{ID:"3",star:"2",name:"\u6218\u58eb",detail:"\u6d4b\u8bd5",atk:"100",def:"60",hp:"145",sp:"30",grade:"2",cost:"15",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"70",doubleWeight:"8",tripleWeight:"3",outfit:"s_10"},{ID:"3",star:"3",name:"\u6218\u58eb",detail:"\u6d4b\u8bd5",atk:"125",def:"85",hp:"195",sp:"40",grade:"2",cost:"60",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"70",doubleWeight:"10",tripleWeight:"4",outfit:"s_10"},{ID:"3",star:"4",name:"\u6218\u58eb",detail:"\u6d4b\u8bd5",atk:"150",def:"110",hp:"245",sp:"50",grade:"2",cost:"120",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"70",doubleWeight:"12",tripleWeight:"5",outfit:"s_10"},{ID:"3",star:"5",name:"\u6218\u58eb",detail:"\u6d4b\u8bd5",atk:"175",def:"135",hp:"305",sp:"60",grade:"2",cost:"180",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"70",doubleWeight:"15",tripleWeight:"6",outfit:"s_10"},{ID:"4",star:"1",name:"\u6e38\u4fa0",detail:"\u6d4b\u8bd5",atk:"110",def:"15",hp:"68",sp:"70",grade:"5",cost:"8",operateNum:"3",operateType:"1",operateTime:"1.5",operateStart:"65",doubleWeight:"5",tripleWeight:"1",outfit:"s_08"},{ID:"4",star:"2",name:"\u6e38\u4fa0",detail:"\u6d4b\u8bd5",atk:"140",def:"25",hp:"108",sp:"90",grade:"5",cost:"15",operateNum:"3",operateType:"1",operateTime:"1.5",operateStart:"65",doubleWeight:"5",tripleWeight:"2",outfit:"s_08"},{ID:"4",star:"3",name:"\u6e38\u4fa0",detail:"\u6d4b\u8bd5",atk:"170",def:"35",hp:"148",sp:"110",grade:"5",cost:"60",operateNum:"3",operateType:"1",operateTime:"1.5",operateStart:"65",doubleWeight:"6",tripleWeight:"3",outfit:"s_08"},{ID:"4",star:"4",name:"\u6e38\u4fa0",detail:"\u6d4b\u8bd5",atk:"200",def:"45",hp:"188",sp:"130",grade:"5",cost:"120",operateNum:"3",operateType:"1",operateTime:"1.5",operateStart:"65",doubleWeight:"6",tripleWeight:"4",outfit:"s_08"},{ID:"4",star:"5",name:"\u6e38\u4fa0",detail:"\u6d4b\u8bd5",atk:"230",def:"55",hp:"233",sp:"150",grade:"5",cost:"180",operateNum:"3",operateType:"1",operateTime:"1",operateStart:"65",doubleWeight:"7",tripleWeight:"5",outfit:"s_08"},{ID:"5",star:"1",name:"\u6c11\u5175",detail:"\u6d4b\u8bd5",atk:"30",def:"50",hp:"260",sp:"10",grade:"1",cost:"8",operateNum:"1",operateType:"1",operateTime:"2.5",operateStart:"75",doubleWeight:"15",tripleWeight:"2",outfit:"s_01"},{ID:"5",star:"2",name:"\u6c11\u5175",detail:"\u6d4b\u8bd5",atk:"45",def:"80",hp:"370",sp:"12",grade:"1",cost:"15",operateNum:"1",operateType:"1",operateTime:"2.5",operateStart:"75",doubleWeight:"15",tripleWeight:"2",outfit:"s_01"},{ID:"5",star:"3",name:"\u6c11\u5175",detail:"\u6d4b\u8bd5",atk:"60",def:"110",hp:"480",sp:"14",grade:"1",cost:"60",operateNum:"1",operateType:"1",operateTime:"2.5",operateStart:"75",doubleWeight:"15",tripleWeight:"2",outfit:"s_01"},{ID:"5",star:"4",name:"\u6c11\u5175",detail:"\u6d4b\u8bd5",atk:"75",def:"140",hp:"590",sp:"16",grade:"1",cost:"120",operateNum:"1",operateType:"1",operateTime:"2",operateStart:"75",doubleWeight:"15",tripleWeight:"2",outfit:"s_01"},{ID:"5",star:"5",name:"\u6c11\u5175",detail:"\u6d4b\u8bd5",atk:"90",def:"170",hp:"700",sp:"18",grade:"1",cost:"180",operateNum:"1",operateType:"1",operateTime:"1",operateStart:"75",doubleWeight:"35",tripleWeight:"25",outfit:"s_01"},{ID:"6",star:"1",name:"\u730e\u4eba",detail:"\u6d4b\u8bd5",atk:"90",def:"40",hp:"85",sp:"50",grade:"4",cost:"8",operateNum:"2",operateType:"1",operateTime:"1",operateStart:"55",doubleWeight:"6",tripleWeight:"3",outfit:"s_06"},{ID:"6",star:"2",name:"\u730e\u4eba",detail:"\u6d4b\u8bd5",atk:"110",def:"60",hp:"133",sp:"65",grade:"4",cost:"15",operateNum:"2",operateType:"1",operateTime:"1",operateStart:"55",doubleWeight:"6",tripleWeight:"3",outfit:"s_06"},{ID:"6",star:"3",name:"\u730e\u4eba",detail:"\u6d4b\u8bd5",atk:"130",def:"80",hp:"181",sp:"80",grade:"4",cost:"60",operateNum:"2",operateType:"1",operateTime:"1",operateStart:"55",doubleWeight:"8",tripleWeight:"6",outfit:"s_06"},{ID:"6",star:"4",name:"\u730e\u4eba",detail:"\u6d4b\u8bd5",atk:"150",def:"100",hp:"229",sp:"95",grade:"4",cost:"120",operateNum:"2",operateType:"1",operateTime:"1",operateStart:"55",doubleWeight:"8",tripleWeight:"6",outfit:"s_06"},{ID:"6",star:"5",name:"\u730e\u4eba",detail:"\u6d4b\u8bd5",atk:"170",def:"120",hp:"282",sp:"110",grade:"4",cost:"180",operateNum:"3",operateType:"1",operateTime:"1",operateStart:"55",doubleWeight:"10",tripleWeight:"9",outfit:"s_06"},{ID:"7",star:"1",name:"\u5723\u9a91",detail:"\u6d4b\u8bd5",atk:"80",def:"90",hp:"100",sp:"15",grade:"3",cost:"8",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"60",doubleWeight:"3",tripleWeight:"1",outfit:"s_04"},{ID:"7",star:"2",name:"\u5723\u9a91",detail:"\u6d4b\u8bd5",atk:"95",def:"110",hp:"165",sp:"40",grade:"3",cost:"15",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"60",doubleWeight:"4",tripleWeight:"2",outfit:"s_04"},{ID:"7",star:"3",name:"\u5723\u9a91",detail:"\u6d4b\u8bd5",atk:"110",def:"130",hp:"230",sp:"65",grade:"3",cost:"60",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"60",doubleWeight:"5",tripleWeight:"3",outfit:"s_04"},{ID:"7",star:"4",name:"\u5723\u9a91",detail:"\u6d4b\u8bd5",atk:"125",def:"150",hp:"295",sp:"90",grade:"3",cost:"120",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"60",doubleWeight:"6",tripleWeight:"4",outfit:"s_04"},{ID:"7",star:"5",name:"\u5723\u9a91",detail:"\u6d4b\u8bd5",atk:"140",def:"170",hp:"365",sp:"115",grade:"3",cost:"180",operateNum:"2",operateType:"1",operateTime:"1.5",operateStart:"60",doubleWeight:"7",tripleWeight:"5",outfit:"s_04"},{ID:"8",star:"1",name:"\u536b\u58eb",detail:"\u6d4b\u8bd5",atk:"60",def:"120",hp:"80",sp:"10",grade:"3",cost:"8",operateNum:"2",operateType:"1",operateTime:"2.5",operateStart:"65",doubleWeight:"5",tripleWeight:"3",outfit:"s_07"},{ID:"8",star:"2",name:"\u536b\u58eb",detail:"\u6d4b\u8bd5",atk:"75",def:"170",hp:"132",sp:"15",grade:"3",cost:"15",operateNum:"2",operateType:"1",operateTime:"2.5",operateStart:"65",doubleWeight:"5",tripleWeight:"3",outfit:"s_07"},{ID:"8",star:"3",name:"\u536b\u58eb",detail:"\u6d4b\u8bd5",atk:"90",def:"220",hp:"184",sp:"20",grade:"3",cost:"60",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"65",doubleWeight:"7",tripleWeight:"5",outfit:"s_07"},{ID:"8",star:"4",name:"\u536b\u58eb",detail:"\u6d4b\u8bd5",atk:"105",def:"270",hp:"236",sp:"25",grade:"3",cost:"120",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"65",doubleWeight:"7",tripleWeight:"5",outfit:"s_07"},{ID:"8",star:"5",name:"\u536b\u58eb",detail:"\u6d4b\u8bd5",atk:"120",def:"320",hp:"293",sp:"30",grade:"3",cost:"180",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"65",doubleWeight:"9",tripleWeight:"7",outfit:"s_07"},{ID:"9",star:"1",name:"\u5723\u804c",detail:"\u6d4b\u8bd5",atk:"70",def:"95",hp:"100",sp:"20",grade:"4",cost:"8",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"75",doubleWeight:"5",tripleWeight:"1",outfit:"s_02"},{ID:"9",star:"2",name:"\u5723\u804c",detail:"\u6d4b\u8bd5",atk:"85",def:"130",hp:"141",sp:"35",grade:"4",cost:"15",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"75",doubleWeight:"5",tripleWeight:"1",outfit:"s_02"},{ID:"9",star:"3",name:"\u5723\u804c",detail:"\u6d4b\u8bd5",atk:"100",def:"165",hp:"182",sp:"50",grade:"4",cost:"60",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"75",doubleWeight:"8",tripleWeight:"4",outfit:"s_02"},{ID:"9",star:"4",name:"\u5723\u804c",detail:"\u6d4b\u8bd5",atk:"115",def:"200",hp:"223",sp:"65",grade:"4",cost:"120",operateNum:"2",operateType:"1",operateTime:"2",operateStart:"75",doubleWeight:"8",tripleWeight:"4",outfit:"s_02"},{ID:"9",star:"5",name:"\u5723\u804c",detail:"\u6d4b\u8bd5",atk:"130",def:"235",hp:"270",sp:"80",grade:"4",cost:"180",operateNum:"3",operateType:"1",operateTime:"1.5",operateStart:"75",doubleWeight:"12",tripleWeight:"8",outfit:"s_02"},{ID:"10",star:"1",name:"\u6b7b\u9a91",detail:"\u6d4b\u8bd5",atk:"75",def:"10",hp:"50",sp:"25",grade:"4",cost:"8",operateNum:"2",operateType:"1",operateTime:"1",operateStart:"70",doubleWeight:"4",tripleWeight:"1",outfit:"s_11"},{ID:"10",star:"2",name:"\u6b7b\u9a91",detail:"\u6d4b\u8bd5",atk:"120",def:"15",hp:"88",sp:"50",grade:"4",cost:"15",operateNum:"2",operateType:"1",operateTime:"1",operateStart:"70",doubleWeight:"5",tripleWeight:"2",outfit:"s_11"},{ID:"10",star:"3",name:"\u6b7b\u9a91",detail:"\u6d4b\u8bd5",atk:"165",def:"20",hp:"126",sp:"75",grade:"4",cost:"60",operateNum:"2",operateType:"1",operateTime:"0.75",operateStart:"70",doubleWeight:"7",tripleWeight:"4",outfit:"s_11"},{ID:"10",star:"4",name:"\u6b7b\u9a91",detail:"\u6d4b\u8bd5",atk:"210",def:"25",hp:"164",sp:"100",grade:"4",cost:"120",operateNum:"2",operateType:"1",operateTime:"0.75",operateStart:"70",doubleWeight:"11",tripleWeight:"8",outfit:"s_11"},{ID:"10",star:"5",name:"\u6b7b\u9a91",detail:"\u6d4b\u8bd5",atk:"255",def:"30",hp:"207",sp:"125",grade:"4",cost:"180",operateNum:"3",operateType:"1",operateTime:"0.5",operateStart:"70",doubleWeight:"15",tripleWeight:"12",outfit:"s_11"}],relive:[{grade:"1",time:"60"},{grade:"2",time:"120"},{grade:"3",time:"300"},{grade:"4",time:"900"},{grade:"5",time:"1800"}],heroPrice:{1:50,2:100,3:300,4:600,5:1e3},gradeBg:["lv0","lv1","lv2","lv3","lv4"],getHero:function(t,e){for(var i=0;i<this.hero.length;i++)if(this.hero[i].ID==t&&this.hero[i].star==e)return this.hero[i];return null},getRelive:function(t){for(var e=0;e<this.relive.length;e++)if(this.relive[e].grade==t)return this.relive[e];return null},buffContent:[{name:"\u8f7b\u76c8",content:"\u7ed9\u81ea\u5df1\u52a0\u901f"},{name:"\u8fdf\u7f13",content:"\u8ba9\u5bf9\u65b9\u51cf\u901f"},{name:"\u5f3a\u58ee",content:"\u7ed9\u81ea\u5df1\u52a0\u8840"},{name:"\u575a\u56fa",content:"\u7ed9\u81ea\u5df1\u52a0\u9632"},{name:"\u7834\u7532",content:"\u7ed9\u5bf9\u65b9\u51cf\u9632"},{name:"\u950b\u5229",content:"\u7ed9\u81ea\u5df1\u52a0\u653b"},{name:"\u5f31\u5316",content:"\u7ed9\u5bf9\u65b9\u51cf\u653b"}],buff:[{id:"1",hp:"35",atk:"15",def:"40",sp:"10",slow:"5",dropDef:"25",dropAtk:"5"}],summon:[{id:"1",star:"95|5",cost:"900"},{id:"2",star:"75|20|5",cost:"3000"},{id:"3",star:"50|30|18|2",cost:"6000"},{id:"4",star:"0|58|28|12|2",cost:"10000"},{id:"5",star:"0|0|50|35|15",cost:"18000"}],chest:[{lv:"1",rate:"6",max:"1000",cost:"1"},{lv:"2",rate:"5",max:"2000",cost:"2"},{lv:"3",rate:"5",max:"3000",cost:"3"},{lv:"4",rate:"5",max:"4000",cost:"4"},{lv:"5",rate:"15",max:"6000",cost:"6"},{lv:"6",rate:"15",max:"8000",cost:"8"},{lv:"7",rate:"15",max:"10000",cost:"10"},{lv:"8",rate:"15",max:"12000",cost:"12"},{lv:"9",rate:"25",max:"15000",cost:"16"},{lv:"10",rate:"25",max:"18000",cost:"20"},{lv:"11",rate:"25",max:"21000",cost:"24"},{lv:"12",rate:"25",max:"24000",cost:"28"},{lv:"13",rate:"35",max:"28000",cost:"34"},{lv:"14",rate:"35",max:"32000",cost:"40"},{lv:"15",rate:"35",max:"36000",cost:"46"},{lv:"16",rate:"35",max:"40000",cost:"52"},{lv:"17",rate:"45",max:"45000",cost:"60"},{lv:"18",rate:"45",max:"50000",cost:"68"},{lv:"19",rate:"45",max:"55000",cost:"76"},{lv:"20",rate:"45",max:"60000",cost:"84"},{lv:"21",rate:"55",max:"66000",cost:"94"},{lv:"22",rate:"55",max:"72000",cost:"104"},{lv:"23",rate:"55",max:"78000",cost:"114"},{lv:"24",rate:"55",max:"84000",cost:"124"},{lv:"25",rate:"65",max:"71000",cost:"136"},{lv:"26",rate:"65",max:"78000",cost:"148"},{lv:"27",rate:"65",max:"85000",cost:"160"},{lv:"28",rate:"65",max:"92000",cost:"172"},{lv:"29",rate:"75",max:"100000",cost:"186"},{lv:"30",rate:"75",max:"108000",cost:"200"},{lv:"31",rate:"75",max:"116000",cost:"214"},{lv:"32",rate:"75",max:"122000",cost:"228"},{lv:"33",rate:"85",max:"131000",cost:"244"},{lv:"34",rate:"85",max:"140000",cost:"260"},{lv:"35",rate:"85",max:"149000",cost:"276"},{lv:"36",rate:"85",max:"158000",cost:"292"},{lv:"37",rate:"95",max:"168000",cost:"310"},{lv:"38",rate:"95",max:"178000",cost:"328"},{lv:"39",rate:"95",max:"188000",cost:"346"},{lv:"40",rate:"95",max:"198000",cost:"364"},{lv:"41",rate:"105",max:"209000",cost:"384"},{lv:"42",rate:"105",max:"220000",cost:"404"},{lv:"43",rate:"105",max:"231000",cost:"424"},{lv:"44",rate:"105",max:"242000",cost:"444"},{lv:"45",rate:"115",max:"254000",cost:"466"},{lv:"46",rate:"115",max:"276000",cost:"488"},{lv:"47",rate:"115",max:"298000",cost:"510"},{lv:"48",rate:"115",max:"320000",cost:"532"},{lv:"49",rate:"125",max:"343000",cost:"556"},{lv:"50",rate:"125",max:"366000",cost:"580"},{lv:"51",rate:"125",max:"389000",cost:"604"},{lv:"52",rate:"125",max:"412000",cost:"628"}],draw:[{idx:"1",reward:"300|0",rate:"25"},{idx:"2",reward:"0|5",rate:"12"},{idx:"3",reward:"900|0",rate:"20"},{idx:"4",reward:"0|10",rate:"4"},{idx:"5",reward:"1500|0",rate:"15"},{idx:"6",reward:"2100|0",rate:"10"},{idx:"7",reward:"0|15",rate:"2"},{idx:"8",reward:"2700|0",rate:"12"}],sign:[{day:"1",reward:"200|0|0"},{day:"2",reward:"200|0|0"},{day:"3",reward:"200|0|0"},{day:"4",reward:"200|0|0"},{day:"5",reward:"200|0|0"},{day:"6",reward:"200|0|0"},{day:"7",reward:"200|0|0"},{day:"8",reward:"200|0|0"}],friend:[{num:"1",reward:"10"},{num:"3",reward:"20"},{num:"5",reward:"30"},{num:"7",reward:"40"},{num:"10",reward:"50"}],battleAddition:[1,2,2.5,3]},cc._RF.pop()},{}],gameMgr:[function(t,e,i){"use strict";var a;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"dc1e4FSLmxALYJlNoKtVBu7","gameMgr");var s=t("../common/config"),o=t("../common/gameConfig"),r=t("../manager/request"),h=t("../manager/time"),c=(t("../platform/launch"),t("../manager/audio")),l=t("../manager/ui"),d=t("../data/userdata"),p=t("../data/gamedata"),m=t("../data/gametype"),f=t("../common/util"),g=t("../manager/event"),u=(l=t("../manager/ui"),n(a={login:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];console.log("login"),e&&l.showLoading({title:"\u767b\u5f55\u4e2d"});var i=this;if(WECHATGAME||QQPLAY){var a=platform.getLaunchOptionsSync().query.channel;void 0==a&&(a=""),platform.login({success:function(t){console.log("res.code:"+t.code);var e={Code:t.code};QQPLAY&&(e={QQCode:t.code}),r.post(s.configUrl.url,e,function(t){if(0==t.Result){console.log("Get OpenID:"+t.Member.OpenID),d.openid=t.Member.OpenID,t.Member.HeroStr=t.Member.HeroStr.replace("\\",""),t.Member.SuzerainStr=t.Member.SuzerainStr.replace("\\",""),t.Member.Task=t.Member.Task.replace("\\",""),p.drawNum=parseInt(t.Member.LuckDrawCount),p.battleValue=t.Member.CombatValue,console.log(p.battleValue);for(var e=t.Member.SignStr.split(","),a=0;a<e.length;a++)p.signArray[a]=1==parseInt(e[a]);""==t.Member.HeroStr?p.initHeroData():p.heroData=JSON.parse(t.Member.HeroStr),""==t.Member.SuzerainStr?p.initMasterData():p.masterData=JSON.parse(t.Member.SuzerainStr),""==t.Member.Task?p.initTaskData():p.taskData=JSON.parse(t.Member.Task),p.getGuideData(),platform.getUserInfo({lang:"zh_CN",success:function(t){console.log(t),d.isGetUserData=!0,d.nickname=t.userInfo.nickName,d.icon=t.userInfo.avatarUrl,i.updateUserInfo()},fail:function(t){console.log("\u6388\u6743\u5931\u8d25"),d.isGetUserData=!1,d.userInfoBtn=wx.createUserInfoButton({type:"image",image:"",style:{left:0,top:0,width:p.screenWidth,height:p.screenHeight}}),d.userInfoBtn.onTap(function(t){d.userInfoBtn.hide(),d.isGetUserData=!0,d.nickname=t.userInfo.nickName,d.icon=t.userInfo.avatarUrl,i.updateUserInfo()})}})}})},fail:function(t){l.showFloatTip("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")},complete:function(){l.hideLoading()}})}},getGameControl:function(){var t={AppID:s.appID};r.post(s.configUrl.control,t,function(t){console.log(t);var e=t.GameControlInfo;p.control.showGamelist=1==parseInt(e.ShowGameList),p.control.bannerRefreshTime=parseInt(e.RefreshTime),p.control.homeBannerRatio=parseInt(e.Banner),p.control.showMore=1==parseInt(e.Recharge),p.control.uglyShare=1==parseInt(e.Share),s.netversion=parseInt(e.Edition),e.Edition>s.localversion&&(p.control.uglyShare=!0)})},getShareContent:function(){var t={AppID:s.appID};r.post(s.configUrl.share,t,function(t){p.shareData=new Array;for(var e=0;e<t.Copywriting.length;e++){var i={text:t.Copywriting[e].Text,img:t.Copywriting[e].Img};p.shareData.push(i)}console.log(p.shareData)})},rehandleHeroData:function(){for(var t=0;t<p.heroData.length;t++)if(1==p.heroData[t].isDead){var e=o.getHero(p.heroData[t].id,p.heroData[t].star).grade,i=o.getRelive(e).time;h.now()-p.heroData[t].deadTime>i&&(p.heroData[t].isDead=!1)}},getHeroReliveTime:function(t){var e=this.findHero(t);if(0==e.isDead)return 0;var i=o.getHero(e.id,e.star).grade;return o.getRelive(i).time-(h.now()-e.deadTime)},sortHeroData:function(){p.heroData.length<=1||p.heroData.sort(function(t,e){if(t.isDead!=e.isDead)return 0==t.isDead?-1:1;if(t.id!=e.id)return t.id-e.id;var i=o.getHero(t.id,t.star),a=o.getHero(e.id,e.star);return i.grade!=a.grade?a.grade-i.grade:t.star!=e.star?e.star-t.star:a.atk-i.atk})},saveHero:function(){if(WECHATGAME||QQPLAY){var t=JSON.stringify(p.heroData);console.log(t);var e={UpdateHero:d.openid+"|"+t};r.post(s.configUrl.url,e,function(t){0==t.Result&&console.log("\u82f1\u96c4\u6570\u636e\u4fdd\u5b58\u6210\u529f")})}},reliveHero:function(t){console.log("relive hero:"+t);var e=this.findHero(t);null==e&&console.error(t),e.isDead&&(e.isDead=!1,this.saveHero(),g.emit(m.eventType.HERO))},isHeroDead:function(t){return this.findHero(t).isDead},saveTask:function(){if(WECHATGAME||QQPLAY){var t=JSON.stringify(p.taskData),e={UpdateTask:d.openid+"|"+t};r.post(s.configUrl.url,e,function(t){0==t.Result&&console.log("\u4efb\u52a1\u6570\u636e\u4fdd\u5b58\u6210\u529f")})}},saveMaster:function(){if(WECHATGAME||QQPLAY){var t=JSON.stringify(p.masterData),e={UpdateSuzerain:d.openid+"|"+t};r.post(s.configUrl.url,e,function(t){0==t.Result&&console.log("\u9886\u4e3b\u6570\u636e\u4fdd\u5b58\u6210\u529f")})}},draw:function(t){if(WECHATGAME||QQPLAY){if(p.drawNum<=0)return void l.showFloatTip("\u62bd\u5956\u6b21\u6570\u5df2\u7528\u5b8c~");var e={LuckDraw:d.openid};r.post(s.configUrl.url,e,function(e){if(0==e.Result){var i=parseInt(e.LuckDrawType);p.drawNum=parseInt(e.LuckDrawCount),t&&t(i)}})}},addDrawNum:function(){if(WECHATGAME||QQPLAY){var t={AddLuckDrawCount:d.openid};r.post(s.configUrl.url,t,function(t){0==t.Result&&(p.drawNum=parseInt(t.LuckDrawCount),g.emit(m.eventType.UpdateDrawNum),g.emit(m.eventType.RedTip))})}},Delete:function(){p.resetDataKey();var t={ClearUser:d.openid};r.post(s.configUrl.url,t,function(){this.clearChestData(),l.showFloatTip("\u91cd\u542f\u540e\u751f\u6548")}.bind(this))},getMasterBattleValue:function(){for(var t=0,e=0;e<p.heroData.length;e++){var i=o.getHero(p.heroData[e].id,p.heroData[e].star);t+=parseInt(i.atk)}return t},getChestData:function(){var t=cc.sys.localStorage.getItem("chest191211_8");""===t||null===t?p.chestData.time=h.now():this.chestData=JSON.parse(t)},saveChestData:function(){cc.sys.localStorage.setItem("chest191211_8",JSON.stringify(p.chestData))},initChestData:function(){this.getChestData(),this.settleChest()},settleChest:function(){console.log(h.now()),console.log(p.chestData.time);var t=parseInt(h.now()-p.chestData.time);console.log("second:"+t),p.chestData.time=h.now(),p.chestData.storage+=parseInt(t/5*o.chest[p.chestData.lv].rate),p.chestData.storage+=p.chestData.cache,p.chestData.storage>=o.chest[p.chestData.lv].max&&(p.chestData.storage=o.chest[p.chestData.lv].max),this.saveChestData()},clearChestData:function(){cc.sys.localStorage.setItem("chest191211_8","")},increaseChest:function(){p.chestData.cache+=parseInt(o.chest[p.chestData.lv].rate),this.saveChestData()},upgradeBuff:function(t,e){p.masterData.buffPoint>0?(p.masterData.buffPoint--,p.masterData.buffLv[t]++,-1==p.masterData.selectBuff&&(p.masterData.selectBuff=t),g.emit(m.eventType.BUFF),c.playEffect(m.SoundType.skillUp),g.emit(m.eventType.RedTip),this.saveMaster(),e&&e()):l.showFloatTip("\u6280\u80fd\u70b9\u6570\u4e0d\u8db3")},selectBuff:function(t){p.masterData.selectBuff==t?p.masterData.selectBuff=-1:p.masterData.selectBuff=t,g.emit(m.eventType.BUFF)},sellHero:function(t){var e=0,i=!1;if(t.length!=p.heroData.length){for(var a=0;a<t[a];a++){var n=this.findHero(t[a]);e+=this.getHeroPrice(n),n.star>3&&(i=!0)}var s=this,o=function(){s.AddGold(e);for(var i=0;i<t.length;i++)for(var a=0;a<p.heroData.length;a++)if(p.heroData[a].uid==t[i]){p.heroData.splice(a,1),a--;break}console.log(p.heroData),g.emit(m.eventType.HERO),g.emit(m.eventType.GOLD),s.saveHero(),s.saveMaster(),c.playEffect(m.SoundType.sell)};i?l.showMessageBox({title:"\u63d0\u793a",content:"\u542b\u6709\u9ad8\u661f\u82f1\u96c4,\u662f\u5426\u51fa\u552e\uff1f",sure:o,showCancle:!0}):o()}else l.showFloatTip("\u81f3\u5c11\u62e5\u6709\u4e00\u4e2a\u82f1\u96c4")},composeHero:function(t){if(!(t.length<=1)){var e=this.findHero(t[0]);if(null!=e){for(var i=e.id,a=0,n=1;n<t.length;n++){var s=this.findHero(t[n]);if(null==s)return void l.showFloatTip("\u627e\u4e0d\u5230\u82f1\u96c4uid:"+t[n]);if(s.id!=i)return void l.showFloatTip("\u4e0d\u540c\u7684\u82f1\u96c4\u4e0d\u80fd\u5408\u6210");for(var r=1;r<s.star;r++){var h=o.getHero(s.id,r);a+=parseInt(h.cost)}a+=parseInt(s.progress+1),this.deleteHero(t[n])}for(e.progress+=parseInt(a);this.checkHeroCanUpgrade(e);)this.heroUpgrade(e);this.saveHero(),g.emit(m.eventType.HERO)}else l.showFloatTip("\u627e\u4e0d\u5230\u82f1\u96c4uid:"+t[0])}},findHero:function(t){for(var e=0;e<p.heroData.length;e++)if(p.heroData[e].uid==t)return p.heroData[e];return null},deleteHero:function(t){console.log("\u5220\u9664\u82f1\u96c4:"+t);for(var e=0;e<p.heroData.length;e++)if(p.heroData[e].uid==t)return void p.heroData.splice(e,1)},checkHeroCanUpgrade:function(t){if(t.star>=5)return!1;var e=o.getHero(t.id,t.star);return t.progress>=e.cost||void 0},heroUpgrade:function(t){var e=o.getHero(t.id,t.star);t.progress>=e.cost&&(t.progress-=e.cost,t.star++)},getHeroPrice:function(t){var e=parseInt(o.getHero(t.id,1).grade),i=0;console.log("\u82f1\u96c4\u661f\u7ea7:"+t.star);for(var a=1;a<t.star;a++){var n=o.getHero(t.id,a);i+=parseInt(n.cost)}return i+=parseInt(t.progress+1),o.heroPrice[e]*i},preSummon:function(t,e){var i=parseInt(t);p.masterData.summonCount[i]++,console.log(p.masterData.summonCount);for(var a=new Array,n=0;n<5;n++){for(var s=o.summon[t].star.split("|"),r=0,h=0;h<s.length;h++)s[h]=parseInt(s[h]),r+=s[h];for(h=0;h<s.length;h++)h>0&&(s[h]+=s[h-1]);var c=parseInt(Math.random()*r),l=0;for(h=0;h<s.length;h++)if(c<s[h]){l=h+1;break}var d=this.randomHeroId();if(0!=d){var m={id:d,star:l};a.push(m)}}e&&e(a)},randomHeroId:function(){for(var t=function(t,i){for(var a=0;a<e.length;a++)if(e[a]==t)return!0;return!1},e=new Array,i=0;i<o.hero.length;i++)t(o.hero[i].ID)||e.push(o.hero[i].ID);var a=parseInt(Math.random()*e.length);return e[a]},getHeroNum:function(){for(var t=new Array,e=0;e<p.heroData.length;e++)t.push(p.heroData[e].id);return(t=f.unique(t)).length},getHeroQualityNum:function(t){for(var e=0,i=0;i<p.heroData.length;i++){o.getHero(p.heroData[i].id,p.heroData[i].star).grade>=t&&e++}return e},getSummonCount:function(t){return t-=1,p.masterData.summonCount[t]},getHeroMaxStar:function(t){for(var e=0,i=0;i<p.heroData.length;i++)p.heroData[i].id==t&&p.heroData[i].star>e&&(e=p.heroData[i].star);return e},checkTaskFinish:function(t){console.log("taskId:"+t);var e=o.findTask(t);switch(parseInt(e.type)){case 1:var i=parseInt(e.num.split("|")[0]);if(this.getHeroNum()>=i)return!0;break;case 2:i=parseInt(e.num.split("|")[0]);var a=e.num.split("|")[1];if(this.getHeroQualityNum(a)>=i)return!0;break;case 3:i=parseInt(e.num.split("|")[0]);var n=e.num.split("|")[1];if(this.getSummonCount(n)>=i)return!0;break;case 4:i=parseInt(e.num.split("|")[0]);if(p.masterData.lv>=i)return!0;break;case 5:i=parseInt(e.num.split("|")[1]),n=e.num.split("|")[0];if(this.getHeroMaxStar(n)>=i)return!0;break;case 6:i=parseInt(e.num.split("|")[0]);if(p.masterData.lvIdx>i)return!0}return!1},checkCanDraw:function(){return console.log("\u62bd\u5956\u6b21\u6570:"+p.drawNum),p.drawNum>0},checkCanSign:function(){var t=(new Date).getDay();0==t&&(t=7),t--;for(var e=0;e<p.signArray.length;e++)if(0==p.signArray[e]&&e<=t)return!0;return!1},checkChestCanUp:function(){var t=o.chest[p.chestData.lv].cost;return p.masterData.gold>=t},checkSkillCanUpgrade:function(){return p.masterData.buffPoint>0}},"checkHeroCanUpgrade",function(){return!1}),n(a,"finishTask",function(t,e){if(this.checkTaskFinish(t))for(var i=0;i<p.taskData.length;i++)if(p.taskData[i].id==t){if(1==p.taskData[i].finish)return void l.showFloatTip("\u5df2\u7ecf\u5b8c\u6210\u8fc7\u8be5\u4efb\u52a1");p.taskData[i].finish=1,c.playEffect(m.SoundType.finishTsk);var a=o.findTask(t);p.masterData.exp++,this.addDiamond(a.reward),g.emit(m.eventType.Diamond),p.masterData.exp>=4&&(this.levelUp(),p.masterData.exp=0,g.emit(m.eventType.Lvup)),g.emit(m.eventType.RedTip),console.log("\u4efb\u52a1\u5b8c\u6210\uff0c\u53d1\u9001\u4e8b\u4ef6"),this.saveTask(),null!=e&&e()}}),n(a,"checkHasTaskFinish",function(){for(var t=0;t<p.taskData.length;t++)if(1!=p.taskData[t].finish&&this.checkTaskFinish(p.taskData[t].id))return!0;return!1}),n(a,"levelUp",function(){p.masterData.lv++,p.masterData.buffPoint++,g.emit(m.eventType.RedTip),this.saveMaster()}),n(a,"checkTaskAllFinish",function(){for(var t=0;t<p.taskData.length;t++)if(0==p.taskData[t].finish)return;var e=p.taskData[0].id+4;p.taskData=new Array;for(t=0;t<4;t++)p.taskData.push({id:parseInt(e+t),finish:0});this.levelUp(),this.saveTask(),g.emit(m.eventType.RefrshTask)}),n(a,"sign",function(t){var e=this;if(!p.signArray[t]){var i={RepairSign:d.openid+"|"+t};r.post(s.configUrl.url,i,function(i){if(0==i.Result){var a=i.SignStr.split(",");p.signArray=new Array;for(var n=0;n<a.length;n++)p.signArray.push(1==parseInt(a[n]));var s=o.sign[t].reward.split("|")[0],r=o.sign[t].reward.split("|")[1];o.sign[t].reward.split("|")[2];s>0&&e.AddGold(s),r>0&&e.addDiamond(r),g.emit(m.eventType.RedTip),g.emit(m.eventType.Sign),g.emit(m.eventType.RedTip)}})}}),n(a,"AddGold",function(t){p.masterData.gold+=parseInt(t),t>0&&l.show("reward",{type:1,num:t}),this.saveMaster(),g.emit(m.eventType.GOLD),g.emit(m.eventType.RedTip)}),n(a,"addDiamond",function(t){p.masterData.gem+=parseInt(t),t>0&&l.show("reward",{type:2,num:t}),this.saveMaster(),g.emit(m.eventType.Diamond),g.emit(m.eventType.RedTip)}),n(a,"updateBattleValue",function(){var t={UpdateCombatValue:d.openid+"|"+this.getMasterBattleValue()};r.post(s.configUrl.url,t,function(t){0==t.Result&&(p.battleValue=t.CombatValue)})}),n(a,"updateUserInfo",function(){var t=this,e={UpdateUserInfo:d.openid+"|"+d.nickname+"|"+d.icon};r.post(s.configUrl.url,e,function(e){0==e.Result&&(console.log("\u66f4\u65b0\u73a9\u5bb6\u6570\u636e\u6210\u529f"),0==p.battleValue&&t.updateBattleValue())})}),n(a,"getRankingData",function(t){if(WECHATGAME){r.post(s.configUrl.url,{GetRanking:""},function(e){if(console.log(e),0==e.Result){p.rankData=new Array;for(var i=0;i<e.Ranking.length;i++)p.rankData.push(e.Ranking[i]);t&&t()}})}else{var e=JSON.parse('{"Result":"0","Ranking":[{"OpenID":"obBqq5Z1Lrq3Sy1ahGiYIme4Ax2M","Head":"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxto237bq2j302a02a743.jpg","Name":"\u6b87\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000","Score":45000056,"CreateTime":"2019-12-08T01:59:44.9870929+08:00","Index":1},{"OpenID":"obBqq5ZB56Ot7g5OA5KFNt8wg_R4","Head":"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxto4jdpibj302a02aa9u.jpg","Name":"\u62fe\u8d30","Score":387,"CreateTime":"2019-11-16T18:38:26.813","Index":2},{"OpenID":"obBqq5RqfxY4mkbbt2i9Ii1gWdgs","Head":"https://wx4.sinaimg.cn/mw690/006ys9Gfgy1fxto27b5pqj302a02aa9u.jpg","Name":"Ken","Score":50,"CreateTime":"2019-12-27T12:43:21.9363307+08:00","Index":72},{"OpenID":"obBqq5bxifjYfa-Po7ER8ELx5oYo","Head":"https://wx3.sinaimg.cn/mw690/006ys9Gfgy1fxto0oqthuj302a02aa9u.jpg","Name":"\u4e0d\u793c\u4e0d\u624d","Score":46,"CreateTime":"2019-11-22T09:59:30.237","Index":100}]}');if(0==e.Result){p.rankData=new Array;for(var i=0;i<e.Ranking.length;i++)p.rankData.push(e.Ranking[i]);t&&t()}}}),n(a,"checkSelectHeroLegal",function(){for(var t=0;t<p.seleHeroList.length;t++){if(-1!=p.seleHeroList[t])null!=this.findHero(p.seleHeroList[t])?this.findHero(p.seleHeroList[t]).isDead&&(p.seleHeroList[t]=-1):p.seleHeroList[t]=-1}}),n(a,"heroDead",function(t){var e=this.findHero(t);null!=e&&(e.isDead=!0,e.deadTime=h.now())}),n(a,"getInviteReward",function(){for(var t=0;t<p.masterData.inviteReward.length;t++)if(0==p.masterData.inviteReward[t]&&p.masterData.friendList.length>=parseInt(o.friend[t].num))return this.addDiamond(parseInt(o.friend[t].reward)),p.masterData.inviteReward[t]=1,this.saveMaster(),void g.emit(m.eventType.Friend)}),n(a,"chestUpgrade",function(){var t=o.chest[p.chestData.lv].cost;p.masterData.gold>=t?(p.chestData.lv++,p.masterData.gold-=t,this.saveChestData(),this.saveMaster(),g.emit(m.eventType.ChestUp),g.emit(m.eventType.GOLD),g.emit(m.eventType.RedTip)):l.showFloatTip("\u91d1\u5e01\u4e0d\u8db3")}),a);e.exports=u,cc._RF.pop()},{"../common/config":"config","../common/gameConfig":"gameConfig","../common/util":"util","../data/gamedata":"gamedata","../data/gametype":"gametype","../data/userdata":"userdata","../manager/audio":"audio","../manager/event":"event","../manager/request":"request","../manager/time":"time","../manager/ui":"ui","../platform/launch":"launch"}],gamedata:[function(t,e,i){"use strict";cc._RF.push(e,"4be3d8iSphEf74/5PPh1Hoo","gamedata");var a={shareData:new Array,gamelist:new Array,control:{showMore:!1,showGamelist:!1,bannerRefreshTime:0,homeBannerRatio:0,uglyShare:!1},dataKey:"200113_01",recorder:null,isRecord:!1,recordTimer:0,heroData:"",masterData:{lv:0,gold:0,gem:0,buffLv:[0,0,0,0,0,0,0],buffPoint:0,selectBuff:-1,lvIdx:1,summonCount:[0,0,0,0,0],inviteReward:[0,0,0,0,0],friendList:new Array,exp:0},taskData:[],chestData:{lv:0,cache:0,storage:0,time:0},friendReward:[0,0,0,0,0],friendNum:0,isInvite:!1,inviteId:0,guideData:{},seleHeroList:new Array,drawNum:0,signArray:[0,0,0,0,0,0,0],battleValue:0,screenWidth:0,screenHeight:0,rankData:new Array,maxSpeed:1e5,getHeroData:function(){var t=cc.sys.localStorage.getItem("hero"+this.dataKey);""===t||null===t?this.initHeroData():this.heroData=JSON.parse(t)},initHeroData:function(){if(console.log("init heroData"),this.heroData=new Array,WECHATGAME){var t={uid:this.genHeroUId(),id:1,star:1,progress:20,isDead:!1,deadTime:1576736720};this.heroData.push(t)}else{var e={uid:this.genHeroUId(),id:7,star:4,progress:4,isDead:!1,deadTime:1576735730};this.heroData.push(e)}},initHeroUID:function(){this.heroUId=cc.sys.localStorage.getItem("heroUid"+this.dataKey),""===this.heroUId||null===this.heroUId?this.heroUId=1:this.heroUId=parseInt(this.heroUId),console.log("heroUid:"+this.heroUId)},genHeroUId:function(){return this.heroUId++,cc.sys.localStorage.setItem("heroUid"+this.dataKey,this.heroUId),this.heroUId},setHeroData:function(){cc.sys.localStorage.setItem("hero"+this.dataKey,JSON.stringify(this.heroData))},getSelectHeroList:function(){var t=cc.sys.localStorage.getItem("selectHero"+this.dataKey);""===t||null===t?(this.seleHeroList=new Array,this.seleHeroList.push(-1),this.seleHeroList.push(-1)):this.seleHeroList=JSON.parse(t)},saveSelectHeroList:function(){cc.sys.localStorage.setItem("selectHero"+this.dataKey,JSON.stringify(this.seleHeroList))},getMasterData:function(){var t=cc.sys.localStorage.getItem("master"+this.dataKey);""===t||null==t?this.initMasterData():this.masterData=JSON.parse(t)},initMasterData:function(){this.masterData={lv:0,gold:0,gem:0,buffLv:[0,0,0,0,0,0,0],buffPoint:0,lvIdx:2,selectBuff:-1,summonCount:[0,0,0,0,0],inviteReward:[0,0,0,0,0],friendList:new Array,exp:0}},setMasterData:function(){cc.sys.localStorage.setItem("master"+this.dataKey,JSON.stringify(this.masterData))},getTaskData:function(){var t=cc.sys.localStorage.getItem("task"+this.dataKey);""===t||null===t?this.initTaskData():this.taskData=JSON.parse(t)},initTaskData:function(){this.taskData=[{id:1,finish:0},{id:2,finish:0},{id:3,finish:0},{id:4,finish:0}],this.taskData.lv=0,this.taskData.progress=0},initGuideData:function(){this.guideData={isGuideSummon:!0,isGuideSell:!0,isGuideCompose:!0,isGuideFight:!0}},getGuideData:function(){var t=cc.sys.localStorage.getItem("guide"+this.dataKey);""===t||null===t?this.initGuideData():this.guideData=JSON.parse(t)},saveGuideData:function(){cc.sys.localStorage.setItem("guide"+this.dataKey,JSON.stringify(this.guideData))},initDataKey:function(){var t=cc.sys.localStorage.getItem("datakey");this.dataKey=""===t||null===t?(new Date).getTime()/1e3:parseInt(t)},resetDataKey:function(){cc.sys.localStorage.setItem("datakey",(new Date).getTime()/1e3)}};e.exports=a,cc._RF.pop()},{}],gamelist:[function(t,e,i){"use strict";cc._RF.push(e,"340edhZZOpD4bwrQO1CpiN7","gamelist");var a=t("../app");t("querystring");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.board=this.node.findChild("board"),this.arrowBtn=this.board.findChild("arrow"),this.closeBtn=this.board.findChild("close"),this.content=this.board.findChild("scroll/view/content"),this.item=this.content.findChild("item"),this.item.active=!1,this.playBreathAnima(),this.register()},playBreathAnima:function(){var t=cc.repeatForever(cc.sequence(cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.2,1,1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.2,1,1)));this.arrowBtn.runAction(t)},register:function(){var t=this;this.board.findChild("arrow").on("click",this.onClickArrow,this),this.board.findChild("close").on("click",function(){t.board.x=-720,t.closeBtn.active=!1,t.arrowBtn.active=!0}),a.event.on(a.gametype.eventType.SHOWGAMELIST,function(){t.onClickArrow()},this)},onClickArrow:function(){this.board.x=0,this.arrowBtn.active=!1,this.closeBtn.active=!0},start:function(){this.everrefresh=!1},update:function(t){},onShow:function(){if(!QQPLAY)return!a.config.control.gamelistEnable||a.config.localversion>a.config.netversion?(console.log("\u9690\u85cf\u5217\u8868"),void a.ui.hide("gamelist")):void this.refresh();a.ui.hide("gamelist")},refresh:function(){if(console.log(a.gamedata.gamelist),0!=a.gamedata.gamelist.length){for(var t=0;t<a.gamedata.gamelist.length;++t)if(a.gamedata.gamelist[t].appid!=a.config.appID){var e=t+"",i=this.content.findChild(e);void 0==i&&((i=cc.instantiate(this.item)).name=e,this.content.addChild(i),i.on("click",this.onClickIcon,this)),i.active=!0,i.findChild("name").getComponent(cc.Label).string=a.gamedata.gamelist[t].name,a.util.createIcon(i.findChild("icon").getComponent(cc.Sprite),a.gamedata.gamelist[t].icon)}}else a.ui.hide("gamelist")},onClickIcon:function(t){var e=parseInt(t.target.name),i=a.gamedata.gamelist[e],n=i.appid,s=i.path,o=t.target;"undefined"!=typeof wx&&wx.navigateToMiniProgram({appId:n,path:s,success:function(t){o.findChild("red").active=!1,console.log("\u8f6c\u8df3\u6210\u529f");var e=n,i=cc.sys.localStorage.getItem(e);if(void 0===i||""===i){var s={AppID:a.config.appID+"|"+n};a.request.post(a.config.configUrl.gamelist,s,function(t){}),cc.sys.localStorage.setItem(e,"1")}},fail:function(t){console.log(t)}})}}),cc._RF.pop()},{"../app":"app",querystring:3}],gametype:[function(t,e,i){"use strict";cc._RF.push(e,"21973vec8VP3anKfmQ0baNs","gametype");e.exports={eventType:{LOGIN:"login",GOLD:"refreshGold",BUFF:"buff",RELIVE:"relive",GETGAMELIST:"getGameList",SHOWGAMELIST:"showGamelist",SHOWMOREBTN:"showMoreBtn",HIDEMOREBTN:"hideMoreBtn",HERO:"refreshHero",MASk:"mask",GENGOLD:"genGold",RoundBLoodFLoat:"RoundBLoodFLoat",Operate:"operate",FailOperate:"failOperate",SelectHeroChange:"selectHeroChange",RoundFinish:"RoundFinish",CharacterDead:"CharacterDead",UpdateDrawNum:"updateDrawNum",HideInfo:"hideInfo",ShowInfo:"showInfo",RefrshTask:"refreshTask",Diamond:"diamond",Lvup:"lvup",Sign:"sign",Reward:"reward",Friend:"friend",ChestUp:"chestUp",RedTip:"redtip"},RoleType:{Default:0,Hero:1,Monster:2},GameState:{Guide:0,Prepare:1,Fighting:2,Opearte:3,Offensive:4,Defensive:5,Transition:6,Fail:7,Win:8},GuideState:{},SoundType:{click:"button",countdown:"321",go:"go",hit:"hit",dead:"dead",gold:"gold",touchGold:"touchGold",drawDingDing:"drawDingDingDing",duang:"duang",win:"win",fail:"fail",defend:"defend",atk:"atk",finishTsk:"missionComplete",goldToChest:"goldToChest",sell:"sell",skillUp:"skillUp",floorXiu:"floorXiu",reward:"getReward"},BgmType:{start:"startBgm",menu:"menuBgm",fight:"fightBgm"},BuffType:{SpeedUp:0,SpeedDown:1,HpUp:2,DefUp:3,DefDown:4,AtkUp:5,AtkDown:6}},cc._RF.pop()},{}],guess:[function(t,e,i){"use strict";cc._RF.push(e,"4a3dcAp3llHlYDBKFVDnTdE","guess");var a=t("../app");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.item=this.node.findChild("content/item"),this.content=this.node.findChild("content"),this.bg=this.node.findChild("bg"),this.itemlist=new Array,this.itemlist.push(this.item),this.register(),this.refreshDelta=30,this.timer=this.refreshDelta;var t=cc.director.getWinSizeInPixels();this.offsetY=(t.height-1280)/2,this.content.y-=this.offsetY,this.bg.y-=this.offsetY},register:function(){this.item.on("click",this.onClickItem,this)},start:function(){},onShow:function(t){if(QQPLAY)a.ui.hide("guess");else if(a.config.control.gamelistEnable&&0!=a.gamedata.gamelist.length){for(var e=new Array,i=new Array,n=0;n<a.gamedata.gamelist.length;n++)1==a.gamedata.gamelist[n].recommend&&i.push(n);for(;i.length>0;){var s=Math.floor(i.length*Math.random());e.push(i.splice(s,1))}var o=Math.floor(e.length/2);for(n=0;n<e.length;n++){var r=this.itemlist[n];void 0==r&&((r=cc.instantiate(this.item)).parent=this.content,this.itemlist.push(r),r.on("click",this.onClickItem,this)),r.active=!0;s=e[n];r.name=""+s,n==o?(r.scaleX=1.15,r.scaleY=1.15,r.findChild("tip").active=!0):(r.scaleX=1,r.scaleY=1,r.findChild("tip").active=!1),r.findChild("name").getComponent(cc.Label).string=a.gamedata.gamelist[s].name,a.util.createIcon(r.findChild("icon").getComponent(cc.Sprite),a.gamedata.gamelist[s].icon)}}else a.ui.hide("guess")},onClickItem:function(t){var e=parseInt(t.target.name),i=a.gamedata.gamelist[e],n=i.appid,s=i.path,o=t.target;"undefined"!=typeof wx&&wx.navigateToMiniProgram({appId:n,path:s,success:function(t){o.findChild("tip").active=!1,console.log("\u8f6c\u8df3\u6210\u529f");var e=n,i=cc.sys.localStorage.getItem(e);if(void 0===i||""===i){var s={AppID:a.config.appID+"|"+n};a.request.post(a.config.configUrl.gamelist,s,function(t){}),cc.sys.localStorage.setItem(e,"1")}},fail:function(t){console.log(t)}})},update:function(t){this.timer-=t,this.timer<=0&&(this.onShow(),this.timer=this.refreshDelta)}}),cc._RF.pop()},{"../app":"app"}],guidedata:[function(t,e,i){"use strict";cc._RF.push(e,"556f9eNHktKrZQIDFtrUGDz","guidedata");t("../app");e.exports=[],cc._RF.pop()},{"../app":"app"}],hero:[function(t,e,i){"use strict";cc._RF.push(e,"b0146rn3qZJa4tW2KRef7aE","hero");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr");t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.node.findChild("tweenContent/panel/close"),this.sellBtn=this.node.findChild("tweenContent/panel/btns/sell"),this.sellPrice=this.sellBtn.findChild("price").getComponent(cc.Label),this.composeBtn=this.node.findChild("tweenContent/panel/btns/compound"),this.totalBattle=this.node.findChild("tweenContent/panel/info/totalBattle").getComponent(cc.Label),this.fightBattle=this.node.findChild("tweenContent/panel/info/selectBattle").getComponent(cc.Label),this.itemParent=this.node.findChild("tweenContent/panel/scrollview/view/content"),this.item=this.itemParent.findChild("item"),this.itemlist=new Array,this.itemlist.push(this.item),this.item.active=!1,this.item.on("click",this.onSelect,this),this.item.findChild("covering/relive").on("click",this.onClickRelive,this),this.selectList=new Array,this.closeBtn.on("click",this.onClose,this),this.sellBtn.on("click",this.onSell,this),this.composeBtn.on("click",this.onCompose,this),n.event.on(n.gametype.eventType.HERO,this.refreshHeroList,this)},onShow:function(){n.audio.playEffect(n.gametype.SoundType.duang),this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start(),this.refreshHeroList(),this.schedule(this.updateHeroReliveTime,1)},refreshHeroList:function(){this.sellBtn.active=!1,this.composeBtn.active=!1,this.selectList=new Array;for(var t=0;t<this.itemlist.length;t++)this.itemlist[t].active=!1;this.deadHeroList=new Array,s.rehandleHeroData(),s.sortHeroData();var e=0;for(t=0;t<n.gamedata.heroData.length;t++){var i=this.itemlist[t],o=n.gameConfig.getHero(n.gamedata.heroData[t].id,n.gamedata.heroData[t].star);if(void 0===i&&((i=cc.instantiate(this.item)).parent=this.itemParent,this.itemlist.push(i),i.on("click",this.onSelect,this),i.findChild("covering/relive").on("click",this.onClickRelive,this)),i.name=""+n.gamedata.heroData[t].uid,i.active=!0,null!=o){if(e+=parseInt(o.atk),i.findChild("name").getComponent(cc.Label).string=o.name,i.findChild("hp").getComponent(cc.Label).string=o.hp,i.findChild("atk").getComponent(cc.Label).string=o.atk,i.findChild("def").getComponent(cc.Label).string=o.def,i.findChild("sp").getComponent(cc.Label).string=o.sp,i.findChild("grade").getComponent(cc.Sprite).spriteFrame=n.res.gradeSprite[o.grade-1],i.findChild("select").active=!1,0==n.gamedata.heroData[t].isDead)i.findChild("covering").active=!1;else{i.findChild("covering").active=!0;var r=s.getHeroReliveTime(n.gamedata.heroData[t].uid),h=i.findChild("covering/time").getComponent(cc.Label);h.string=a.formatTime(r),this.deadHeroList.push({uid:n.gamedata.heroData[t].uid,text:h})}i.findChild("progress").getComponent(cc.ProgressBar).progress=n.gamedata.heroData[t].progress/o.cost,5==n.gamedata.heroData[t].star?i.findChild("max").active=!0:i.findChild("max").active=!1,i.findChild("icon/hero").getComponent(sp.Skeleton).setSkin(o.outfit);for(var c=i.findChild("star"),l=1;l<=5;l++)o.star>=l?c.findChild(l+"").active=!0:c.findChild(l+"").active=!1}else i.active=!1}this.totalBattle.string="\u603b\u6218\u529b:"+e,this.fightBattle.string="\u6218\u529b: 0"},onSelect:function(t){n.audio.playEffect(n.gametype.SoundType.click);var e=parseInt(t.node.name);if(!s.isHeroDead(e)){var i=this.checkIsSelect(e);if(t.node.findChild("select").active=!i,i){for(var a=0;a<this.selectList.length;a++)if(this.selectList[a]==e){this.selectList.splice(a,1);break}}else this.selectList.push(e);this.onListChange()}},onListChange:function(){this.selectList.length>0?this.sellBtn.active=!0:(this.sellBtn.active=!1,this.fightBattle.string="\u6218\u529b: 0");for(var t=0,e=0,i=0;i<this.selectList.length;i++){var a=s.findHero(this.selectList[i]);t+=parseInt(s.getHeroPrice(a));var o=n.gameConfig.getHero(a.id,a.star);e+=parseInt(o.atk)}if(this.fightBattle.string="\u6218\u529b\uff1a"+e,this.sellPrice.string=t,this.selectList.length<=1)this.composeBtn.active=!1;else{var r=s.findHero(this.selectList[0]).id;this.composeBtn.active=!0;for(i=1;i<this.selectList.length;i++){if((a=s.findHero(this.selectList[i])).id!=r){this.composeBtn.active=!1;break}}}},checkIsSelect:function(t){for(var e=0;e<this.selectList.length;e++)if(this.selectList[e]==t)return!0;return!1},onClose:function(){n.audio.playEffect(n.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.15,{scaleX:.5,scaleY:.5},{easing:"backIn"}).call(function(){n.ui.hide("hero")}).start()},onSell:function(){n.audio.playEffect(n.gametype.SoundType.click);for(var t=new Array,e=0;e<this.selectList.length;e++)t.push(this.selectList[e]);this.selectList=new Array;for(e=0;e<this.itemlist.length;e++)this.itemlist[e].findChild("select").active=!1;s.sellHero(t),console.log("\u51fa\u552e\u6309\u94ae\u70b9\u51fb")},onCompose:function(){n.audio.playEffect(n.gametype.SoundType.click);for(var t=new Array,e=0;e<this.selectList.length;e++)t.push(this.selectList[e]);this.selectList=new Array;for(e=0;e<this.itemlist.length;e++)this.itemlist[e].findChild("select").active=!1;s.composeHero(t),console.log("\u5408\u6210\u6309\u94ae\u70b9\u51fb")},onClickRelive:function(t){n.audio.playEffect(n.gametype.SoundType.click);var e=parseInt(t.node.parent.parent.name);s.reliveHero(e)},updateHeroReliveTime:function(){for(var t=0;t<this.deadHeroList.length;t++){var e=s.getHeroReliveTime(this.deadHeroList[t].uid);if(e<=0)return void this.refreshHeroList();this.deadHeroList[t].text.string=a.formatTime(e)}},onHide:function(){this.unschedule(this.updateHeroReliveTime),s.updateBattleValue()}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],hpShow:[function(t,e,i){"use strict";cc._RF.push(e,"76bcc96dd1MyJMIF1iqir72","hpShow"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.curHpSprite=this.node.findChild("cur"),this.transitionHpSprite=this.node,this.hpTxt=this.node.findChild("txt").getComponent(cc.Label),this.orginWidth=this.node.width,this.hp=0,this.maxHp=0,this.speed=0},init:function(t){this.maxHp=t,this.hp=t,this.hpTxt.string=this.hp+"/"+this.maxHp,this.curHpSprite.width=this.orginWidth,this.transitionHpSprite.width=this.orginWidth},setHp:function(t){this.hp=t;var e=parseInt(this.hp/this.maxHp*this.orginWidth),i=this.transitionHpSprite.width-e;this.curHpSprite.width=e,this.speed=2*i,this.hpTxt.string=this.hp+"/"+this.maxHp},update:function(t){this.transitionHpSprite.width>this.curHpSprite.width&&(this.transitionHpSprite.width-=this.speed*t,this.transitionHpSprite.width<=this.curHpSprite.width&&(this.transitionHpSprite.width=this.curHpSprite.width))}}),cc._RF.pop()},{}],info:[function(t,e,i){"use strict";cc._RF.push(e,"519042XE9lPUaTDhErtna8n","info");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr"),o=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("info onload"),this.isMask=!1,this.up=this.node,this.lvTxt=this.node.findChild("lv").getComponent(cc.Label),this.head=this.node.findChild("head").getComponent(cc.Sprite),this.defaultHead=this.node.findChild("default_head"),this.nameTxt=this.node.findChild("name").getComponent(cc.Label),this.battleTxt=this.node.findChild("battle/num").getComponent(cc.Label),this.buffBg=this.node.findChild("buffBg"),this.buff=this.node.findChild("buff").getComponent(cc.Sprite),this.goldTxt=this.node.findChild("gold/num").getComponent(cc.Label),this.gemTxt=this.node.findChild("gem/num").getComponent(cc.Label),this.addGoldBtn=this.node.findChild("gold/addBtn"),this.homeBtn=this.node.findChild("homeBtn"),this.smallGoldTarget=this.node.findChild("goldPos"),this.storageGold=0,this.isMask=!1,this.smallGoldItemParent=this.node.findChild("animaGold"),this.smallGoldItem=this.smallGoldItemParent.findChild("gold"),this.smallGoldItem.active=!1,this.smallGoldPool=new Array,this.smallGoldPool.push(this.smallGoldItem),this.goldPos=this.node.findChild("goldPos"),this.register(),this.resize()},register:function(){this.homeBtn.on("click",this.onHome,this),this.addGoldBtn.on("click",this.onAddGold,this),this.defaultHead.on("click",this.onClear,this),n.event.on(o.eventType.GOLD,this.updateGoldShow,this),n.event.on(o.eventType.BUFF,this.updateBuffShow,this),n.event.on(o.eventType.GENGOLD,this.genGoldToBar,this),n.event.on(o.eventType.Diamond,this.updateGemShow,this),n.event.on(o.eventType.ShowInfo,this.showInfo,this),n.event.on(o.eventType.HideInfo,this.hideInfo,this)},onClear:function(){s.Delete()},onHome:function(){if(!this.isMask){if(n.audio.playEffect(n.gametype.SoundType.click),!n.ui.isShow("summon"))return n.ui.isShow("menu")?(n.ui.hide("menu"),n.ui.show("start"),void n.ui.hide("info")):void 0;n.ui.hide("summon")}},onAddGold:function(){s.AddGold(1e4)},resize:function(){this.offsetY=(1600-cc.winSize.height)/2,this.node.y-=this.offsetY},onShow:function(){console.log("info onshow"),this.refreshPlayInfo()},refreshPlayInfo:function(){this.lvTxt.string=n.gamedata.masterData.lv+1,this.goldTxt.string=n.gamedata.masterData.gold,this.gemTxt.string=n.gamedata.masterData.gem,this.nameTxt.string=n.userdata.nickname,this.battleTxt.string=s.getMasterBattleValue(),""!=n.userdata.icon?(this.head.node.active=!0,a.createIcon(this.head,n.userdata.icon)):this.head.node.active=!1,this.updateBuffShow()},updateBuffShow:function(){if(-1!=n.gamedata.masterData.selectBuff)switch(this.buffBg.color=new cc.Color(255,255,255),this.buff.node.active=!0,this.buff.spriteFrame=n.res.buffSprite[n.gamedata.masterData.selectBuff],n.gamedata.masterData.selectBuff){case 0:case 1:this.buffBg.color=new cc.Color(116,201,255);break;case 2:this.buffBg.color=new cc.Color(255,114,158);break;case 3:case 4:this.buffBg.color=new cc.Color(144,255,113);break;case 5:case 6:this.buffBg.color=new cc.Color(185,122,248)}else this.buff.node.active=!1},updateGoldShow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.goldTxt.string=0!=t?t:n.gamedata.masterData.gold},updateGemShow:function(){this.gemTxt.string=n.gamedata.masterData.gem},updateLvShow:function(){this.lvTxt.string=n.gamedata.masterData.lv},genGoldToBar:function(t){n.audio.playEffect(n.gametype.SoundType.goldToChest);var e=t.pos;e.y+=this.offsetY;var i=t.num,o=0,r=50;i<50?(r=i,o=1):o=parseInt(i/r);var h=e.y;this.scheduleOnce(function(){this.isMask=!1,n.gamedata.masterData.gold=parseInt(n.gamedata.masterData.gold)+parseInt(i),n.event.emit(n.gametype.eventType.MASk,!1),this.updateGoldShow(),s.saveChestData(),s.saveMaster()}.bind(this),1.5);for(var c=0;c<r;c++){var l=null;this.smallGoldPool.length>0?l=this.smallGoldPool.pop():(l=cc.instantiate(this.smallGoldItem)).parent=this.smallGoldItemParent,l.active=!0,l.x=0,l.y=h;var d={x:l.x+a.randomAverage()*Math.random()*180,y:l.y+a.randomAverage()*Math.random()*120},p=.05*Math.random()+.05,m=.6*Math.random()+.6,f=cc.sequence(cc.moveTo(p,cc.v2(d.x,d.y)),cc.scaleTo(.03,1,1),cc.moveTo(m,cc.v2(this.goldPos.x,this.goldPos.y)),cc.callFunc(function(t){t.active=!1,this.smallGoldPool.push(t);var e=parseInt(this.goldTxt.string);e=parseInt(o)+e,this.goldTxt.string=e}.bind(this)));f.easing(cc.easeIn(3)),l.runAction(f)}},hideInfo:function(){this.node.stopAllActions(),this.node.runAction(cc.moveTo(.1,0,this.node.y+300))},showInfo:function(){this.node.runAction(cc.moveTo(.1,0,this.node.y-300))}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],launch:[function(t,e,i){"use strict";cc._RF.push(e,"0283eUrUQxFhbmV73hkHOIe","launch");t("../common/config"),t("../data/userdata"),t("../data/gamedata");var a=t("../manager/event"),n=(t("../data/gametype"),t("../manager/request"),{query:{},feedback:null,system:{},network:0,scene:"",init:function(){var t=this;if(WECHATGAME||QQPLAY){var e=platform.getLaunchOptionsSync();this.query=e.query,this.scene=e.scene,console.log("\u542f\u52a8:"+JSON.stringify(this.query)),platform.onShow(function(e){t.query=e.query,t.scene=e.scene,a.emit("wxshow")})}}});e.exports=n,cc._RF.pop()},{"../common/config":"config","../data/gamedata":"gamedata","../data/gametype":"gametype","../data/userdata":"userdata","../manager/event":"event","../manager/request":"request"}],loading:[function(t,e,i){"use strict";cc._RF.push(e,"9f592b9TzFHPK76qrxUgDnS","loading"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.img=this.node.getChildByName("img")},start:function(){},update:function(t){},onShow:function(){console.log("loadingshow"),this.img.angle=0,this.img.stopAllActions();var t=cc.repeatForever(cc.rotateBy(2,360));this.img.runAction(t)},onHide:function(){console.log("loadinghide")}}),cc._RF.pop()},{}],main:[function(t,e,i){"use strict";cc._RF.push(e,"adf7a7NpfNDH7cIIEB3NoNI","main");var a=t("./app");cc.Class({extends:cc.Component,properties:{},fitiPad:function(){var t=cc.view.getFrameSize();if(t.height/t.width<1.4){var e=cc.find("Canvas").getComponent(cc.Canvas);e.fitHeight=!0,e.fitWidth=!1}},onLoad:function(){window.TTGAME="undefined"!=typeof tt,this.loadingContent=this.node.findChild("loadingContent"),this.loading=this.loadingContent.findChild("loading");var t=this;a.init(function(){t.uiInited()})},update:function(t){this.loadingContent.active&&(this.loading.angle-=200*t),a.update(t),a.ad.update(t)},uiInited:function(){console.log("uiinited"),a.ui.show("start"),this.loadingContent.active=!1}}),cc._RF.pop()},{"./app":"app"}],menu:[function(t,e,i){"use strict";cc._RF.push(e,"b8e830oCbFCl60P0408Vy+1","menu");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr"),o=(t("../manager/event"),0),r=1,h={Idle:0,ATK:1,Enter:2,Exit:3};cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.floor=this.node.findChild("content"),this.floorItem=this.floor.findChild("0"),this.baseFloor=this.floor.findChild("base"),this.up=this.node.findChild("up"),this.down=this.node.findChild("down"),this.hero=this.node.findChild("hero"),this.heroAnima=this.hero.getComponent(sp.Skeleton),this.heroAnima.setCompleteListener(this.heroAnimaListener.bind(this)),this.summonBtn=this.node.findChild("down/summon"),this.fightBtn=this.node.findChild("down/fight"),this.skillBtn=this.node.findChild("down/btn/skill"),this.heroBtn=this.node.findChild("down/btn/hero"),this.chestUpBtn=this.node.findChild("down/btn/up"),this.moneyBoxBtn=this.node.findChild("down/moneyBox"),this.drawBtn=this.node.findChild("up/btn/draw"),this.taskBtn=this.node.findChild("up/btn/task"),this.signBtn=this.node.findChild("up/btn/sign"),this.rankBtn=this.node.findChild("up/btn/rank"),this.friendBtn=this.node.findChild("up/btn/friend"),this.isDrag=!1,this.animaState=o,this.focusTime=0,this.direction="null",this.focusIdx=0,this.isMaskDrag=!1,this.heroInfo={time:0,state:h.Idle,enterReady:!1,exitDone:!1,enterIdx:0,targetIdx:1},this.floorGoldValue=1,this.chestWave_minPos=-170,this.chestWave_maxPos=-15,this.chestRaise=50,this.chestWave_interval=this.chestWave_maxPos-this.chestWave_minPos;var t=this.node.findChild("down/moneyBox");this.chestWave=t.findChild("mask/proImg"),this.chest_curTxt=t.findChild("progress/cur").getComponent(cc.RichText),this.chest_maxTxt=t.findChild("progress/max").getComponent(cc.RichText),this.floorGoldData=new Array,this.floorGoldPool=new Array,this.floorGoldParent=this.node.findChild("floorGold"),this.floorGoldItem=this.node.findChild("floorGold/gold"),this.floorGoldItem.on("click",this.onClickFloorGold,this),this.floorGoldItem.active=!1,this.floorGoldPool.push(this.floorGoldItem),this.redNode=this.node.findChild("redNode"),this.taskRed=this.redNode.findChild("taskTip"),this.signRed=this.redNode.findChild("signTip"),this.drawRed=this.redNode.findChild("drawTip"),this.chestRed=this.redNode.findChild("chestTip"),this.heroRed=this.redNode.findChild("heroTip"),this.skillRed=this.redNode.findChild("skillTip"),this.isMaskClick=!1,this.initFloor(),this.register(),this.resize()},onShow:function(){this.heroInfo.state=h.Enter,this.heroInfo.time=1,this.heroAnima.setAnimation(0,"idle",!0),this.heroInfo.enterIdx=0,this.heroInfo.targetIdx=n.gamedata.masterData.lvIdx,this.baseFloor.y=0,this.floorMonster=null;for(var t=0;t<this.floorList.length;t++){this.floorList[t].name=""+t,this.floorList[t].y=t*this.floorItem.height,this.floorList[t].findChild("level").getComponent(cc.Label).string=(t+"").padStart(3,"0");var e=n.gameConfig.level[t].monster.split("|")[0],i=n.gameConfig.fingMonsterCfg(e);this.floorList[t].findChild("monster").getComponent(sp.Skeleton).setSkin(i.outfit),this.setFloorBright(this.floorList[t],!1)}this.updateFloorLimit(),this.moveToFloor(n.gamedata.masterData.lvIdx-1),this.scheduleOnce(this.timedOutput,5),this.updateChestShow(),this.schedule(function(){this.collectFloorGold()}.bind(this),10),this.refreshRedTip(),n.audio.playBgm(n.gametype.BgmType.menu)},onHide:function(){this.isMaskDrag=!1,this.heroInfo.state=h.Enter,this.enterReady=!1,this.exitDone=!1,this.enterIdx=0,this.unscheduleAllCallbacks();for(var t=0;t<this.floorGoldData.length;t++)this.floorGoldData[t].item.active=!1,this.floorGoldPool.push(this.floorGoldData[t].item);this.floorGoldData=new Array,n.gamedata.chestData.storage=parseInt(n.gamedata.chestData.storage)+parseInt(n.gamedata.chestData.cache),console.log("chestDataCache:"+n.gamedata.chestData.cache),console.log("chestDataStorage:"+n.gamedata.chestData.storage),n.gamedata.chestData.cache=0,s.settleChest(),this.heroAnima.setToSetupPose(),this.heroAnima.clearTracks(),n.audio.stopBgm(n.gametype.BgmType.menu)},timedOutput:function(){s.increaseChest()},register:function(){this.summonBtn.on("click",this.onSummon,this),this.fightBtn.on("click",this.onFight,this),this.moneyBoxBtn.on("click",this.onMoneyBox,this),this.skillBtn.on("click",this.onSkill,this),this.heroBtn.on("click",this.onHero,this),this.drawBtn.on("click",this.onDraw,this),this.taskBtn.on("click",this.onTask,this),this.signBtn.on("click",this.onSign,this),this.rankBtn.on("click",this.onRank,this),this.friendBtn.on("click",this.onFriend,this),this.chestUpBtn.on("click",this.onChestUp,this),this.floor.on("touchstart",this.touchStart,this),this.floor.on("touchmove",this.touchMove,this),this.floor.on("touchend",this.touchEnd,this),this.floor.on("touchcancle",this.touchEnd,this),n.event.on(n.gametype.eventType.MASk,function(t){this.isMaskClick=t}.bind(this),this),n.event.on(n.gametype.eventType.HideInfo,this.hideInfo,this),n.event.on(n.gametype.eventType.ShowInfo,this.showInfo,this),n.event.on(n.gametype.eventType.RedTip,this.refreshRedTip,this)},initFloor:function(){this.floorList=new Array,this.floorList.push(this.floorItem);for(var t=0;t<4;t++){var e=cc.instantiate(this.floorItem);e.parent=this.floor,e.zIndex=0,this.floorList.push(e)}this.baseFloor.zIndex=this.floorList.length,this.baseFloor.y=0,this.floorMaxY=100,this.updateFloorLimit()},setFloorBright:function(t,e){var i=t.findChild("monster");i.active=e,e?(t.findChild("levelMask").active=!1,i.scaleX=1,i.x=760,cc.tween(i).to(.5,{x:190}).start()):t.findChild("levelMask").active=!0},updateChestShow:function(){var t="<outline color=#F8E36F width=2><b><color=#FEF8E9>{0}</color></b></outline>";this.chest_curTxt.string=t.format(n.gamedata.chestData.storage),this.chest_maxTxt.string=t.format(n.gameConfig.chest[n.gamedata.chestData.lv].max);var e=n.gamedata.chestData.storage/n.gameConfig.chest[n.gamedata.chestData.lv].max;e>=1&&(e=1),this.chest_target=this.chestWave_minPos+this.chestWave_interval*e,this.chestWave.y>this.chest_target&&(this.chestWave.y=this.chest_target)},updateFloorLimit:function(){0==n.gamedata.masterData.lvIdx?this.floorMinY=-100:this.floorMinY=-(n.gamedata.masterData.lvIdx-1)*this.floorItem.height-100},floorRecycle:function(){for(var t=0;t<this.floorList.length;t++){for(;this.floorList[t].y<-this.baseFloor.height;){this.floorList[t].y+=5*this.baseFloor.height;var e=parseInt(this.floorList[t].name);e+=5,this.floorList[t].name=e+"",this.floorList[t].findChild("level").getComponent(cc.Label).string=(e+"").padStart(3,"0");var i=n.gameConfig.level[e-1].monster.split("|")[0],a=n.gameConfig.fingMonsterCfg(i);this.floorList[t].findChild("monster").getComponent(sp.Skeleton).setSkin(a.outfit)}for(;this.floorList[t].y>1836;){this.floorList[t].y-=5*this.baseFloor.height;e=parseInt(this.floorList[t].name);if(e-=5,this.floorList[t].name=e+"",this.floorList[t].findChild("level").getComponent(cc.Label).string=(e+"").padStart(3,"0"),e>0){i=n.gameConfig.level[e-1].monster.split("|")[0],a=n.gameConfig.fingMonsterCfg(i);this.floorList[t].findChild("monster").getComponent(sp.Skeleton).setSkin(a.outfit)}}}},sceneMove:function(t){for(var e=0;e<this.floorList.length;e++)this.floorList[e].y+=t;this.baseFloor.y+=t,this.hero.y+=t;for(e=0;e<this.floorGoldData.length;e++)this.floorGoldData[e].item.y+=t,this.floorGoldData[e].miny+=t},sceneLimit:function(t){return this.baseFloor.y+t>=this.floorMaxY&&(t=this.floorMaxY-this.baseFloor.y),this.baseFloor.y+t<=this.floorMinY&&(t=this.floorMinY-this.baseFloor.y),t},touchStart:function(){this.isMaskDrag||(this.isDrag=!0,this.direction="")},touchMove:function(t){if(this.isDrag){if(this.deltay=t.touch.getDelta().y,this.deltay>0&&(this.direction="up"),this.deltay<0&&(this.direction="down"),this.deltay=this.sceneLimit(this.deltay),0==this.deltay)return;this.sceneMove(this.deltay),this.floorRecycle()}},touchEnd:function(){this.isDrag&&(this.isDrag=!1,""!=this.direction&&this.onFocus())},onFocus:function(){this.animaState=r,this.focusIdx=0,"down"==this.direction&&(this.focusIdx=-Math.floor(this.baseFloor.y/this.baseFloor.height)),"up"==this.direction&&(this.focusIdx=-Math.ceil(this.baseFloor.y/this.baseFloor.height)),this.focusIdx<0&&(this.focusIdx=0),this.focusIdx>=n.gamedata.masterData.lvIdx&&(this.focusIdx=n.gamedata.masterData.lvIdx-1),this.focusPos=-this.focusIdx*this.baseFloor.height,this.preFocusPos=this.baseFloor.y,this.focusTime=0,n.audio.playEffect(n.gametype.SoundType.floorXiu)},update:function(t){if(this.animaState==r){console.log("update");var e=n.util.lerp(this.baseFloor.y,this.focusPos,this.focusTime)-this.baseFloor.y;e=this.sceneLimit(e),this.sceneMove(e),this.floorRecycle(),this.focusTime+=t,this.focusTime>=1&&(this.animaState=o,this.onSelectFloor(this.focusIdx))}if(this.heroInfo.state==h.Idle&&(this.heroInfo.time-=t),this.chestWave.y<this.chest_target&&(this.chestWave.y+=this.chestRaise*t,this.chestWave.y>=this.chest_target&&(this.chestWave.y=this.chest_target)),this.floorGoldData.length>0)for(var i=0;i<this.floorGoldData.length;i++)1==this.floorGoldData[i].item.active&&(Math.abs(this.floorGoldData[i].velocity_x)>5||Math.abs(this.floorGoldData[i].velocity_y)>5)&&(this.floorGoldData[i].item.x+=this.floorGoldData[i].velocity_x*t*this.floorGoldData[i].direction_x,this.floorGoldData[i].item.y+=this.floorGoldData[i].velocity_y*t,this.floorGoldData[i].velocity_y-=this.floorGoldData[i].slow_y*t,this.floorGoldData[i].velocity_x-=this.floorGoldData[i].slow_x*t,this.floorGoldData[i].velocity_x<=0&&(this.floorGoldData[i].velocity_x=0),this.floorGoldData[i].item.x<this.floorGoldData[i].item.width/2-360&&(this.floorGoldData[i].item.x=this.floorGoldData[i].item.width/2-360,this.floorGoldData[i].direction_x=-this.floorGoldData[i].direction_x),this.floorGoldData[i].item.x>360-this.floorGoldData[i].item.width/2&&(this.floorGoldData[i].item.x=360-this.floorGoldData[i].item.width/2,this.floorGoldData[i].direction_x=-this.floorGoldData[i].direction_x),this.floorGoldData[i].item.y<this.floorGoldData[i].miny&&(this.floorGoldData[i].item.y=this.floorGoldData[i].miny,this.floorGoldData[i].velocity_y=.5*-this.floorGoldData[i].velocity_y,this.floorGoldData[i].velocity_y<=40&&(this.floorGoldData[i].velocity_y=0)));for(i=0;i<this.floorGoldData.length;i++)if(0==this.floorGoldData[i].item.active){var a=this.floorGoldData[i];this.floorGoldData.splice(i,1),this.floorGoldPool.push(a.item),i--}},moveToFloor:function(t){this.isMaskDrag=!0,this.focusIdx=t,console.log("focusIdx:"+this.focusIdx),this.focusPos=-this.focusIdx*this.baseFloor.height,this.preFocusPos=this.baseFloor.y,this.focusTime=0,this.animaState=r,n.audio.playEffect(n.gametype.SoundType.floorXiu)},onSelectFloor:function(t){if(this.heroInfo.enterIdx!=++t){console.log("onselect"),this.isMaskDrag=!0,this.heroInfo.state=h.Exit,this.heroInfo.targetIdx=t;for(var e=0;e<this.floorList.length;e++){parseInt(this.floorList[e].name)==t?(this.floorMonster=this.floorList[e].findChild("monster").getComponent(sp.Skeleton),this.setFloorBright(this.floorList[e],!0)):this.setFloorBright(this.floorList[e],!1)}}},resize:function(){this.offsetY=(1600-cc.winSize.height)/2,this.up.y-=this.offsetY,this.down.y+=this.offsetY;var t=this.taskBtn.converToViewPosition();t.x+=this.taskBtn.width/2,t.y+=this.taskBtn.height/2,this.taskRed.setPosition(t);var e=this.signBtn.converToViewPosition();e.x+=this.signBtn.width/2,e.y+=this.signBtn.height/2,this.signRed.setPosition(e);var i=this.drawBtn.converToViewPosition();i.x+=this.drawBtn.width/2,i.y+=this.drawBtn.height/2,this.drawRed.setPosition(i);var a=this.chestUpBtn.converToViewPosition();a.x+=this.chestUpBtn.width/2,a.y+=this.chestUpBtn.height/2,this.chestRed.setPosition(a);var n=this.heroBtn.converToViewPosition();n.x+=this.heroBtn.width/2,n.y+=this.heroBtn.height/2,this.heroRed.setPosition(n);var s=this.skillBtn.converToViewPosition();s.x+=this.skillBtn.width/2,s.y+=this.skillBtn.height/2,this.skillRed.setPosition(s)},onAddGold:function(){n.gamedata.masterData.gold+=2e3,s.saveMaster()},onSkill:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("skill")},onHero:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("hero")},onChestUp:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("chestUp")},onTask:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("task")},onFriend:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("friend")},onSign:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("sign")},onRank:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("rank")},onDraw:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("draw")},onSummon:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||n.ui.show("summon")},onFight:function(){n.audio.playEffect(n.gametype.SoundType.click),this.isMaskClick||(n.ui.hide("menu"),n.ui.show("battle"),n.ui.hide("info"))},onMoneyBox:function(){if(!this.isMaskClick&&n.gamedata.chestData.storage>0){this.isMaskClick=!0;var t=n.gamedata.chestData.storage;n.gamedata.chestData.storage=0,s.saveChestData(),this.updateChestShow(),this.genGoldToBar(t)}},onClear:function(){s.Delete()},getHeroFloorPos:function(t){return this.baseFloor.y+this.baseFloor.height*t+this.floorList[0].findChild("heroPoint").y+this.floor.y},getGoldFloorPos:function(t){return this.baseFloor.y+this.baseFloor.height*t+this.floor.y+120},getMonsterFloorPos:function(t){return{x:this.floorList[0].findChild("monster").x,y:this.baseFloor.y+this.baseFloor.height*t+this.floor.y+240}},heroAnimaListener:function(t){var e=this;this.heroInfo.state==h.Exit&&("idle"!=t.animation.name&&"atk3"!=t.animation.name&&"run"!=t.animation.name||(this.hero.scaleX=-1,this.heroExitTween=cc.tween(this.hero).to(.5,{x:-760}).call(function(){e.heroInfo.exitDone=!0,e.heroInfo.state=h.Enter}),this.heroExitTween.start(),this.heroInfo.state=h.Moving,this.heroAnima.clearTracks(),this.heroAnima.setToSetupPose(),this.heroAnima.setAnimation(0,"run",!0),"atk3"==t.animation.name&&(this.floorMonster.setToSetupPose(),this.floorMonster.setAnimation(0,"idle",!0)))),this.heroInfo.state==h.Enter&&(this.hero.y=this.getHeroFloorPos(this.heroInfo.targetIdx),this.hero.x=-760,this.hero.scaleX=1,this.heroEnterTween=cc.tween(this.hero).to(.5,{x:-150}).call(function(){e.isMaskDrag=!1,e.heroInfo.exitDone=!1,e.heroInfo.enterReady=!1,e.heroInfo.state=h.Idle,e.heroAnima.clearTracks(),e.heroAnima.setToSetupPose(),e.heroAnima.setAnimation(0,"idle",!0),e.heroInfo.enterIdx=e.heroInfo.targetIdx}),this.heroEnterTween.start(),this.heroAnima.setAnimation(0,"run",!0)),this.heroInfo.state==h.Idle&&"idle"==t.animation.name&&this.heroInfo.time<=0&&(this.heroInfo.state=h.ATK),this.heroInfo.state==h.ATK&&(-1==t.animation.name.indexOf("atk")?(this.heroAnima.clearTracks(),this.heroAnima.setAnimation(0,"atk3",!1),this.heroInfo.time=2,null!=this.floorMonster&&(this.floorMonster.clearTracks(),this.floorMonster.setAnimation(0,"hit",!1)),this.scheduleOnce(this.heroAtk.bind(this),.68)):(this.heroInfo.state=h.Idle,this.heroInfo.time=2,this.heroAnima.clearTracks(),this.heroAnima.setToSetupPose(),this.heroAnima.setAnimation(0,"idle",!0),null!=this.floorMonster&&(this.floorMonster.setToSetupPose(),this.floorMonster.setAnimation(0,"idle",!0))))},heroAtk:function(){if(console.log("\u6325\u5200\u5927\u529b\u51fb"),n.audio.playEffect(n.gametype.SoundType.hit),n.gamedata.chestData.cache>0){n.audio.playEffect(n.gametype.SoundType.gold);for(var t=n.gamedata.chestData.cache/2,e=0;e<2;e++){var i=null;this.floorGoldPool.length>0?i=this.floorGoldPool.pop():((i=cc.instantiate(this.floorGoldItem)).on("click",this.onClickFloorGold,this),i.parent=this.floorGoldParent),i.active=!0;var s=this.getMonsterFloorPos(this.heroInfo.enterIdx);i.x=s.x,i.y=s.y;var o={};o.item=i,o.floorIdx=this.heroInfo.enterIdx,o.goldValue=t,o.miny=this.getGoldFloorPos(this.heroInfo.enterIdx),o.direction_x=a.randomAverage(),o.direction_y=1,o.velocity_x=200*Math.random()+100,o.velocity_y=240*Math.random()+180,o.slow_x=.4*o.velocity_x,o.slow_y=1200,o.timer=5,this.floorGoldData.push(o)}}},collectFloorGold:function(){var t=this,e=function(e,i){cc.tween(e).to(.5,{x:0,y:-700},{easing:"backOut"}).call(function(){e.active=!1,t.goldToChest(i)}).start()};n.audio.playEffect(n.gametype.SoundType.goldToChest);for(var i=0;i<this.floorGoldData.length;i++)this.floorGoldData[i].item.active&&e(this.floorGoldData[i].item,this.floorGoldData[i].goldValue)},onClickFloorGold:function(t){for(var e=t.node,i=this,a=0,s=0;s<this.floorGoldData.length;s++)if(this.floorGoldData[s].item._id==e._id){a=this.floorGoldData[s].goldValue,this.floorGoldData.splice(s,1);break}n.audio.playEffect(n.gametype.SoundType.touchGold),cc.tween(e).to(.5,{x:0,y:-700},{easing:"backOut"}).start().call(function(){e.active=!1,i.floorGoldPool.push(e),i.goldToChest(a)}).start()},goldToChest:function(t){n.gamedata.chestData.storage=parseInt(n.gamedata.chestData.storage)+parseInt(t),n.gamedata.chestData.storage>=n.gameConfig.chest[n.gamedata.chestData.lv].max&&(n.gamedata.chestData.storage=n.gameConfig.chest[n.gamedata.chestData.lv].max),this.updateChestShow()},genGoldToBar:function(t){var e={pos:{x:0,y:this.moneyBoxBtn.y+this.moneyBoxBtn.parent.y},num:t};n.event.emit(n.gametype.eventType.GENGOLD,e)},hideInfo:function(){this.down.stopAllActions(),this.down.runAction(cc.moveTo(.1,0,this.down.y-this.down.height-200))},showInfo:function(){this.down.runAction(cc.moveTo(.1,0,this.down.y+this.down.height+200))},refreshRedTip:function(){this.taskRed.active=s.checkHasTaskFinish(),this.signRed.active=s.checkCanSign(),this.drawRed.active=s.checkCanDraw(),this.chestRed.active=s.checkChestCanUp(),this.heroRed.active=s.checkHeroCanUpgrade(),this.skillRed.active=s.checkSkillCanUpgrade()}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../manager/event":"event","../platform/gameMgr":"gameMgr"}],msgbox:[function(t,e,i){"use strict";cc._RF.push(e,"969086IDp9LArFLQueR7IXM","msgbox");var a=t("../app");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.params=null;var t=this.node.getChildByName("btns");this.cancleBtn=t.getChildByName("cancle"),this.cancleBtn.on("click",this.onCancel,this),this.sureBtn=t.getChildByName("sure"),this.sureBtn.on("click",this.onSure,this),this.vedioTip=this.sureBtn.getChildByName("vedio"),this.shareTip=this.sureBtn.getChildByName("share"),this.emptyTip=this.sureBtn.getChildByName("empty"),this.content=this.node.getChildByName("content").getComponent(cc.Label),this.title=this.node.getChildByName("title").getComponent(cc.Label),this.sureBtnTxt=this.sureBtn.getChildByName("txt").getComponent(cc.Label),this.cancleTxt=this.cancleBtn.getChildByName("txt").getComponent(cc.Label),this.sureBtn.on("click",this.onSure,this),this.cancleBtn.on("click",this.onCancel,this)},start:function(){},onShow:function(t){if(void 0==t)return console.error("invaild params to msgbox!"),void a.ui.hide("msgbox");this.params=t,void 0===t.vedioTip&&(t.vedioTip=!1),void 0===t.shareTip&&(t.shareTip=!1),void 0===t.showCancle&&(t.showCancle=!1),void 0===t.cancleTxt&&(t.cancleTxt="\u53d6\u6d88"),void 0===t.sureTxt&&(t.sureTxt="\u786e\u8ba4"),this.content.string=t.content,this.title.string=t.title,this.sureFunc=t.sure,this.cancleFunc=t.cancle,this.cancleBtn.active=t.showCancle,this.vedioTip.active=t.vedioTip,this.shareTip.active=t.shareTip,this.sureBtnTxt.string=t.sureTxt,this.cancleTxt.string=t.cancleTxt,this.vedioTip.active|this.shareTip.active?this.emptyTip.active=!1:this.emptyTip.active=!0},onHide:function(){},onSure:function(){a.ui.hide("msgbox"),this.sureFunc&&(this.sureFunc(),this.sureFunc=null)},onCancel:function(){a.ui.hide("msgbox"),this.cancleFunc&&(this.cancleFunc(),this.cancleFunc=null)}}),cc._RF.pop()},{"../app":"app"}],native:[function(t,e,i){"use strict";cc._RF.push(e,"758722xSFBAcpy7b2VDg1f0","native"),cc._RF.pop()},{}],rank:[function(t,e,i){"use strict";cc._RF.push(e,"338bbKtZERDlKF4/7U8Iged","rank");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr");t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.tweenContent.findChild("closeBtn"),this.scorllView=this.tweenContent.findChild("panel").getComponent(cc.ScrollView),this.content=this.scorllView.node.findChild("view/content"),this.rankItem=this.content.findChild("item"),this.rankList=new Array,this.rankList.push(this.rankItem),this.register()},register:function(){this.closeBtn.on("click",this.onClose,this)},onShow:function(t){n.audio.playEffect(n.gametype.SoundType.duang),this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start();for(var e=0;e<this.rankList.length;e++)this.rankList[e].active=!1;n.ui.showLoading();var i=function(){n.ui.hideLoading();for(var t=0;t<n.gamedata.rankData.length;t++){var e=this.rankList[t];void 0===e&&((e=cc.instantiate(this.rankItem)).parent=this.rankItem.parent,this.rankList.push(e)),e.active=!0,this.showItemInfo(e,n.gamedata.rankData[t])}}.bind(this);s.getRankingData(i)},showItemInfo:function(t,e){var i=t.findChild("name").getComponent(cc.Label),s=t.findChild("icon").getComponent(cc.Sprite),o=t.findChild("fight/num").getComponent(cc.Label),r=t.findChild("rank");i.string=e.Name,""==e.Head?s.spriteFrame=n.res.defIconSprite:a.createIcon(s,e.Head),o.string=e.CombatValue,r.findChild("1").active=0==e.Index,r.findChild("2").active=1==e.Index,r.findChild("3").active=2==e.Index,r.findChild("n").active=e.Index>2,e.Index>2&&(r.findChild("n/num").getComponent(cc.Label).string=e.Index+1)},onClose:function(){n.audio.playEffect(n.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.1,{scaleX:.5,scaleY:.5}).call(function(){n.ui.hide("rank")}).start()}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],request:[function(t,e,i){"use strict";cc._RF.push(e,"b39cc3y85NKTrdZVEoaEvhl","request");var a=t("querystring");t("../manager/event");e.exports={post:function(t,e,i){new Array;var n=a.stringify(e);console.log("request:"+t+"?"+n);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&s.status>=200&&s.status<400){var t=s.responseText;if(console.log(t),""!=t){var e=JSON.parse(t);i(e)}}},s.open("POST",t,!0),s.send(n)},get:function(t,e,i){new Array;var n=a.stringify(e);console.log("request:"+t+"?"+n);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&s.status>=200&&s.status<400){var t=s.responseText;if(console.log(t),""!=t){var e=JSON.parse(t);i(e)}}},s.open("GET",t+"?"+n,!0),s.send(null)}},cc._RF.pop()},{"../manager/event":"event",querystring:3}],result:[function(t,e,i){"use strict";cc._RF.push(e,"a35ec2tHG9M8oJC/fdl+qX0","result");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr");t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.winAnima=this.node.findChild("winTitle").getComponent(sp.Skeleton),this.failAnima=this.node.findChild("failTitle"),this.failBtnGroup=this.node.findChild("failBtns"),this.winBtnGroup=this.node.findChild("winBtns"),this.rewardGroup=this.node.findChild("reward"),this.goldNode=this.rewardGroup.findChild("gold"),this.diamondNode=this.rewardGroup.findChild("diamond"),this.goldTxt=this.goldNode.findChild("num").getComponent(cc.Label),this.diamondTxt=this.diamondNode.findChild("num").getComponent(cc.Label),this.register()},register:function(){this.winAnima.setCompleteListener(this.animaListener.bind(this)),this.failBtnGroup.findChild("return").on("click",this.onClose,this),this.failBtnGroup.findChild("retry").on("click",this.onRetry,this),this.winBtnGroup.findChild("return").on("click",this.onClose,this),this.winBtnGroup.findChild("next").on("click",this.onNext,this)},animaListener:function(t){"TG"==t.animation.name&&(this.winAnima.setAnimation(0,"TG2",!0),this.playRewardAnima())},playRewardAnima:function(){this.rewardGroup.active&&(this.rewardGroup.runAction(cc.scaleTo(.25,1)),this.scheduleOnce(function(){this.playBtnAnima()}.bind(this),.25))},playBtnAnima:function(){this.winBtnGroup.active&&this.winBtnGroup.runAction(cc.scaleTo(.25,1)),this.failBtnGroup.active&&this.failBtnGroup.runAction(cc.scaleTo(.25,1))},onShow:function(t){if(a.audio.stopBgm(),this.winAnima.clearTracks(),this.rewardGroup.active=!1,this.failBtnGroup.scaleX=0,this.failBtnGroup.scaleY=0,this.winBtnGroup.scaleX=0,this.winBtnGroup.scaleY=0,t.isWin){a.audio.playEffect(a.gametype.SoundType.win),this.winAnima.node.active=!0,this.failAnima.active=!1,this.winAnima.setToSetupPose(),this.winAnima.setAnimation(0,"TG",!1);var e=a.gameConfig.findLevelCfg(a.gamedata.masterData.lvIdx),i=e.reward.split("|");console.log(i),parseInt(i[0])>0?(this.rewardGroup.active=!0,this.goldNode.active=!0,this.goldTxt.string="+"+i[0],a.gamedata.masterData.gold+=parseInt(i[0]),a.event.emit(a.gametype.eventType.GOLD)):this.goldNode.active=!1,parseInt(i[1])>0?(this.rewardGroup.active=!0,this.diamondNode.active=!0,this.diamondTxt.string="+"+i[1],a.gamedata.masterData.gem+=parseInt(i[1]),a.event.emit(a.gametype.eventType.Diamond)):this.diamondNode.active=!1,a.gamedata.masterData.lvIdx++,null==(e=a.gameConfig.findLevelCfg(a.gamedata.masterData.lvIdx))&&a.gamedata.lvIdx--,n.saveMaster()}else a.audio.playEffect(a.gametype.SoundType.fail),this.winAnima.node.active=!1,this.failAnima.active=!0,this.failAnima.opacity=0,this.failAnima.runAction(cc.fadeIn(1.5)),this.scheduleOnce(function(){this.playBtnAnima()}.bind(this),1.5);this.failBtnGroup.active=!t.isWin,this.winBtnGroup.active=t.isWin,this.rewardGroup.scaleX=0,this.rewardGroup.scaleY=0},onHide:function(){this.failAnima.stopAllActions(),this.rewardGroup.stopAllActions(),this.unscheduleAllCallbacks()},onClose:function(){a.audio.playEffect(a.gametype.SoundType.click),a.ui.hide("battle"),a.ui.show("menu"),a.ui.show("info"),a.ui.hide("result")},onNext:function(){a.audio.playEffect(a.gametype.SoundType.click),a.ui.hide("battle"),a.ui.show("battle"),a.ui.hide("result")},onRetry:function(){a.audio.playEffect(a.gametype.SoundType.click),a.ui.hide("battle"),a.ui.show("battle"),a.ui.hide("result")}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],res:[function(t,e,i){"use strict";cc._RF.push(e,"75671yGFuxI9KtX5GglYtc0","res");var a=t("../common/gameConfig"),n=(t("../common/util"),{bgm:{},buffSprite:{},gradeSprite:{},bossSprite:null,enemySprite:null,deadStateSprite:null,fightStateSprite:null,atkIconSprite:null,defIconSprite:null,drawGoldSprite:null,drawDiamondSprite:null,boxSprite:{},load:function(t){var e=0,i=a.buffContent.length;i=a.gradeBg.length,i+=13,this.buffSprite=new Array;for(var n=0;n<a.buffContent.length;n++)this.buffSprite.push(""),cc.loader.loadRes("image/skill/"+n,cc.SpriteFrame,function(a,n){a&&console.error(a);var s=parseInt(n.name);this.buffSprite[s]=n,e++,t&&t(e/i)}.bind(this));this.gradeSprite=new Array,this.gradeTmpSprite={};for(n=0;n<a.gradeBg.length;n++)this.gradeSprite.push(""),this.gradeTmpSprite[a.gradeBg[n]]=n,cc.loader.loadRes("image/hero/"+a.gradeBg[n],cc.SpriteFrame,function(a,n){a&&console.error(a);var s=this.gradeTmpSprite[n.name];this.gradeSprite[s]=n,e++,t&&t(e/i)}.bind(this));cc.loader.loadRes("image/game/bossIcon",cc.SpriteFrame,function(a,n){a&&console.error(a),this.bossSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/enemyIcon",cc.SpriteFrame,function(a,n){a&&console.error(a),this.enemySprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/bossIcon",cc.SpriteFrame,function(a,n){a&&console.error(a),this.bossSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/enemyIcon",cc.SpriteFrame,function(a,n){a&&console.error(a),this.enemySprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/atkIcon",cc.SpriteFrame,function(a,n){a&&console.error(a),this.atkIconSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/defIcon",cc.SpriteFrame,function(a,n){a&&console.error(a),this.defIconSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/fighting",cc.SpriteFrame,function(a,n){a&&console.error(a),this.fightStateSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/game/dead",cc.SpriteFrame,function(a,n){a&&console.error(a),this.deadStateSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/draw/diamond",cc.SpriteFrame,function(a,n){a&&console.error(a),this.drawDiamondSprite=n,e++,t&&t(e/i)}.bind(this)),cc.loader.loadRes("image/draw/gold",cc.SpriteFrame,function(a,n){a&&console.error(a),this.drawGoldSprite=n,e++,t&&t(e/i)}.bind(this)),this.boxSprite=new Array;for(n=1;n<=3;n++)this.boxSprite.push(""),cc.loader.loadRes("image/common/box"+n,cc.SpriteFrame,function(a,n){a&&console.error(a);var s=parseInt(n.name.replace("box",""))-1;this.boxSprite[s]=n,e++,t&&t(e/i)}.bind(this))}});e.exports=n,cc._RF.pop()},{"../common/gameConfig":"gameConfig","../common/util":"util"}],reward:[function(t,e,i){"use strict";cc._RF.push(e,"7dcde4Drd9Hz59PrtpAao5R","reward");t("../common/util");var a=t("../app"),n=(t("../platform/gameMgr"),t("../data/gametype"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.tweenContent.findChild("sureBtn"),this.light=this.tweenContent.findChild("light"),this.icon=this.tweenContent.findChild("icon").getComponent(cc.Sprite),this.numTxt=this.tweenContent.findChild("num").getComponent(cc.Label),this.rewardList=new Array,this.isPlay=!1,this.register(),this.showTween=cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}),this.hideTween=cc.tween(this.tweenContent).to(.1,{scaleX:.5,scaleY:.5}).call(function(){this.onAnimaFinish()}.bind(this))},register:function(){this.closeBtn.on("click",this.onClose,this)},receiveReward:function(t){this.rewardList.push(t),0==this.isPlay&&this.onShow()},onShow:function(t){if(this.isPlay)this.rewardList.push(t);else{this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,this.showTween.stop(),this.showTween.start();var e=t.type,i=t.num;switch(a.audio.playEffect(n.SoundType.reward),e){case 1:this.icon.spriteFrame=a.res.drawGoldSprite,this.numTxt.string=i;break;case 2:this.icon.spriteFrame=a.res.drawDiamondSprite,this.numTxt.string=i;break;case 3:this.icon.spriteFrame=a.res.boxSprite[i],this.numTxt.string="1"}}},onClose:function(){a.audio.playEffect(n.SoundType.click),this.hideTween.stop(),this.hideTween.start()},onAnimaFinish:function(){this.rewardList.length>0?this.onShow():(this.isPlay=!1,a.ui.hide("reward"))},update:function(t){this.light.angle-=200*t}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],selectHero:[function(t,e,i){"use strict";cc._RF.push(e,"3384391nThHAL8nxIUmBbfQ","selectHero");var a=t("../common/util"),n=t("../app"),s=t("../platform/gameMgr"),o=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.tweenContent.findChild("panel/close"),this.content=this.tweenContent.findChild("panel/scrollview/view/content"),this.heroItem=this.content.findChild("item"),this.heroItem.on("click",this.onClickItem,this),this.heroItem.findChild("covering/reliveBtn").on("click",this.onClickRelive,this),this.closeBtn.on("click",this.onClose,this),this.heroItemList=new Array,this.heroItemList.push(this.heroItem)},onClickItem:function(t){n.audio.playEffect(n.gametype.SoundType.click);var e=parseInt(t.node.name);if(1==this.checkIsSelect(e)){for(var i=0;i<n.gamedata.seleHeroList.length;i++)if(n.gamedata.seleHeroList[i]==e){n.gamedata.seleHeroList[i]=-1,n.gamedata.saveSelectHeroList();break}}else{var a=s.findHero(e);null!=a&&0==a.isDead&&(n.gamedata.seleHeroList[this.pos]=e)}console.log(n.gamedata.seleHeroList),n.event.emit(o.eventType.SelectHeroChange),this.onClose()},onShow:function(t){n.audio.playEffect(n.gametype.SoundType.duang),this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start(),this.pos=t,this.refreshHeroList(),this.schedule(this.updateReliveTime,1)},refreshHeroList:function(){this.deadHeroList=new Array,s.rehandleHeroData(),s.sortHeroData();for(var t=0;t<n.gamedata.heroData.length;t++){var e=this.heroItemList[t],i=n.gameConfig.getHero(n.gamedata.heroData[t].id,n.gamedata.heroData[t].star);if(void 0===e&&((e=cc.instantiate(this.heroItem)).parent=this.content,this.heroItemList.push(e),e.on("click",this.onClickItem,this),e.findChild("covering/reliveBtn").on("click",this.onClickRelive,this)),e.name=""+n.gamedata.heroData[t].uid,e.active=!0,null!=i){if(e.findChild("name").getComponent(cc.Label).string=i.name,e.findChild("hp").getComponent(cc.Label).string=i.hp,e.findChild("atk").getComponent(cc.Label).string=i.atk,e.findChild("def").getComponent(cc.Label).string=i.def,e.findChild("sp").getComponent(cc.Label).string=i.sp,e.findChild("grade").getComponent(cc.Sprite).spriteFrame=n.res.gradeSprite[i.grade-1],e.findChild("select").active=this.checkIsSelect(n.gamedata.heroData[t].uid),0==n.gamedata.heroData[t].isDead)e.findChild("covering").active=!1;else{e.findChild("covering").active=!0;var o=s.getHeroReliveTime(n.gamedata.heroData[t].uid),r=e.findChild("covering/time").getComponent(cc.Label);r.string=a.formatTime(o),this.deadHeroList.push({uid:n.gamedata.heroData[t].uid,text:r})}e.findChild("icon/hero").getComponent(sp.Skeleton).setSkin(i.outfit);for(var h=e.findChild("star"),c=1;c<=5;c++)i.star>=c?h.findChild(c+"").active=!0:h.findChild(c+"").active=!1}else e.active=!1}},onClose:function(){n.audio.playEffect(n.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.15,{scaleX:.5,scaleY:.5},{easing:"backIn"}).call(function(){n.ui.hide("selectHero")}).start()},updateReliveTime:function(){for(var t=0;t<this.deadHeroList.length;t++){var e=s.getHeroReliveTime(this.deadHeroList[t].uid);if(e<=0)return void this.refreshHeroList();this.deadHeroList[t].text.string=a.formatTime(e)}},onHide:function(){for(var t=0;t<this.heroItemList.length;t++){this.heroItemList[t].active=!1}this.unschedule(this.updateHeroReliveTime),n.gamedata.saveSelectHeroList()},checkIsSelect:function(t){for(var e=0;e<n.gamedata.seleHeroList.length;e++)if(n.gamedata.seleHeroList[e]==t)return!0;return!1},onClickRelive:function(t){n.audio.playEffect(n.gametype.SoundType.click);var e=parseInt(t.node.parent.parent.name);s.reliveHero(e)}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],share:[function(t,e,i){"use strict";cc._RF.push(e,"c2bd0Zk2zlNIJvGFXQmr3SL","share");t("../common/config");var a=t("../data/userdata"),n=(t("../platform/native"),t("../data/gamedata")),s={isCancel:!1,simulateshare:null,text:"",img:"",init:function(){if(!TTGAME){var t=this;cc.game.on(cc.game.EVENT_SHOW,function(){if(null!=t.simulateshare){var e=(new Date).getTime(),i=Math.random()<.2?6e3:3e3;WECHATGAME&&e-t.simulateshare.time<i&&(t.isCancel=!0),t.isCancel?(console.log("\u5206\u4eab\u5931\u8d25"),this.simulateshare.fail&&this.simulateshare.fail(),this.simulateshare.success&&platform.showModal({title:"\u63d0\u793a",content:"\u9080\u8bf7\u4e0d\u540c\u597d\u53cb\u624d\u53ef\u83b7\u5f97\u5956\u52b1!",confirmColor:"#3cc51f"})):(console.log("\u5206\u4eab\u6210\u529f"),t.simulateshare.success&&(t.simulateshare.success(),platform.showToast({title:"\u5206\u4eab\u6210\u529f",icon:"success",duration:2e3}),t.simulateshare=null))}else console.log("\u6ca1\u6709\u5206\u4eab,\u4e0d\u7528\u5224\u65ad");t.simulateshare=null},this)}},do:function(t,e,i,s,o,r){if(s&&0==n.control.uglyShare)s();else{0,this.text=t,this.img=e;var h="inviteId="+a.openid;i=""==i?h:h+"&"+i,console.log("query: "+i);var c=(new Date).getTime();this.simulateshare={time:c,success:s,fail:o};var l=this;l.isCancel=!1,(WECHATGAME||QQPLAY)&&platform.shareAppMessage({title:t,imageUrl:e,query:i,cancel:function(t){l.isCancel=!0}})}}};e.exports=s,cc._RF.pop()},{"../common/config":"config","../data/gamedata":"gamedata","../data/userdata":"userdata","../platform/native":"native"}],sign:[function(t,e,i){"use strict";cc._RF.push(e,"c7e15a1QlJN+53+GGhqByV9","sign");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype"),o=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u65e5"];cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweemContent"),this.closeBtn=this.node.findChild("tweemContent/closeBtn"),this.signGroup=new Array;for(var t=this.node.findChild("tweemContent/content"),e=0;e<7;e++){var i=t.findChild(""+e);this.signGroup.push({item:i,finish:i.findChild("sign"),signBtn:i.findChild("signBtn"),resignBtn:i.findChild("resignBtn"),rewardImg:i.findChild("reward").getComponent(cc.Sprite),rewardTxt:i.findChild("reward/num").getComponent(cc.Label),dayTxt:i.findChild("day/txt").getComponent(cc.Label)}),this.onSign(this.signGroup[e].signBtn,e),this.onResign(this.signGroup[e].resignBtn,e)}this.closeBtn.on("click",this.onClose,this),a.event.on(s.eventType.Sign,this.refreshSign,this)},onClose:function(){a.audio.playEffect(a.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.1,{scaleX:.5,scaleY:.5}).call(function(){a.ui.hide("sign")}).start()},onShow:function(){a.audio.playEffect(a.gametype.SoundType.duang),this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start(),this.refreshSign()},refreshSign:function(){var t=(new Date).getDay();0==t&&(t=7),t--;for(var e=0;e<7;e++){console.log(a.gameConfig.sign[e].reward);var i=a.gameConfig.sign[e].reward.split("|")[0],n=a.gameConfig.sign[e].reward.split("|")[1],s=a.gameConfig.sign[e].reward.split("|")[2];if(i>0&&(this.signGroup[e].rewardImg.spriteFrame=a.res.drawGoldSprite,this.signGroup[e].rewardTxt.string=i),n>0&&(this.signGroup[e].rewardImg.spriteFrame=a.res.drawDiamondSprite,this.signGroup[e].rewardTxt.string=i),0!=s)switch(this.signGroup[e].rewardImg.spriteFrame=a.res.boxSprite[s],s){case 0:this.signGroup[e].rewardTxt.string="\u666e\u901a\u5b9d\u7bb1";break;case 1:this.signGroup[e].rewardTxt.string="\u9ad8\u7ea7\u5b9d\u7bb1";break;case 2:this.signGroup[e].rewardTxt.string="\u7ec8\u6781\u5b9d\u7bb1"}this.signGroup[e].dayTxt.string="\u7b2c"+o[e]+"\u5929",this.signGroup[e].signBtn.active=e==t,1==a.gamedata.signArray[e]?(this.signGroup[e].resignBtn.active=!1,this.signGroup[e].finish.active=!0):(this.signGroup[e].finish.active=!1,this.signGroup[e].resignBtn.active=e<t),this.signGroup[e].signBtn.active||this.signGroup[e].resignBtn.active?this.signGroup[e].dayTxt.node.parent.active=!1:this.signGroup[e].dayTxt.node.parent.active=!0}},onSign:function(t,e){t.on("click",function(){console.log("sign"),n.sign(e)}.bind(this),this)},onResign:function(t,e){t.on("click",function(){console.log("resign"),n.sign(e)}.bind(this),this)}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],skill:[function(t,e,i){"use strict";cc._RF.push(e,"7d658/u57lNpbySNvIJ9Cm9","skill");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.node.findChild("tweenContent/closeBtn"),this.skillPointTxt=this.node.findChild("tweenContent/frame/skillPoint/num").getComponent(cc.Label),this.content=this.node.findChild("tweenContent/frame/scrollview/view/content"),this.item=this.content.findChild("item"),this.itemList=new Array,this.itemList.push(this.item);for(var t=0;t<6;t++){var e=cc.instantiate(this.item);this.content.addChild(e),this.itemList.push(e)}this.initSkillShow(),this.closeBtn.on("click",this.close,this),a.event.on(s.eventType.BUFF,this.showSkill,this)},initSkillShow:function(){for(var t=0;t<7;t++){var e=this.itemList[t].findChild("icon").getComponent(cc.Sprite),i=this.itemList[t].findChild("name").getComponent(cc.Label),n=this.itemList[t].findChild("detail").getComponent(cc.Label),s=this.itemList[t].findChild("iconBg");0!=t&&1!=t||(s.color=new cc.Color(116,201,255)),2==t&&(s.color=new cc.Color(255,114,158)),3!=t&&4!=t||(s.color=new cc.Color(144,255,113)),5!=t&&6!=t||(s.color=new cc.Color(185,122,248));this.itemList[t].findChild("use");var o=this.itemList[t].findChild("up");e.spriteFrame=a.res.buffSprite[t],i.string=a.gameConfig.buffContent[t].name,n.string=a.gameConfig.buffContent[t].content,this.upgrade(o,t),this.select(this.itemList[t],t)}},onShow:function(){a.audio.playEffect(a.gametype.SoundType.duang),this.tweenContent.scaleX=0,this.tweenContent.scaleY=0,this.skillPointTxt.string=a.gamedata.masterData.buffPoint,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start(),this.showSkill()},showSkill:function(){this.skillPointTxt.string=a.gamedata.masterData.buffPoint;for(var t=0;t<7;t++){this.itemList[t].findChild("lv").getComponent(cc.Label).string="LV."+a.gamedata.masterData.buffLv[t],a.gamedata.masterData.selectBuff==t?this.itemList[t].findChild("using").active=!0:this.itemList[t].findChild("using").active=!1,a.gamedata.masterData.buffPoint>0?this.itemList[t].findChild("up").getComponent(cc.Button).interactable=!0:this.itemList[t].findChild("up").getComponent(cc.Button).interactable=!1}},upgrade:function(t,e){t.on("click",function(){a.audio.playEffect(a.gametype.SoundType.click),a.gamedata.masterData.buffPoint<=0?a.ui.showFloatTip("\u6280\u80fd\u70b9\u4e0d\u8db3"):n.upgradeBuff(e)},this)},select:function(t,e){t.on("click",function(){a.audio.playEffect(a.gametype.SoundType.click),0!=a.gamedata.masterData.buffLv[e]&&n.selectBuff(e)}.bind(this),this)},close:function(){a.audio.playEffect(a.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.15,{scaleX:.5,scaleY:.5},{easing:"backIn"}).call(function(){a.ui.hide("skill")}).start()}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],start:[function(t,e,i){"use strict";cc._RF.push(e,"45799s178RDPZkl7emCjErr","start");var a=t("../app"),n=t("../platform/gameMgr");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;if(this.isDataInit=!0,this.soundBtn_on=this.node.findChild("sound/on"),this.soundBtn_off=this.node.findChild("sound/off"),this.startBtn=this.node.findChild("startBtn"),this.loadingContent=this.node.findChild("loadingContent"),this.loadingImg=this.loadingContent.findChild("loading"),this.loadingContent.active=!0,WECHATGAME){var e=wx.getSystemInfoSync();a.gamedata.screenWidth=e.screenWidth,a.gamedata.screenHeight=e.screenHeight}else a.gamedata.getSelectHeroList(),a.gamedata.initHeroUID(),a.gamedata.initHeroData(),a.gamedata.initMasterData(),a.gamedata.initTaskData(),a.time.init(),n.initChestData(),this.isDataInit=!1,this.loadingContent.active=!1;TTGAME&&(a.gamedata.recorder=tt.getGameRecorderManager(),a.gamedata.recorder.onStart(function(){a.gamedata.recordTimer=0,a.gamedata.isRecord=!0,console.log("\u5f00\u59cb\u5f55\u5c4f")}),a.gamedata.recorder.onStop(function(t){if(console.log("\u505c\u6b62\u5f55\u5c4f"),a.gamedata.recordTimer<=3)event.emit(event.EventType.TIP,"\u5f55\u5236\u5206\u4eab\u4e0d\u5f97\u5c11\u4e8e3\u79d2\u949f");else{a.gamedata.recordTimer=0,a.gamedata.isRecord=!1;var e=t.videoPath;tt.showModal({title:"\u63d0\u793a",content:"\u5f55\u5c4f\u6210\u529f\n\u5f55\u5236\u7684\u89c6\u9891\u53ef\u4ee5\u5206\u4eab\u54e6\uff01",confirmText:"\u5206\u4eab\u89c6\u9891",cancelText:"\u53d6\u6d88",success:function(t){t.confirm&&tt.shareVideo({videoPath:e,success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01")}})}})}}),a.gamedata.recorder.onError(function(t){console.log(t.errMsg)})),a.gamedata.initDataKey(),a.time.init(function(){console.log("time init"),n.getGameControl(),n.getShareContent(),n.login(),a.gamedata.initHeroUID(),n.initChestData(),a.gamedata.getSelectHeroList(),t.isDataInit=!1,t.loadingContent.active=!1}),this.isloading=!0,a.ui.showLoading(),a.res.load(this.resourceLoad.bind(this)),this.register()},register:function(){this.soundBtn_on.on("click",this.onSound,this),this.soundBtn_off.on("click",this.onSound,this),this.startBtn.on("click",this.onStart,this)},resourceLoad:function(t){t>=1&&(a.ui.hideLoading(),this.isloading=!1)},onlogined:function(){},onShow:function(t){console.log(a.audio.musicOn),this.soundBtn_on.active=a.audio.musicOn,this.soundBtn_off.active=!a.audio.musicOn,a.audio.playBgm(a.gametype.BgmType.start)},onHide:function(t){},update:function(t){0==this.isDataInit&&(this.loadingImg.angle-=200*t)},onStart:function(){a.audio.playEffect(a.gametype.SoundType.click),this.isloading||this.isDataInit||(a.ui.show("menu"),a.ui.show("info"),a.ui.hide("start"),console.log("onstart"))},onSound:function(){a.audio.on(),this.soundBtn_on.active=a.audio.musicOn,this.soundBtn_off.active=!a.audio.musicOn}}),cc._RF.pop()},{"../app":"app","../platform/gameMgr":"gameMgr"}],storage:[function(t,e,i){"use strict";cc._RF.push(e,"68d70aC795AQJEIl2L2b8Kp","storage");t("../common/config"),t("../data/userdata");e.exports={saveUserData:function(){},getUserData:function(){},getGold:function(){},saveGold:function(){}},cc._RF.pop()},{"../common/config":"config","../data/userdata":"userdata"}],subpackage:[function(t,e,i){"use strict";if(cc._RF.push(e,"73a80R53zdGIZCWB9VXSquA","subpackage"),WECHATGAME)wx.getFileSystemManager();new Array,new Array;var a={shareTexture:new Array,fishLoaded:!1,setFishImg:function(t,e){var i=this;this.loadSprite(t,function(t){i.fishImg[e]=t})},load:function(){if(WECHATGAME&&QQPlAY){platform.loadSubpackage({name:"skeleton",success:function(t){console.log("\u5206\u5305\u52a0\u8f7d\u6210\u529f")},fail:function(t){}})}}};e.exports=a,cc._RF.pop()},{}],summon:[function(t,e,i){"use strict";cc._RF.push(e,"e301eKHAG9NWLjXy2QmFQNi","summon");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.itemlist=new Array,this.content=this.node.findChild("content");for(var t=0;t<a.gameConfig.summon.length;t++){var e=this.content.findChild(t+"");this.itemlist.push(e),e.on("click",this.onClickSummon,this),e.findChild("bg/icon/num").getComponent(cc.Label).string=a.gameConfig.summon[t].cost}this.resultContent=this.node.findChild("result"),this.resultCloseBtn=this.resultContent.findChild("close"),this.resultCloseBtn.on("click",this.onClose,this),this.node.findChild("mask").on("click",function(){a.ui.hide("summon")},this),this.isMaskClick=!1,this.canSummon=!1,this.posArray=new Array,this.summonBtnList=new Array,this.heroItemList=new Array;var i=this.resultContent.findChild("coverNode"),n=this.resultContent.findChild("showNode");for(t=0;t<5;t++){(e=i.findChild(t+"")).on("click",this.onClickSummonItem,this),this.posArray.push({x:e.x,y:e.y}),this.summonBtnList.push(e);var s=n.findChild(""+t);this.heroItemList.push(s)}this.effectAnima=this.resultContent.findChild("call").getComponent(sp.Skeleton),this.effectAnima.setCompleteListener(this.animaListener.bind(this)),this.flashAnima=this.resultContent.findChild("flash").getComponent(sp.Skeleton),this.flashAnima.setCompleteListener(this.flashOver.bind(this)),this.bulingAnima=this.resultContent.findChild("buling").getComponent(sp.Skeleton)},animaListener:function(t){switch(t.animation.name){case"start1":this.showHeroOneByOne()}},onClose:function(){a.audio.playEffect(a.gametype.SoundType.duang),this.isMaskClick||this.leftSummonCount>0||(this.resultContent.active=!1)},flashOver:function(t){},onShow:function(){a.audio.playEffect(a.gametype.SoundType.duang),this.resultContent.active=!1;for(var t=0;t<this.summonBtnList.length;t++)this.summonBtnList[t].active=!0},onClickSummonItem:function(t){if(0!=this.canSummon)if(this.leftSummonCount<=0)a.ui.showFloatTip("\u62bd\u4e86\u4e24\u6b21\u4e86\uff0c\u4e0d\u80fd\u518d\u62bd\u4e86");else{var e=parseInt(t.node.name);this.summonBtnList[e].runAction(cc.scaleTo(.1,0,1));var i=this.resultHeroList[e],s=a.gameConfig.getHero(i.id,i.star);this.scheduleOnce(function(){this.heroItemList[e].x=this.summonBtnList[e].x,this.heroItemList[e].y=this.summonBtnList[e].y,this.heroItemList[e].scaleX=0,this.heroItemList[e].scaleY=1,this.heroItemList[e].runAction(cc.scaleTo(.1,1,1))}.bind(this),.1);var o=parseInt(s.grade);if(o>2)switch(this.bulingAnima.node.active=!0,this.bulingAnima.node.x=this.summonBtnList[e].x,this.bulingAnima.node.y=this.summonBtnList[e].y,o){case 3:this.bulingAnima.setAnimation(0,"kabuling1",!1);break;case 4:this.bulingAnima.setAnimation(0,"kabuling2",!1);break;case 5:this.bulingAnima.setAnimation(0,"kabuling3",!1)}this.showHeroInfo(this.heroItemList[e],s);var r={uid:a.gamedata.genHeroUId(),id:parseInt(i.id),star:i.star,progress:0,isDead:!1,deadTime:0};a.gamedata.heroData.push(r),n.saveHero(),this.leftSummonCount--,this.leftSummonCount<=0&&(this.isMaskClick=!1)}},onClickSummon:function(t){this.leftSummonCount=2;for(var e=0;e<this.summonBtnList.length;e++)this.summonBtnList[e].active=!1,this.heroItemList[e].active=!1;var i=parseInt(t.node.name),o=a.gameConfig.summon[i].cost;o>a.gamedata.masterData.gold?a.ui.showFloatTip("\u91d1\u5e01\u4e0d\u8db3"):(a.gamedata.masterData.gold-=o,n.saveMaster(),a.event.emit(s.eventType.GOLD),n.preSummon(i,function(t){this.resultHeroList=t,this.isMaskClick=!0,this.canSummon=!1,this.startSummonAnima()}.bind(this)))},startSummonAnima:function(){for(var t=0;t<this.summonBtnList.length;t++)this.summonBtnList[t].x=0,this.summonBtnList[t].y=0,this.summonBtnList[t].active=!1,this.summonBtnList[t].scaleX=1,this.summonBtnList[t].scaleY=1,this.heroItemList[t].x=0,this.heroItemList[t].y=0,this.heroItemList[t].active=!1,this.heroItemList[t].scaleX=1,this.heroItemList[t].scaleY=1;this.bulingAnima.node.active=!1,this.resultContent.active=!0,this.effectAnima.clearTracks(),this.effectAnima.setAnimation(0,"start1",!1)},showHeroOneByOne:function(){for(var t=-1,e=0;e<this.heroItemList.length;e++)if(0==this.heroItemList[e].active){t=e;break}var i=a.gameConfig.getHero(this.resultHeroList[t].id,this.resultHeroList[t].star);switch(parseInt(i.grade)){case 1:this.flashAnima.node.color=new cc.Color(255,255,255);break;case 2:this.flashAnima.node.color=new cc.Color(43,127,28);break;case 3:this.flashAnima.node.color=new cc.Color(34,99,172);break;case 4:this.flashAnima.node.color=new cc.Color(108,36,201);break;case 5:this.flashAnima.node.color=new cc.Color(201,155,36)}this.flashAnima.node.x=this.posArray[t].x,this.flashAnima.node.y=this.posArray[t].y,this.flashAnima.clearTracks(),this.flashAnima.node.active=!0,this.flashAnima.setAnimation(0,"start2",!1);var n=function(){var e=this.heroItemList[t];e.active=!0,e.x=this.posArray[t].x,e.y=this.posArray[t].y,this.showHeroInfo(e,i),t++}.bind(this);this.scheduleOnce(n,.1),this.scheduleOnce(function(){t>=5?this.scheduleOnce(this.roundBack,.3):this.showHeroOneByOne()}.bind(this),.4)},showHeroInfo:function(t,e){t.findChild("name").getComponent(cc.Label).string=e.name,t.findChild("grade").getComponent(cc.Sprite).spriteFrame=a.res.gradeSprite[e.grade-1],t.findChild("icon/hero").getComponent(sp.Skeleton).setSkin(e.outfit),t.findChild("maxstar").active=5==e.star;for(var i=1;i<=5;i++)t.findChild("star/"+i).active=e.star>=i;t.findChild("max").active=5==e.star,t.findChild("progress").getComponent(cc.ProgressBar).progress=0,t.findChild("hp").getComponent(cc.Label).string=e.hp,t.findChild("atk").getComponent(cc.Label).string=e.atk,t.findChild("def").getComponent(cc.Label).string=e.def,t.findChild("sp").getComponent(cc.Label).string=e.sp},roundBack:function(){this.effectAnima.setAnimation(0,"start3",!1);for(var t=0;t<this.heroItemList.length;t++)this.heroItemList[t].runAction(cc.sequence(cc.moveTo(.45,0,0),cc.scaleTo(.5)));var e=function(){for(var t=0;t<this.summonBtnList.length;t++)this.summonBtnList[t].active=!0,this.summonBtnList[t].scaleX=0,this.summonBtnList[t].scaleY=0,this.summonBtnList[t].x=0,this.summonBtnList[t].y=0,this.summonBtnList[t].runAction(cc.scaleTo(.1,1))}.bind(this),i=0,n=function(){this.summonBtnList[i].runAction(cc.moveTo(.1,this.posArray[i].x,this.posArray[i].y)),this.summonBtnList[i].findChild("outline").active=!0,i++,this.scheduleOnce(function(){i>4?(a.util.unOrderSort(this.resultHeroList),this.isMaskClick=!1,this.canSummon=!0):n()}.bind(this),.15)}.bind(this);this.scheduleOnce(e,.6),this.scheduleOnce(n,1)}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],task:[function(t,e,i){"use strict";cc._RF.push(e,"18b6aXFyw5FpZmVFiPF/b9N","task");t("../common/util");var a=t("../app"),n=t("../platform/gameMgr"),s=t("../data/gametype");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.tweenContent=this.node.findChild("tweenContent"),this.closeBtn=this.tweenContent.findChild("closeBtn"),this.tasklist=new Array,this.taskContent=this.tweenContent.findChild("panel/view"),this.lvTxt=this.tweenContent.findChild("exp/lv").getComponent(cc.Label),this.expProTxt=this.tweenContent.findChild("exp/pro").getComponent(cc.Label),this.expFill=this.tweenContent.findChild("exp/cur").getComponent(cc.Sprite);for(var t=0;t<4;t++){var e=this.taskContent.findChild(""+t),i={item:e,rewardBtn:e.findChild("getBtn"),id:0};this.onGetReward(i.rewardBtn,t),this.tasklist.push(i)}this.register()},register:function(){a.event.on(s.eventType.RefrshTask,this.refreshAllTask,this),this.closeBtn.on("click",this.onClose,this)},onClose:function(){a.audio.playEffect(a.gametype.SoundType.duang),cc.tween(this.tweenContent).to(.1,{scaleX:.5,scaleY:.5}).call(function(){a.ui.hide("task")}).start()},update:function(t){},onShow:function(){a.audio.playEffect(a.gametype.SoundType.duang),this.tweenContent.scaleX=.5,this.tweenContent.scaleY=.5,cc.tween(this.tweenContent).to(.15,{scaleX:1,scaleY:1},{easing:"backOut"}).start(),this.showAllTask()},showAllTask:function(){this.expProTxt.string=a.gamedata.masterData.exp+"/4",this.lvTxt.string=a.gamedata.masterData.lv+1+"\u7ea7",this.expFill.fillRange=a.gamedata.masterData.exp/4;for(var t=0;t<this.tasklist.length;t++)this.tasklist[t].item.x=0;for(t=0;t<a.gamedata.taskData.length;t++)this.tasklist[t].id=a.gamedata.taskData[t].id,this.showTaskItem(this.tasklist[t].item,a.gamedata.taskData[t])},showTaskItem:function(t,e){var i=t.findChild("name").getComponent(cc.Label),s=t.findChild("reward_diamond/num").getComponent(cc.Label),o=t.findChild("progress").getComponent(cc.Sprite),r=t.findChild("progressTxt").getComponent(cc.Label),h=t.findChild("getBtn");1==e.finish?t.findChild("finish").active=!0:t.findChild("finish").active=!1;var c=a.gameConfig.findTask(e.id);switch(i.string=c.content,s.string=c.reward,parseInt(c.type)){case 1:var l=c.num.split("|")[0];i.string="\u62e5\u6709"+l+"\u4e2a\u82f1\u96c4";var d=n.getHeroNum()/parseInt(l);r.string=n.getHeroNum()+"/"+l,o.fillRange=d;break;case 2:l=c.num.split("|")[0];var p=parseInt(c.num.split("|")[1]),m="";switch(p){case 1:m="\u767d\u8272";break;case 2:m="\u7eff\u8272";break;case 3:m="\u84dd\u8272";break;case 4:m="\u7d2b\u8272";break;case 5:m="\u6a59\u8272"}i.string=i.string.format(l,m),o.fillRange=n.getHeroQualityNum(p)/l,r.string=n.getHeroQualityNum(p)+"/"+l;break;case 3:l=c.num.split("|")[0];var f="";switch(g=parseInt(c.num.split("|")[1])){case 1:f="\u521d\u7ea7\u53ec\u5524";break;case 2:f="\u4e2d\u7ea7\u53ec\u5524";break;case 3:f="\u9ad8\u7ea7\u53ec\u5524";break;case 4:f="\u7ec8\u6781\u53ec\u5524";break;case 5:f="\u53f2\u8bd7\u53ec\u5524"}i.string=i.string.format(l,f),o.fillRange=n.getSummonCount(g)/l,r.string=n.getSummonCount(g)+"/"+l;break;case 4:var g=c.num.split("|")[0];i.string=i.string.format(g),o.fillRange=a.gamedata.masterData.lv/g,r.string=a.gamedata.masterData.lv+"/"+g;break;case 5:var u=c.num.split("|")[1],y=c.num.split("|")[0],v=a.gameConfig.getHero(y,1).name;i.string="{0}\u5347\u7ea7\u5230{1}\u661f".format(v,u);var w=n.getHeroMaxStar(y);o.fillRange=w/u,r.string=n.getHeroMaxStar(y)+"/"+l;break;case 6:var C=c.num.split("|")[0];i.string=i.string.format(C),o.fillRange=a.gamedata.masterData.lvIdx/C,r.string=a.gamedata.masterData.lvIdx+"/"+C}h.active=n.checkTaskFinish(e.id),r.node.active=!0},onGetReward:function(t,e){t.on("click",function(){a.audio.playEffect(a.gametype.SoundType.click);var t=this.tasklist[e].id;n.finishTask(t,function(){this.tasklist[e].item.findChild("finish").active=!0,this.expProTxt.string=a.gamedata.masterData.exp+"/4",this.lvTxt.string=a.gamedata.masterData.lv+1+"\u7ea7",this.expFill.fillRange=a.gamedata.masterData.exp/4,this.scheduleOnce(function(){n.checkTaskAllFinish()}.bind(this),.5)}.bind(this))}.bind(this),this)},refreshAllTask:function(){for(var t=function(t,e){this.scheduleOnce(function(){t.runAction(cc.moveTo(.2,cc.v2(640,t.y)))},e)}.bind(this),e=function(t,e){this.scheduleOnce(function(){cc.tween(t).to(.2,{x:0},{easing:"backOut"}).start()},e)}.bind(this),i=0;i<this.tasklist.length;i++)t(this.tasklist[i].item,.2*i);this.scheduleOnce(function(){this.showAllTask();for(var t=0;t<this.tasklist.length;t++)this.tasklist[t].item.x=-640,e(this.tasklist[t].item,.2*t)}.bind(this),1)},onHide:function(){}}),cc._RF.pop()},{"../app":"app","../common/util":"util","../data/gametype":"gametype","../platform/gameMgr":"gameMgr"}],time:[function(t,e,i){"use strict";cc._RF.push(e,"ce23eTYlO5Jk5d8AlPQPVPC","time");var a=t("../manager/request"),n=t("../common/config"),s={serviceTime:null,offset:0,update:function(t){t<.5&&(this.offset+=t)},sync:function(t){a.post(n.configUrl.url,{GetCurrentTime:""},function(e){console.log(e),this.serviceTime=parseInt(e.CurrentTime),this.offset=0,t&&t()}.bind(this))},init:function(t){WECHATGAME?this.sync(t):(this.serviceTime=parseInt((new Date).getTime()/1e3),this.offset=0)},now:function(){var t=this.serviceTime+this.offset;return parseInt(t)}};e.exports={sync:s.sync,init:s.init,now:s.now,update:s.update},cc._RF.pop()},{"../common/config":"config","../manager/request":"request"}],ui:[function(t,e,i){"use strict";cc._RF.push(e,"f9877TlstFIWZzubYTR0CcK","ui");var a={loading:{prefab:"loading",order:50,script:"loading"},msgbox:{prefab:"msgbox",order:52,script:"msgbox"},start:{prefab:"start",order:3,script:"start"},gamelist:{prefab:"gamelist",order:54,script:"gamelist"},guess:{prefab:"guess",order:31,script:"guess"},menu:{prefab:"menu",order:4,script:"menu"},battle:{prefab:"battle",order:5,script:"battle"},info:{prefab:"info",order:9,script:"info"},skill:{prefab:"skill",order:10,script:"skill"},hero:{prefab:"hero",order:11,script:"hero"},selectHero:{prefab:"selectHero",order:12,script:"selectHero"},result:{prefab:"result",order:13,script:"result"},summon:{prefab:"summon",order:18,script:"summon"},float:{prefab:"float",order:51,script:"float"},draw:{prefab:"draw",order:14,script:"draw"},task:{prefab:"task",order:15,script:"task"},sign:{prefab:"sign",order:16,script:"sign"},rank:{prefab:"rank",order:17,script:"rank"},reward:{prefab:"reward",order:18,script:"reward"},friend:{prefab:"friend",order:19,script:"friend"},chestUp:{prefab:"chestUp",order:20,script:"chestUp"}},n=["loading","start","msgbox","float"],s=new Array,o=!1;e.exports={inited:o,show:function(t,e){if(void 0!=s[t])s[t].node.active=!0,s[t].script&&void 0!=s[t].script.onShow&&s[t].script.onShow(e);else{var i="prefab/view/";i+=a[t].prefab,cc.loader.loadRes(i,cc.Prefab,function(t,i){t&&cc.error(t);var n=i.name;console.log("Load "+n+" successfully");var o=cc.instantiate(i);o.name=n,o.zIndex=a[n].order,s[n]={},s[n].node=o,cc.find("Canvas").addChild(o),s[n].script=o.addComponent(a[n].script),void 0==s[n].script&&console.error(n+"add component "+a[n].script+" failure"),o.active=!0,s[n].script.onShow(e)})}},hide:function(t,e){void 0!=s[t]&&s[t].node.active&&(s[t].node.active=!1,s[t].script&&void 0!=s[t].script.onHide&&s[t].script.onHide(e))},isShow:function(t){return void 0!=s[t]&&s[t].node.active},load:function(t){if(o)return console.log("uimanager has been loaded"),void(void 0!=t&&t());console.log("uimanager load");var e=cc.find("Canvas");if(e.childrenCount>0)for(var i=0;i<e.childrenCount;++i)"Main Camera"!==e.children[i].name&&e.children[i].destroy();var r=new Array;for(var h in n)r[h]="prefab/view/"+a[n[h]].prefab;console.log(r),cc.loader.loadResArray(r,cc.Prefab,function(e,i){e&&cc.error(e);for(var n=0;n<i.length;++n){var r=i[n].name;console.log("Load "+r+" successfully");var h=cc.instantiate(i[n]);h.name=r,s[r]={},s[r].node=h,h.zIndex=a[r].order,cc.find("Canvas").addChild(h),s[r].script=h.addComponent(a[r].script),void 0==s[r].script&&console.error(r+"add component "+a[r].script+" failure")}o=!0,void 0!=t&&t()})},showFloatTip:function(t,e){void 0==e&&(e=1),void 0==t&&(t=""),this.show("float",{during:e,content:t})},showMessageBox:function(t){void 0!=t?(t.content,this.show("msgbox",t)):console.error("invaild params to msgbox")},showLoading:function(t){WECHATGAME?wx.showLoading(t):QQPLAY?qq.showLoading(t):this.show("loading",t)},hideLoading:function(){WECHATGAME?wx.hideLoading():QQPLAY?qq.hideLoading():this.hide("loading")}},cc._RF.pop()},{}],userdata:[function(t,e,i){"use strict";cc._RF.push(e,"1d8d7wiOxdIt7icx23FBxY5","userdata");e.exports={openid:"",nickname:"\u6e38\u5ba2",icon:"",isLogin:!1,isInvite:!1,inviteId:""},cc._RF.pop()},{}],util:[function(t,e,i){"use strict";cc._RF.push(e,"1d143eaIW9OLLEegjjkLnkf","util");var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};String.prototype.format=function(){if(0==arguments.length)return this;var t=arguments[0],e=this;if("object"==(void 0===t?"undefined":a(t))){for(var i in t)e=e.replace(new RegExp("\\{"+i+"\\}","g"),t[i]);return e}for(var n=0;n<arguments.length;n++)e=e.replace(new RegExp("\\{"+n+"\\}","g"),arguments[n]);return e},cc.Node.prototype.findChild=function(t,e){for(var i=t.split("/"),a=this,n=this,s=0;s<i.length;++s)a=n=a.getChildByName(i[s]);return void 0!=e&&(n=n.getComponent(e)),n},cc.Node.prototype.converToViewPosition=function(){for(var t=this,e=cc.v2(this.x,this.y);"Canvas"!=t.parent.name;)e.x+=t.parent.x,e.y+=t.parent.y,t=t.parent;return e},Date.prototype.timestamp=function(){return Math.floor((new Date).getTime()/1e3)};var n={audio:void 0,unique:function(t){for(var e=new Array,i=0;i<t.length;i++)-1===t.indexOf(t[i],i+1)&&e.push(t[i]);return e},unOrderSort:function(t){return t=t.sort(function(){return Math.random()>.5?-1:1})},bubbleSort:function(t,e){if("object"==a(t[0])){for(var i=0;i<t.length-1;i++)for(var n=0;n<t.length-1-i;n++)if(t[n][e]>t[n+1][e]){var s=t[n];t[n]=t[n+1],t[n+1]=s}}else for(i=0;i<t.length-1;i++)for(n=0;n<t.length-1-i;n++)if(t[n]>t[n+1]){s=t[n];t[n]=t[n+1],t[n+1]=s}},createIcon:function(t,e,i){if(WECHATGAME||QQPLAY||TTGAME||VIVO){var a=(WECHATGAME?wx:QQPLAY?qq:TTGAME?tt:qg).createImage();a.onload=function(){var e=new cc.Texture2D;e.initWithElement(a),e.handleLoadedTexture(),t.spriteFrame=new cc.SpriteFrame(e)},a.onerror=function(t){i&&i()},a.src=e}else if(NATIVE)cc.loader.load(e,function(e,i){var a=new cc.SpriteFrame(i);t.spriteFrame=a});else{var n=document.createElement("image");n.style.width="120px",n.style.height="120px",n.setAttribute("src",e);var s=new cc.Texture2D;s.initWithElement(n),s.handleLoadedTexture(),t.spriteFrame=new cc.SpriteFrame(s)}},csv2Json:function(t){for(var e=[],i=t.split("\n"),a=i[0].split(","),n=1;n<i.length;++n){var s={},o=i[n].split(",");if(o.length==a.length){for(var r=0;r<a.length;++r){var h=a[r].trim().replace(/\"/g,""),c=o[r].trim().replace(/\"/g,"");Object.defineProperty(s,h,{value:c})}e.push(s)}}return e},sec2hhmmss:function(t){var e=Math.floor(t/3600),i=Math.floor(t/60)%60,a=t%60;return e+":"+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)},isInside:function(t,e){var i=t.x,a=t.y,n=e;return i>n.x-n.width/2&&i<n.x+n.width/2&&a<n.y+n.height/2&&a>n.y-n.height/2},transAxis:function(t){var e=cc.winSize,i=cc.view.getFrameSize(),a=e.width,n=a*i.height/i.width;return new cc.Vec2(t.x-a/2,t.y-n/2)},system:null,createAuthBtn:function(t){(WECHATGAME||QQPLAY)&&null==this.system&&(this.system=platform.getSystemInfoSync());var e=this.system.screenWidth/5,i=1.25*e,a=this.system.screenHeight/2-3.52*i,n=platform.createUserInfoButton({type:"text",text:"",style:{left:0,top:a,width:e,height:i,lineHeight:40,backgroundColor:"#00000000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}});n.onTap(function(e){var i=e.userInfo;void 0!=i&&(n.hide(),t(i))})},getQuakeAnim:function(){return cc.repeatForever(cc.sequence(cc.rotateBy(.1,-10),cc.rotateBy(.1,20),cc.rotateBy(.1,-20),cc.rotateBy(.1,20),cc.rotateBy(.1,-10),cc.scaleTo(2,1,1)))},getFloatAnim:function(){return cc.repeatForever(cc.sequence(cc.moveBy(.7,cc.v2(0,30)),cc.moveBy(.7,cc.v2(0,-30))))},getQuickFloatAnima:function(){return cc.repeatForever(cc.sequence(cc.moveBy(.25,cc.v2(0,30)),cc.moveBy(.25,cc.v2(0,-30))))},getBreathAnima:function(){return cc.repeatForever(cc.sequence(cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.2,1,1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.2,1,1)))},randomAverage:function(){return Math.random()>.5?-1:1},lerp:function(t,e,i){return i<0&&(i=0),i>1&&(i=1),t+(e-t)*i},formatTime:function(t){var e=parseInt(t/60),i="";return e>=60&&(i=parseInt(e/60))<10&&(i="0"+i+":"),e<10&&(e="0"+e),e+=":",(t=parseInt(t%60))<10&&(t="0"+t),i+e+t}};e.exports=n,cc._RF.pop()},{}]},{},["app","config","gameConfig","util","gamedata","gametype","guidedata","userdata","main","audio","event","request","res","storage","subpackage","time","ui","ad","gameMgr","launch","native","share","character","circleProgress","collider","hpShow","battle","chestUp","draw","float","friend","gamelist","guess","hero","info","loading","menu","msgbox","rank","result","reward","selectHero","sign","skill","start","summon","task"]);